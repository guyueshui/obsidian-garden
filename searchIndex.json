[
{
		"title": 202304101713,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304101713 serach in hugo/",
		"content": "为hugo网站添加搜索功能\n几个重要参考：\n\nBuilding search into a Hugo website\nSearch for your Hugo Website\neddiewebb's gist\n基于上面gist整理成文：Client Side Search for your Hugo Blog with Fuse.js\nlunr.js",
		"tags": [ "note","hugo","search","website","blog"]
},

{
		"title": 202304202149,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304202149volatile-specifier/",
		"content": "volatile修饰的变量旨在告诉编译器这个变量易失（对应缓存的术语）、易变，因此在读取变量值的时候，始终通过内存取址的方式，而不信赖缓存。\n例如：\nint i = 10;\nint a = i;\n// 以编译器不知道的方式改变i的值为32\nint b = i;\ncout &lt;&lt; b; // 10\n\n这里，由于编译器的优化，编译器看到两次赋值间，i的值未发生变化。所以直接从缓存（寄存器）中拿出上次的值赋给b.\nvolatile int i = 10;\nint a = i;\n// 以编译器不知道的方式改变i的值为32\nint b = i;\ncout &lt;&lt; b; // 32\n\n这里，用volatile修饰变量i，告诉编译器这个变量易失，不要相信缓存，不要从寄存器读取。所以编译器按照常规方式从内存地址读取i的值（32）赋给b.\nsee also",
		"tags": [ "note","cpp","specifier","volatile"]
},

{
		"title": 202304230920,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304230920 cmake learn/",
		"content": "Just see:\ncmake_minimum_required(VERSION 3.15)\n\nproject(ClickHouse LANGUAGES C CXX ASM)\nset(CMAKE_THREAD_LIBS_INIT &quot;-lpthread&quot;)\nset(CMAKE_HAVE_THREADS_LIBRARY 1)\nset(CMAKE_USE_WIN32_THREADS_INIT 0)\nset(CMAKE_USE_PTHREADS_INIT 1)\nset(THREADS_PREFER_PTHREAD_FLAG ON)\n\nset(CMAKE_INCLUDE_DIRECTORIES_BEFORE ON)\ninclude_directories(\n./contrib/libcxx/include/\n./contrib/sysroot/linux-x86_64/x86_64-linux-gnu/libc/\n./contrib/sysroot/linux-x86_64/x86_64-linux-gnu/libc/usr/include/\n./contrib/sysroot/linux-x86_64/x86_64-linux-gnu/libc/usr/include/linux/\n./contrib/sysroot/linux-x86_64/x86_64-linux-gnu/libc/usr/include/x86_64-linux-gnu/\n./contrib/sysroot/linux-x86_64-musl/include/\n./contrib/sysroot/linux-x86_64-musl/lib/gcc/x86_64-linux-musl/10/include/\n/usr/lib/gcc/x86_64-linux-gnu/10.3.1/include/\n)\n\n# If turned off: e.g. when ENABLE_FOO is ON, but FOO tool was not found, the CMake will continue.\noption(FAIL_ON_UNSUPPORTED_OPTIONS_COMBINATION\n&quot;Stop/Fail CMake configuration if some ENABLE_XXX option is defined (either ON or OFF)\nbut is not possible to satisfy&quot; ON)\n\nif(FAIL_ON_UNSUPPORTED_OPTIONS_COMBINATION)\nset(RECONFIGURE_MESSAGE_LEVEL FATAL_ERROR)\nelse()\nset(RECONFIGURE_MESSAGE_LEVEL WARNING)\nendif()\n\ninclude (cmake/arch.cmake)\ninclude (cmake/target.cmake)\ninclude (cmake/tools.cmake)\ninclude (cmake/ccache.cmake)\ninclude (cmake/clang_tidy.cmake)\ninclude (cmake/git_status.cmake)\n\n# Ignore export() since we don't use it,\n# but it gets broken with a global targets via link_libraries()\nmacro (export)\nendmacro ()\n\nset(CMAKE_EXPORT_COMPILE_COMMANDS 1) # Write compile_commands.json\nset(CMAKE_LINK_DEPENDS_NO_SHARED 1) # Do not relink all depended targets on .so\nset(CMAKE_CONFIGURATION_TYPES &quot;RelWithDebInfo;Debug;Release;MinSizeRel&quot; CACHE STRING &quot;&quot; FORCE)\nset(CMAKE_DEBUG_POSTFIX &quot;d&quot; CACHE STRING &quot;Generate debug library name with a postfix.&quot;) # To be consistent with CMakeLists from contrib libs.\n\n# Enable the ability to organize targets into hierarchies of &quot;folders&quot; for capable GUI-based IDEs.\n# For more info see https://cmake.org/cmake/help/latest/prop_gbl/USE_FOLDERS.html\nset_property(GLOBAL PROPERTY USE_FOLDERS ON)\n\n# Check that submodules are present\nif (NOT EXISTS &quot;${ClickHouse_SOURCE_DIR}/contrib/sysroot/README&quot;)\nmessage (FATAL_ERROR &quot;Submodules are not initialized. Run\\n\\tgit submodule update --init&quot;)\nendif ()\n\n# Take care to add prlimit in command line before ccache, or else ccache thinks that\n# prlimit is compiler, and clang++ is its input file, and refuses to work with\n# multiple inputs, e.g in ccache log:\n# [2021-03-31T18:06:32.655327 36900] Command line: /usr/bin/ccache prlimit --as=10000000000 --data=5000000000 --cpu=600 /usr/bin/clang++-11 - ...... std=gnu++2a -MD -MT src/CMakeFiles/dbms.dir/Storages/MergeTree/IMergeTreeDataPart.cpp.o -MF src/CMakeFiles/dbms.dir/Storages/MergeTree/IMergeTreeDataPart.cpp.o.d -o src/CMakeFiles/dbms.dir/Storages/MergeTree/IMergeTreeDataPart.cpp.o -c ../src/Storages/MergeTree/IMergeTreeDataPart.cpp\n#\n# [2021-03-31T18:06:32.656704 36900] Multiple input files: /usr/bin/clang++-11 and ../src/Storages/MergeTree/IMergeTreeDataPart.cpp\n#\n# Another way would be to use --ccache-skip option before clang++-11 to make\n# ccache ignore it.\noption(ENABLE_CHECK_HEAVY_BUILDS &quot;Don't allow C++ translation units to compile too long or to take too much memory while compiling.&quot; OFF)\nif (ENABLE_CHECK_HEAVY_BUILDS)\n# set DATA (since RSS does not work since 2.6.x+) to 5G\nset (RLIMIT_DATA 5000000000)\n# set VIRT (RLIMIT_AS) to 10G (DATA*10)\nset (RLIMIT_AS 10000000000)\n# set CPU time limit to 1000 seconds\nset (RLIMIT_CPU 1000)\n\n# gcc10/gcc10/clang -fsanitize=memory is too heavy\nif (SANITIZE STREQUAL &quot;memory&quot; OR COMPILER_GCC)\nset (RLIMIT_DATA 10000000000) # 10G\nendif()\n\nset (CMAKE_CXX_COMPILER_LAUNCHER prlimit --as=${RLIMIT_AS} --data=${RLIMIT_DATA} --cpu=${RLIMIT_CPU} ${CMAKE_CXX_COMPILER_LAUNCHER})\nendif ()\n\nif (NOT CMAKE_BUILD_TYPE OR CMAKE_BUILD_TYPE STREQUAL &quot;None&quot;)\nset (CMAKE_BUILD_TYPE &quot;RelWithDebInfo&quot;)\nmessage (STATUS &quot;CMAKE_BUILD_TYPE is not set, set to default = ${CMAKE_BUILD_TYPE}&quot;)\nendif ()\nmessage (STATUS &quot;CMAKE_BUILD_TYPE: ${CMAKE_BUILD_TYPE}&quot;)\n\nstring (TOUPPER ${CMAKE_BUILD_TYPE} CMAKE_BUILD_TYPE_UC)\n\noption(USE_STATIC_LIBRARIES &quot;Disable to use shared libraries&quot; ON)\n# DEVELOPER ONLY.\n# Faster linking if turned on.\noption(SPLIT_SHARED_LIBRARIES &quot;Keep all internal libraries as separate .so files&quot; OFF)\n\nif (USE_STATIC_LIBRARIES AND SPLIT_SHARED_LIBRARIES)\nmessage(FATAL_ERROR &quot;SPLIT_SHARED_LIBRARIES=1 must not be used together with USE_STATIC_LIBRARIES=1&quot;)\nendif()\n\nif (NOT USE_STATIC_LIBRARIES AND SPLIT_SHARED_LIBRARIES)\nset(BUILD_SHARED_LIBS 1 CACHE INTERNAL &quot;&quot;)\nendif ()\n\nif (USE_STATIC_LIBRARIES)\nlist(REVERSE CMAKE_FIND_LIBRARY_SUFFIXES)\nendif ()\n\noption (ENABLE_FUZZING &quot;Fuzzy testing using libfuzzer&quot; OFF)\n\nif (ENABLE_FUZZING)\n# Also set WITH_COVERAGE=1 for better fuzzing process\n# By default this is disabled, because fuzzers are built in CI with the clickhouse itself.\n# And we don't want to enable coverage for it.\nmessage (STATUS &quot;Fuzzing instrumentation enabled&quot;)\nset (FUZZER &quot;libfuzzer&quot;)\nset (CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -nostdlib++&quot;)\nset (ENABLE_CLICKHOUSE_ODBC_BRIDGE OFF)\nset (ENABLE_LIBRARIES 0)\nset (ENABLE_SSL 1)\nset (USE_UNWIND ON)\nset (ENABLE_EMBEDDED_COMPILER 0)\nset (ENABLE_EXAMPLES 0)\nset (ENABLE_UTILS 0)\nset (ENABLE_THINLTO 0)\nset (ENABLE_TCMALLOC 0)\nset (ENABLE_JEMALLOC 0)\nset (ENABLE_CHECK_HEAVY_BUILDS 1)\nset (GLIBC_COMPATIBILITY OFF)\n\n# For codegen_select_fuzzer\nset (ENABLE_PROTOBUF 1)\nendif()\n\n# Global libraries\n# See:\n# - default_libs.cmake\n# - sanitize.cmake\nadd_library(global-libs INTERFACE)\n\ninclude (cmake/fuzzer.cmake)\ninclude (cmake/sanitize.cmake)\n\noption(ENABLE_COLORED_BUILD &quot;Enable colors in compiler output&quot; ON)\n\nset (CMAKE_COLOR_MAKEFILE ${ENABLE_COLORED_BUILD}) # works only for the makefile generator\n\nif (ENABLE_COLORED_BUILD AND CMAKE_GENERATOR STREQUAL &quot;Ninja&quot;)\n# Turn on colored output. https://github.com/ninja-build/ninja/wiki/FAQ\nset (CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fdiagnostics-color=always&quot;)\nset (CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -fdiagnostics-color=always&quot;)\n# ... such manually setting of flags can be removed once CMake supports a variable to\n# activate colors in *all* build systems: https://gitlab.kitware.com/cmake/cmake/-/issues/15502\nendif ()\n\ninclude (cmake/check_flags.cmake)\ninclude (cmake/add_warning.cmake)\n\nif (COMPILER_CLANG)\n# generate ranges for fast &quot;addr2line&quot; search\nif (NOT CMAKE_BUILD_TYPE_UC STREQUAL &quot;RELEASE&quot;)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} -gdwarf-aranges&quot;)\nendif ()\n\nif (HAS_USE_CTOR_HOMING)\n# For more info see https://blog.llvm.org/posts/2021-04-05-constructor-homing-for-debug-info/\nif (CMAKE_BUILD_TYPE_UC STREQUAL &quot;DEBUG&quot; OR CMAKE_BUILD_TYPE_UC STREQUAL &quot;RELWITHDEBINFO&quot;)\nset (CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -Xclang -fuse-ctor-homing&quot;)\nset (CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -Xclang -fuse-ctor-homing&quot;)\nendif()\nendif()\n\nno_warning(enum-constexpr-conversion) # breaks Protobuf in clang-16\nendif ()\n\n# If compiler has support for -Wreserved-identifier. It is difficult to detect by clang version,\n# because there are two different branches of clang: clang and AppleClang.\n# (AppleClang is not supported by ClickHouse, but some developers have misfortune to use it).\nif (HAS_RESERVED_IDENTIFIER)\nadd_compile_definitions (HAS_RESERVED_IDENTIFIER)\nendif ()\n\n# If turned `ON`, assumes the user has either the system GTest library or the bundled one.\noption(ENABLE_TESTS &quot;Provide unit_test_dbms target with Google.Test unit tests&quot; ON)\noption(ENABLE_EXAMPLES &quot;Build all example programs in 'examples' subdirectories&quot; OFF)\n\nif (OS_LINUX AND (ARCH_AMD64 OR ARCH_AARCH64) AND USE_STATIC_LIBRARIES AND NOT SPLIT_SHARED_LIBRARIES AND NOT USE_MUSL)\n# Only for Linux, x86_64 or aarch64.\noption(GLIBC_COMPATIBILITY &quot;Enable compatibility with older glibc libraries.&quot; ON)\nelseif(GLIBC_COMPATIBILITY)\nmessage (${RECONFIGURE_MESSAGE_LEVEL} &quot;Glibc compatibility cannot be enabled in current configuration&quot;)\nendif ()\n\n# Make sure the final executable has symbols exported\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -rdynamic&quot;)\n\nif (OS_DARWIN)\n# The `-all_load` flag forces loading of all symbols from all libraries,\n# and leads to multiply-defined symbols. This flag allows force loading\n# from a _specific_ library, which is what we need.\nset(WHOLE_ARCHIVE -force_load)\n# The `-noall_load` flag is the default and now obsolete.\nset(NO_WHOLE_ARCHIVE &quot;-undefined,error&quot;) # Effectively, a no-op. Here to avoid empty &quot;-Wl, &quot; sequence to be generated in the command line.\nelse ()\nset(WHOLE_ARCHIVE --whole-archive)\nset(NO_WHOLE_ARCHIVE --no-whole-archive)\nendif ()\n\noption(ENABLE_CURL_BUILD &quot;Enable curl, azure, sentry build on by default except MacOS.&quot; ON)\nif (OS_DARWIN)\n# Disable the curl, azure, senry build on MacOS\nset (ENABLE_CURL_BUILD OFF)\nendif ()\n\n# Ignored if `lld` is used\noption(ADD_GDB_INDEX_FOR_GOLD &quot;Add .gdb-index to resulting binaries for gold linker.&quot;)\n\nif (NOT CMAKE_BUILD_TYPE_UC STREQUAL &quot;RELEASE&quot;)\n# Can be lld or ld-lld.\nif (LINKER_NAME MATCHES &quot;lld$&quot;)\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -Wl,--gdb-index&quot;)\nset (CMAKE_SHARED_LINKER_FLAGS &quot;${CMAKE_SHARED_LINKER_FLAGS} -Wl,--gdb-index&quot;)\nmessage (STATUS &quot;Adding .gdb-index via --gdb-index linker option.&quot;)\n# we use another tool for gdb-index, because gold linker removes section .debug_aranges, which used inside clickhouse stacktraces\n# http://sourceware-org.1504.n7.nabble.com/gold-No-debug-aranges-section-when-linking-with-gdb-index-td540965.html#a556932\nelseif (LINKER_NAME MATCHES &quot;gold$&quot; AND ADD_GDB_INDEX_FOR_GOLD)\nfind_program (GDB_ADD_INDEX_EXE NAMES &quot;gdb-add-index&quot; DOC &quot;Path to gdb-add-index executable&quot;)\nif (NOT GDB_ADD_INDEX_EXE)\nset (USE_GDB_ADD_INDEX 0)\nmessage (WARNING &quot;Cannot add gdb index to binaries, because gold linker is used, but gdb-add-index executable not found.&quot;)\nelse()\nset (USE_GDB_ADD_INDEX 1)\nmessage (STATUS &quot;gdb-add-index found: ${GDB_ADD_INDEX_EXE}&quot;)\nendif()\nendif ()\nendif()\n\nif (CMAKE_BUILD_TYPE_UC STREQUAL &quot;RELEASE&quot;\nOR CMAKE_BUILD_TYPE_UC STREQUAL &quot;RELWITHDEBINFO&quot;\nOR CMAKE_BUILD_TYPE_UC STREQUAL &quot;MINSIZEREL&quot;)\nset (OMIT_HEAVY_DEBUG_SYMBOLS_DEFAULT ON)\nelse()\nset (OMIT_HEAVY_DEBUG_SYMBOLS_DEFAULT OFF)\nendif()\n# Provides faster linking and lower binary size.\n# Tradeoff is the inability to debug some source files with e.g. gdb\n# (empty stack frames and no local variables).&quot;\noption(OMIT_HEAVY_DEBUG_SYMBOLS\n&quot;Do not generate debugger info for heavy modules (ClickHouse functions and dictionaries, some contrib)&quot;\n${OMIT_HEAVY_DEBUG_SYMBOLS_DEFAULT})\n\nif (CMAKE_BUILD_TYPE_UC STREQUAL &quot;DEBUG&quot;)\nset(USE_DEBUG_HELPERS ON)\nendif()\noption(USE_DEBUG_HELPERS &quot;Enable debug helpers&quot; ${USE_DEBUG_HELPERS})\n\noption(BUILD_STANDALONE_KEEPER &quot;Build keeper as small standalone binary&quot; OFF)\nif (NOT BUILD_STANDALONE_KEEPER)\noption(CREATE_KEEPER_SYMLINK &quot;Create symlink for clickhouse-keeper to main server binary&quot; ON)\nelse ()\noption(CREATE_KEEPER_SYMLINK &quot;Create symlink for clickhouse-keeper to main server binary&quot; OFF)\nendif ()\n\n# Create BuildID when using lld. For other linkers it is created by default.\nif (LINKER_NAME MATCHES &quot;lld$&quot;)\n# SHA1 is not cryptographically secure but it is the best what lld is offering.\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -Wl,--build-id=sha1&quot;)\nendif ()\n\n# Add a section with the hash of the compiled machine code for integrity checks.\n# Only for official builds, because adding a section can be time consuming (rewrite of several GB).\n# And cross compiled binaries are not supported (since you cannot execute clickhouse hash-binary)\nif (CLICKHOUSE_OFFICIAL_BUILD AND (NOT CMAKE_TOOLCHAIN_FILE OR CMAKE_TOOLCHAIN_FILE MATCHES &quot;linux/toolchain-x86_64.cmake$&quot;))\nmessage(STATUS &quot;Official build: A checksum hash will be added to the clickhouse executable&quot;)\nset (USE_BINARY_HASH 1 CACHE STRING &quot;Calculate binary hash and store it in the separate section&quot;)\nelse ()\nmessage(STATUS &quot;No official build: A checksum hash will not be added to the clickhouse executable&quot;)\nendif ()\n\n# Optionally split binaries and debug symbols.\noption(SPLIT_DEBUG_SYMBOLS &quot;Split binaries and debug symbols&quot; OFF)\nif (SPLIT_DEBUG_SYMBOLS)\nmessage(STATUS &quot;Will split binaries and debug symbols&quot;)\nset(SPLITTED_DEBUG_SYMBOLS_DIR &quot;stripped&quot; CACHE STRING &quot;A separate directory for stripped information&quot;)\nendif()\n\ncmake_host_system_information(RESULT AVAILABLE_PHYSICAL_MEMORY QUERY AVAILABLE_PHYSICAL_MEMORY) # Not available under freebsd\n\nif(NOT AVAILABLE_PHYSICAL_MEMORY OR AVAILABLE_PHYSICAL_MEMORY GREATER 8000)\n# Less `/tmp` usage, more RAM usage.\noption(COMPILER_PIPE &quot;-pipe compiler option&quot; ON)\nendif()\n\nif(COMPILER_PIPE)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} -pipe&quot;)\nelse()\nmessage(STATUS &quot;Disabling compiler -pipe option (have only ${AVAILABLE_PHYSICAL_MEMORY} mb of memory)&quot;)\nendif()\n\ninclude(cmake/cpu_features.cmake)\n\n# Asynchronous unwind tables are needed for Query Profiler.\n# They are already by default on some platforms but possibly not on all platforms.\n# Enable it explicitly.\nset (COMPILER_FLAGS &quot;${COMPILER_FLAGS} -fasynchronous-unwind-tables&quot;)\n\n# Reproducible builds.\nif (CMAKE_BUILD_TYPE_UC STREQUAL &quot;DEBUG&quot;)\nset (ENABLE_BUILD_PATH_MAPPING_DEFAULT OFF)\nelse ()\nset (ENABLE_BUILD_PATH_MAPPING_DEFAULT ON)\nendif ()\n\noption (ENABLE_BUILD_PATH_MAPPING &quot;Enable remapping of file source paths in debug info, predefined preprocessor macros, and __builtin_FILE(). It's used to generate reproducible builds. See https://reproducible-builds.org/docs/build-path&quot; ${ENABLE_BUILD_PATH_MAPPING_DEFAULT})\n\nif (ENABLE_BUILD_PATH_MAPPING)\nset (COMPILER_FLAGS &quot;${COMPILER_FLAGS} -ffile-prefix-map=${CMAKE_SOURCE_DIR}=.&quot;)\nset (CMAKE_ASM_FLAGS &quot;${CMAKE_ASM_FLAGS} -ffile-prefix-map=${CMAKE_SOURCE_DIR}=.&quot;)\nendif ()\n\noption (ENABLE_BUILD_PROFILING &quot;Enable profiling of build time&quot; OFF)\nif (ENABLE_BUILD_PROFILING)\nif (COMPILER_CLANG)\nset (COMPILER_FLAGS &quot;${COMPILER_FLAGS} -ftime-trace&quot;)\nelse ()\nmessage (${RECONFIGURE_MESSAGE_LEVEL} &quot;Build profiling is only available with CLang&quot;)\nendif ()\nendif ()\n\nset (CMAKE_CXX_STANDARD 20)\nset (CMAKE_CXX_EXTENSIONS ON) # Same as gnu++2a (ON) vs c++2a (OFF): https://cmake.org/cmake/help/latest/prop_tgt/CXX_EXTENSIONS.html\nset (CMAKE_CXX_STANDARD_REQUIRED ON)\n\nset (CMAKE_C_STANDARD 11)\nset (CMAKE_C_EXTENSIONS ON)\nset (CMAKE_C_STANDARD_REQUIRED ON)\n\nif (COMPILER_GCC OR COMPILER_CLANG)\n# Enable C++14 sized global deallocation functions. It should be enabled by setting -std=c++14 but I'm not sure.\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fsized-deallocation&quot;)\nendif ()\n\n# falign-functions=32 prevents from random performance regressions with the code change. Thus, providing more stable\n# benchmarks.\nif (COMPILER_GCC OR COMPILER_CLANG)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} -falign-functions=32&quot;)\nendif ()\n\nif (ARCH_AMD64)\n# align branches within a 32-Byte boundary to avoid the potential performance loss when code layout change,\n# which makes benchmark results more stable.\nset(BRANCHES_WITHIN_32B_BOUNDARIES &quot;-mbranches-within-32B-boundaries&quot;)\nif (COMPILER_GCC)\n# gcc is in assembler, need to add &quot;-Wa,&quot; prefix\nset(BRANCHES_WITHIN_32B_BOUNDARIES &quot;-Wa,${BRANCHES_WITHIN_32B_BOUNDARIES}&quot;)\nendif()\n\ninclude(CheckCXXCompilerFlag)\ncheck_cxx_compiler_flag(&quot;${BRANCHES_WITHIN_32B_BOUNDARIES}&quot; HAS_BRANCHES_WITHIN_32B_BOUNDARIES)\nif (HAS_BRANCHES_WITHIN_32B_BOUNDARIES)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} ${BRANCHES_WITHIN_32B_BOUNDARIES}&quot;)\nendif()\nendif()\n\nif (COMPILER_GCC)\nset (CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fcoroutines&quot;)\nendif ()\n\n# Compiler-specific coverage flags e.g. -fcoverage-mapping for gcc\noption(WITH_COVERAGE &quot;Profile the resulting binary/binaries&quot; OFF)\n\nif (WITH_COVERAGE AND COMPILER_CLANG)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} -fprofile-instr-generate -fcoverage-mapping&quot;)\n# If we want to disable coverage for specific translation units\nset(WITHOUT_COVERAGE &quot;-fno-profile-instr-generate -fno-coverage-mapping&quot;)\nendif()\n\nif (WITH_COVERAGE AND COMPILER_GCC)\nset(COMPILER_FLAGS &quot;${COMPILER_FLAGS} -fprofile-arcs -ftest-coverage&quot;)\nset(COVERAGE_OPTION &quot;-lgcov&quot;)\nset(WITHOUT_COVERAGE &quot;-fno-profile-arcs -fno-test-coverage&quot;)\nendif()\n\nset (COMPILER_FLAGS &quot;${COMPILER_FLAGS}&quot;)\n\n# Our built-in unwinder only supports DWARF version up to 4.\nset (DEBUG_INFO_FLAGS &quot;-g -gdwarf-4&quot;)\n\nset (CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} ${COMPILER_FLAGS}&quot;)\nset (CMAKE_CXX_FLAGS_RELWITHDEBINFO &quot;${CMAKE_CXX_FLAGS_RELWITHDEBINFO} -O3 ${DEBUG_INFO_FLAGS} ${CMAKE_CXX_FLAGS_ADD}&quot;)\nset (CMAKE_CXX_FLAGS_DEBUG &quot;${CMAKE_CXX_FLAGS_DEBUG} -O0 ${DEBUG_INFO_FLAGS} -fno-inline ${CMAKE_CXX_FLAGS_ADD}&quot;)\n\nset (CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} ${COMPILER_FLAGS} ${CMAKE_C_FLAGS_ADD}&quot;)\nset (CMAKE_C_FLAGS_RELWITHDEBINFO &quot;${CMAKE_C_FLAGS_RELWITHDEBINFO} -O3 ${DEBUG_INFO_FLAGS} ${CMAKE_C_FLAGS_ADD}&quot;)\nset (CMAKE_C_FLAGS_DEBUG &quot;${CMAKE_C_FLAGS_DEBUG} -O0 ${DEBUG_INFO_FLAGS} -fno-inline ${CMAKE_C_FLAGS_ADD}&quot;)\n\nset (CMAKE_ASM_FLAGS &quot;${CMAKE_ASM_FLAGS} ${COMPILER_FLAGS} ${CMAKE_ASM_FLAGS_ADD}&quot;)\nset (CMAKE_ASM_FLAGS_RELWITHDEBINFO &quot;${CMAKE_ASM_FLAGS_RELWITHDEBINFO} -O3 ${DEBUG_INFO_FLAGS} ${CMAKE_ASM_FLAGS_ADD}&quot;)\nset (CMAKE_ASM_FLAGS_DEBUG &quot;${CMAKE_ASM_FLAGS_DEBUG} -O0 ${DEBUG_INFO_FLAGS} -fno-inline ${CMAKE_ASM_FLAGS_ADD}&quot;)\n\nif (COMPILER_CLANG)\nif (OS_DARWIN)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -stdlib=libc++&quot;)\nset(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -Wl,-U,_inside_main&quot;)\nendif()\n\n# Display absolute paths in error messages. Otherwise KDevelop fails to navigate to correct file and opens a new file instead.\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fdiagnostics-absolute-paths&quot;)\nset(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -fdiagnostics-absolute-paths&quot;)\n\nif (NOT ENABLE_TESTS AND NOT SANITIZE)\n# https://clang.llvm.org/docs/ThinLTO.html\n# Applies to clang only.\n# Disabled when building with tests or sanitizers.\noption(ENABLE_THINLTO &quot;Clang-specific link time optimization&quot; ON)\nendif()\n\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fstrict-vtable-pointers&quot;)\n\n# Set new experimental pass manager, it's a performance, build time and binary size win.\n# Can be removed after https://reviews.llvm.org/D66490 merged and released to at least two versions of clang.\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fexperimental-new-pass-manager&quot;)\nset(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -fexperimental-new-pass-manager&quot;)\n\n# We cannot afford to use LTO when compiling unit tests, and it's not enough\n# to only supply -fno-lto at the final linking stage. So we disable it\n# completely.\nif (ENABLE_THINLTO AND NOT ENABLE_TESTS AND NOT SANITIZE)\n# Link time optimization\nset (CMAKE_C_FLAGS_RELWITHDEBINFO &quot;${CMAKE_C_FLAGS_RELWITHDEBINFO} -flto=thin -fwhole-program-vtables&quot;)\nset (CMAKE_CXX_FLAGS_RELWITHDEBINFO &quot;${CMAKE_CXX_FLAGS_RELWITHDEBINFO} -flto=thin -fwhole-program-vtables&quot;)\nset (CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO &quot;${CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO} -flto=thin -fwhole-program-vtables&quot;)\nelseif (ENABLE_THINLTO)\nmessage (${RECONFIGURE_MESSAGE_LEVEL} &quot;Cannot enable ThinLTO&quot;)\nendif ()\n\nelseif (ENABLE_THINLTO)\nmessage (${RECONFIGURE_MESSAGE_LEVEL} &quot;ThinLTO is only available with Clang&quot;)\nendif ()\n\n# Turns on all external libs like s3, kafka, ODBC, ...\noption(ENABLE_LIBRARIES &quot;Enable all external libraries by default&quot; ON)\n\n# Increase stack size on Musl. We need big stack for our recursive-descend parser.\nif (USE_MUSL)\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -Wl,-z,stack-size=2097152&quot;)\nendif ()\n\ninclude(cmake/dbms_glob_sources.cmake)\n\nadd_library(global-group INTERFACE)\nif (OS_LINUX OR OS_ANDROID)\ninclude(cmake/linux/default_libs.cmake)\nelseif (OS_DARWIN)\ninclude(cmake/darwin/default_libs.cmake)\nelseif (OS_FREEBSD)\ninclude(cmake/freebsd/default_libs.cmake)\nendif ()\nlink_libraries(global-group)\n\nif (NOT (OS_LINUX OR OS_DARWIN))\n# Using system libs can cause a lot of warnings in includes (on macro expansion).\noption(WERROR &quot;Enable -Werror compiler option&quot; OFF)\nelse ()\noption(WERROR &quot;Enable -Werror compiler option&quot; ON)\nendif ()\n\nif (WERROR)\n# Don't pollute CMAKE_CXX_FLAGS with -Werror as it will break some CMake checks.\n# Instead, adopt modern cmake usage requirement.\ntarget_compile_options(global-group INTERFACE &quot;-Werror&quot;)\nendif ()\n\n# Make this extra-checks for correct library dependencies.\nif (OS_LINUX AND NOT SANITIZE)\ntarget_link_options(global-group INTERFACE &quot;LINKER:--no-undefined&quot;)\nendif ()\n\n######################################\n### Add targets below this comment ###\n######################################\n\nset (CMAKE_POSTFIX_VARIABLE &quot;CMAKE_${CMAKE_BUILD_TYPE_UC}_POSTFIX&quot;)\n\nif (USE_STATIC_LIBRARIES)\nset (CMAKE_POSITION_INDEPENDENT_CODE OFF)\nif (OS_LINUX AND NOT ARCH_AARCH64)\n# Slightly more efficient code can be generated\n# It's disabled for ARM because otherwise ClickHouse cannot run on Android.\nset (CMAKE_CXX_FLAGS_RELWITHDEBINFO &quot;${CMAKE_CXX_FLAGS_RELWITHDEBINFO} &quot;)\nset (CMAKE_C_FLAGS_RELWITHDEBINFO &quot;${CMAKE_C_FLAGS_RELWITHDEBINFO} &quot;)\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} &quot;)\nendif ()\nelse ()\nset (CMAKE_POSITION_INDEPENDENT_CODE ON)\n# This is required for clang on Arch linux, that uses PIE by default.\n# See enable-SSP-and-PIE-by-default.patch [1].\n#\n# [1]: https://github.com/archlinux/svntogit-packages/blob/6e681aa860e65ad46a1387081482eb875c2200f2/trunk/enable-SSP-and-PIE-by-default.patch\nset (CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} &quot;)\nendif ()\n\nif (ENABLE_TESTS)\nmessage (STATUS &quot;Unit tests are enabled&quot;)\nelse()\nmessage(STATUS &quot;Unit tests are disabled&quot;)\nendif ()\n\nenable_testing() # Enable for tests without binary\n\n# when installing to /usr - place configs to /etc but for /usr/local place to /usr/local/etc\nif (CMAKE_INSTALL_PREFIX STREQUAL &quot;/usr&quot;)\nset (CLICKHOUSE_ETC_DIR &quot;/etc&quot;)\nelse ()\nset (CLICKHOUSE_ETC_DIR &quot;${CMAKE_INSTALL_PREFIX}/etc&quot;)\nendif ()\n\nmessage (STATUS\n&quot;Building for: ${CMAKE_SYSTEM} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_LIBRARY_ARCHITECTURE} ;\nUSE_STATIC_LIBRARIES=${USE_STATIC_LIBRARIES}\nSPLIT_SHARED_LIBRARIES=${SPLIT_SHARED_LIBRARIES}&quot;)\n\ninclude (GNUInstallDirs)\n\n# When testing for memory leaks with Valgrind, don't link tcmalloc or jemalloc.\n\nif (TARGET global-group)\ninstall (EXPORT global DESTINATION cmake)\nendif ()\n\nadd_subdirectory (contrib EXCLUDE_FROM_ALL)\n\nif (NOT ENABLE_JEMALLOC)\nmessage (WARNING &quot;Non default allocator is disabled. This is not recommended for production builds.&quot;)\nendif ()\n\nmacro (clickhouse_add_executable target)\n# invoke built-in add_executable\n# explicitly acquire and interpose malloc symbols by clickhouse_malloc\n# if GLIBC_COMPATIBILITY is ON and ENABLE_THINLTO is on than provide memcpy symbol explicitly to neutrialize thinlto's libcall generation.\nif (ARCH_AMD64 AND GLIBC_COMPATIBILITY AND ENABLE_THINLTO)\nadd_executable (${ARGV} $&lt;TARGET_OBJECTS:clickhouse_malloc&gt; $&lt;TARGET_OBJECTS:memcpy&gt;)\nelse ()\nadd_executable (${ARGV} $&lt;TARGET_OBJECTS:clickhouse_malloc&gt;)\nendif ()\n\nget_target_property (type ${target} TYPE)\nif (${type} STREQUAL EXECUTABLE)\n# disabled for TSAN and gcc since libtsan.a provides overrides too\nif (TARGET clickhouse_new_delete)\n# operator::new/delete for executables (MemoryTracker stuff)\ntarget_link_libraries (${target} PRIVATE clickhouse_new_delete)\nendif()\n\n# In case of static jemalloc, because zone_register() is located in zone.c and\n# is never used outside (it is declared as constructor) it is omitted\n# by the linker, and so jemalloc will not be registered as system\n# allocator under osx [1], and clickhouse will SIGSEGV.\n#\n# [1]: https://github.com/jemalloc/jemalloc/issues/708\n#\n# About symbol name:\n# - _zone_register not zone_register due to Mach-O binary format,\n# - _je_zone_register due to JEMALLOC_PRIVATE_NAMESPACE=je_ under OS X.\n# - but jemalloc-cmake does not run private_namespace.sh\n# so symbol name should be _zone_register\nif (ENABLE_JEMALLOC AND USE_STATIC_LIBRARIES AND OS_DARWIN)\nset_property(TARGET ${target} APPEND PROPERTY LINK_OPTIONS -u_zone_register)\nendif()\nendif()\nendmacro()\n\n# With cross-compiling, all targets are built for the target platform which usually different from the host\n# platform. This is problematic if a build artifact X (e.g. a file or an executable) is generated by running\n# another executable Y previously produced in the build. This is solved by compiling and running Y for/on\n# the host platform. Add target to the list:\n# add_native_target(&lt;target&gt; ...)\nset_property (GLOBAL PROPERTY NATIVE_BUILD_TARGETS)\nfunction (add_native_target)\nset_property (GLOBAL APPEND PROPERTY NATIVE_BUILD_TARGETS ${ARGV})\nendfunction (add_native_target)\n\nset(ConfigIncludePath ${CMAKE_CURRENT_BINARY_DIR}/includes/configs CACHE INTERNAL &quot;Path to generated configuration files.&quot;)\ninclude_directories(${ConfigIncludePath})\n\n# Add as many warnings as possible for our own code.\ninclude (cmake/warnings.cmake)\ninclude (cmake/print_flags.cmake)\n\nadd_subdirectory (base)\nadd_subdirectory (src)\nadd_subdirectory (programs)\nadd_subdirectory (tests)\nadd_subdirectory (utils)\n\ninclude (cmake/sanitize_target_link_libraries.cmake)\n\n# Build native targets if necessary\nget_property(NATIVE_BUILD_TARGETS GLOBAL PROPERTY NATIVE_BUILD_TARGETS)\nif (NATIVE_BUILD_TARGETS\nAND NOT(\nCMAKE_HOST_SYSTEM_NAME STREQUAL CMAKE_SYSTEM_NAME\nAND CMAKE_HOST_SYSTEM_PROCESSOR STREQUAL CMAKE_SYSTEM_PROCESSOR\n)\n)\nmessage (STATUS &quot;Building native targets...&quot;)\n\nset (NATIVE_BUILD_DIR &quot;${CMAKE_BINARY_DIR}/native&quot;)\n\nexecute_process(\nCOMMAND ${CMAKE_COMMAND} -E make_directory &quot;${NATIVE_BUILD_DIR}&quot;\nCOMMAND_ECHO STDOUT)\n\nexecute_process(\nCOMMAND ${CMAKE_COMMAND}\n&quot;-DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}&quot;\n&quot;-DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}&quot;\n${CMAKE_SOURCE_DIR}\nWORKING_DIRECTORY &quot;${NATIVE_BUILD_DIR}&quot;\nCOMMAND_ECHO STDOUT)\n\nexecute_process(\nCOMMAND ${CMAKE_COMMAND} --build &quot;${NATIVE_BUILD_DIR}&quot; --target ${NATIVE_BUILD_TARGETS}\nCOMMAND_ECHO STDOUT)\nendif ()\n\noption(ENABLE_PBKDF2 &quot;Enable PBKDF2&quot; 0)\n\nif (ENABLE_PBKDF2)\nadd_definitions(-DENABLE_PBKDF2=1)\nendif()\n\noption(DISABLE_HTTP &quot;Disable HTTP Protocl&quot; 0)\n\nif (DISABLE_HTTP)\nadd_definitions(-DISABLE_HTTP=1)\nendif()\n\noption(DISABLE_MEMCPY &quot;Disable memcpy_jart&quot; 0)\n\nif (DISABLE_MEMCPY)\nadd_definitions(-DISABLE_MEMCPY=1)\nendif()\n\n我们从一个简单的CMakeLists.txt开始：\ncmake_minimum_required(VERSION 3.20)\nproject(GREDialing VERSION 0.1)\n\nmessage(STATUS &quot;CMake version: &quot; ${CMAKE_VERSION})\nif(NOT ${CMAKE_VERSION} VERSION_LESS &quot;3.2&quot;)\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nelse()\nmessage(STATUS &quot;Checking compiler flags for C++11 support.&quot;)\n# Set C++11 support flags for various compilers\ninclude(CheckCXXCompilerFlag)\ncheck_cxx_compiler_flag(&quot;-std=c++11&quot; COMPILER_SUPPORTS_CXX11)\ncheck_cxx_compiler_flag(&quot;-std=c++0x&quot; COMPILER_SUPPORTS_CXX0X)\nif(COMPILER_SUPPORTS_CXX11)\nmessage(STATUS &quot;C++11 is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11 -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11&quot;)\nendif()\nelseif(COMPILER_SUPPORTS_CXX0X)\nmessage(STATUS &quot;C++0x is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x&quot;)\nendif()\nelse()\nmessage(STATUS &quot;The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.&quot;)\nendif()\nendif()\n\n# 禁止 C++ assert terminate 程序\n# add_definitions(-DNDEBUG)\n\n# ASIO 不使用 Boost 库\n#add_definitions(-DASIO_STANDALONE)\n\n# Spdlog 使用外部 Fmt 库\n#add_definitions(-DSPDLOG_FMT_EXTERNAL)\n\n# Jwt-cpp 使用外部 Json 库\n# ADD_DEFINITIONS(-DJWT_CPP_JSON_EXTERNAL)\n\n# add_definitions(-DGLOG_ON)\n\n# 生成编译命令文件，给 YCM/Clangd 使用\nset(CMAKE_EXPORT_COMPILE_COMMANDS ON)\n\nADD_COMPILE_OPTIONS(-g)\n\n#设置输出目录\n# set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)\n\n#加入包含目录\n# include_directories(${CMAKE_CURRENT_SOURCE_DIR}/service/src/main/cpp/decryptSDK/include)\ninclude_directories(decryptSDK/include)\ninclude_directories(/home/hubingbing/rapidjson/include)\ninclude_directories(/home/hubingbing/concurrentqueue)\n# include_directories(/opt/Euler_compile_env/usr/src/kernels/4.19.90-vhulk2107.1.0.h699.eulerosv2r10.aarch64/include)\n\n#静态库目录\n#link_directories(/usr/lib64/mysql)\n\n#logger lib\n#add_subdirectory(decryptSDK)\n\n# aux_source_directory(decryptSDK SRCS) #加入目录下所有源码\n# add_executable(demo ${SRCS}) #生成可执行文件\n# target_link_libraries(demo logger) #链接logger库\n\nset(EXECUTABLE_OUTPUT_PATH &quot;${CMAKE_CURRENT_SOURCE_DIR}/build&quot;)\nmessage(STATUS &quot;binary dir is ${EXECUTABLE_OUTPUT_PATH}&quot;)\n\nset(BUILD_SCRATCH_TARGET 0)\n\nif(BUILD_SCRATCH_TARGET)\nfile(GLOB_RECURSE scratch_srcs scratch/*.cpp)\n# message(STATUS &quot;all scratchs: ${scratch_srcs}&quot;)\nforeach(srcfile IN LISTS scratch_srcs)\n# Get file name without directory\nget_filename_component(elfname ${srcfile} NAME_WE)\nmessage(STATUS &quot;${elfname} .. ${srcfile}&quot;)\nadd_executable(${elfname} ${srcfile})\ntarget_link_libraries(${elfname} pthread)\nendforeach()\nendif()\n\n# add_executable(main ../main.cpp)\n# add_executable(server udp_server.cpp)\n# add_executable(ConfigReader ConfigReader.cpp)\n# add_executable(packet_handler packet_handler.cpp)\n\nset(BUILD_MAIN_TARGET 1)\n\nif(BUILD_MAIN_TARGET)\nset(target main)\n\nset(src_lst main.cpp ConfigReader.cpp packet_handler.cpp SslClient.cpp packet.cpp)\nadd_executable(${target} ${src_lst})\n\naux_source_directory(decryptSDK KMC_DIR)\ntarget_sources(${target} PRIVATE ${KMC_DIR})\ntarget_include_directories(${target} PRIVATE /home/hubingbing/cloud-frame-kmc/include/)\ntarget_link_directories(${target} PRIVATE /home/hubingbing/cloud-frame-kmc/lib_so/)\ntarget_link_libraries(${target} kmcjni)\n\ntarget_link_libraries(${target} ssl crypto pthread)\nendif()\n# target_link_libraries(debug pthread)\n# target_link_libraries(server pthread)\n\n上面的cmake也不算太简单，我们再简化一下：\ncmake_minimum_required(VERSION 3.20)\nproject(GREDialing VERSION 0.1)\n\nmessage(STATUS &quot;CMake version: &quot; ${CMAKE_VERSION})\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\n# 生成编译命令文件，给 YCM/Clangd 使用\nset(CMAKE_EXPORT_COMPILE_COMMANDS ON)\n\n# 附加调试信息\nADD_COMPILE_OPTIONS(-g)\n\n#加入包含目录\ninclude_directories(decryptSDK/include)\ninclude_directories(/home/yychi/rapidjson/include)\ninclude_directories(/home/yychi/concurrentqueue)\n\n# 加入./decryptSDK目录下所有源码并赋到SRCS变量中\n# 后续可用$SRCS使用该变量\naux_source_directory(decryptSDK SRCS)\nadd_executable(demo ${SRCS}) #生成可执行文件\ntarget_link_libraries(demo logger) #链接logger库\n\nset(EXECUTABLE_OUTPUT_PATH &quot;${CMAKE_CURRENT_SOURCE_DIR}/build&quot;)\nmessage(STATUS &quot;binary dir is ${EXECUTABLE_OUTPUT_PATH}&quot;)\n\nset(BUILD_SCRATCH_TARGET 0)\nif(BUILD_SCRATCH_TARGET)\n# 递归找到./scratch目录下所有cpp文件，赋值给scratch_srcs变量\nfile(GLOB_RECURSE scratch_srcs scratch/*.cpp)\n# message(STATUS &quot;all scratchs: ${scratch_srcs}&quot;)\nforeach(srcfile IN LISTS scratch_srcs)\n# Get file name without directory\nget_filename_component(elfname ${srcfile} NAME_WE)\nmessage(STATUS &quot;${elfname} .. ${srcfile}&quot;)\nadd_executable(${elfname} ${srcfile})\ntarget_link_libraries(${elfname} pthread)\nendforeach()\nendif()\n\nset(BUILD_MAIN_TARGET 1)\nif(BUILD_MAIN_TARGET)\nset(target main)\n\nset(src_lst main.cpp a.cpp b.cpp c.cpp d.cpp)\nadd_executable(${target} ${src_lst})\n\naux_source_directory(decryptSDK descrypt_srcs)\n# 为target增加要编译的源文件\ntarget_sources(${target} PRIVATE ${descrypt_srcs})\n# 为target增加include目录\ntarget_include_directories(${target} PRIVATE /home/yychi/cloud/include/)\n# 为target增加动态库/静态库搜索路径\ntarget_link_directories(${target} PRIVATE /home/yychi/frame/lib_so/)\n# 为target链接库文件\ntarget_link_libraries(${target} ssl crypto pthread)\nendif()\n\n通常的，一个CMakeLists.txt中必须包含至少一个target，target可以是动态库/静态库/可执行文件。当定义了target之后，推荐使用\n\ntarget_sources\ntarget_include_directories\ntarget_link_directories\ntarget_link_options\ntarget_link_libraries\ntarget_compile_options\ntarget_compile_definitions\ntarget_compile_features\n\n而非\n\ninclude_directories\nlink_directories\nadd_compile_options\nadd_link_options\n\n等全局函数。\n变量\nset(&lt;variable&gt; &lt;value&gt;) # set value to variable\n${variable} # take the value of variable\n\n[!note]\nCMake语言不区分大小写，但是参数区分大小写。\n\nReferences\n\nCMake 完整使用教程 之二 从可执行文件到库",
		"tags": ["add_definitions", "add_definitions", "设置输出目录", "加入包含目录", "静态库目录", "link_directories", "logger", "add_subdirectory", "加入目录下所有源码", "生成可执行文件", "链接logger库", "加入包含目录", "生成可执行文件", "链接logger库", "note","cmake"]
},

{
		"title": 202304231411,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304231411 name mangling/",
		"content": "Name mangling is the encoding of function and variable names into unique names so that linkers can separate common names in the language.\n\nName mangling实际上是对函数（或者变量）名称的一种编码，c++支持函数重载，而c不支持。所以c++的函数签名的编码方式肯定是和c不一样的，举个例子：\nint foo(int a); // foo\n\nint foo(int a); // foo(int)\nint foo(float a); // foo(float)\n\n也可以理解为，函数原型经过编码之后得到的唯一id，暴露给linker用的。linker根据这个名字去查找、链接相应的函数地址。\n同样一段c代码，用c compiler和c++ compiler编出来的函数&amp;变量名称是不一样的。c++的通常会复杂一些，包含namespace，class，形参类型列表等。当使用c++ compiler且不想要上述mangling的时候，可以使用：\nextern &quot;C&quot; {\n\tint foo(int a);\n\tvoid bar(int b);\n}\n\n来告诉编译器这些名字不要进行name mangle. 这在c调用c++方法时尤其有用。\n场景一：C调用C++\nC++头文件中提供函数声明，C的源文件中需要包含这个头文件，并使用这个函数。\n// file: cpp.h\n\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n\nint foo(float);\n\n#ifdef __cplusplus\n}\n#endif\n\n// file: c.c\n\n#include &quot;cpp.h&quot;\n\nint main()\n{\nint a = foo(3.14f);\nreturn 0;\n}\n\n使用gcc编译c.c，头文件中的__cplusplus宏处于未定义状态，int foo(float)，foo的函数原型不会进行name mangling，直接就是foo. 因此cpp.h可以用于C项目中。\n使用g++编译其他cpp文件，包含cpp.h，此时__cplusplus宏处于定义状态，extern C的效果产生，即告诉g++不要给int foo(float)进行name mangling，此时编译出的符号，也可以直接用于C++项目，也可以编出lib给C项目使用。\n场景二：C++调C\nC中实现了某些函数，在某个头文件中声明了这些函数。例如\n// file: c.h\n\n#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n\nint foo();\nchar bar(char);\n\n#ifdef __cplusplus\n}\n#endif\n\n这里的__cplusplus宏，在原生C项目中（gcc编译）处于未定义状态，压根不起作用。但在C++项目（g++编译）中，如果包含了这个头文件，读到了__cplusplus宏，就不会对foo和bar进行name mangling，因此，C++链接器在寻找这个符号时，能够正确找到此前用gcc生成的未进行name mangling的符号。\n\nc.h中的函数实现，必然在某个C源文件中。因此一般使用gcc编译产生lib. C++要用这个lib，要能找到这个符号，就必须按之前C语言的符号生成规则（不进行name mangling）来寻找（链接）。\n\nYou will need extern &quot;C&quot; both when calling:\n\nC from C++: tell g++ to expect unmangled symbols produced by gcc,\nC++ from C: tell g++ to generate unmangled symbols for gcc to use.\n\nSee also 链接\nReferences\n\nName mangling (C++ only)\nStability of the C++ ABI: Evolution of a Programming Language\nWhat is the effect of extern &quot;C&quot; in C++?",
		"tags": ["ifdef", "endif", "ifdef", "endif", "include", "ifdef", "endif", "ifdef", "endif", "note","cpp","name-mangling"]
},

{
		"title": 202304231659,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304231659 firefox伪装chrome ua/",
		"content": "许多网站强制建议使用chrome打开，但其实firefox能够完美渲染该页面。所以需要强制更改firefox的ua伪装chrome：\n\nfirefox输入about:config\n搜索general.useragent.override，没有则新建之，值类型为字符串\n打开chrome看下它的ua，输入about:version，或者直接使用 Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36\n复制chrome的ua到新建的值中\n\nsee: https://sspai.com/post/75349",
		"tags": [ "note","firefox","chrome","browser","ua","useragent"]
},

{
		"title": 202304241826,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304241826 RTTI in cpp/",
		"content": "RTTI stands for RunTime Type Identification. Commonly two ways to achieve it.\nDynamic cast\nclass Base {};\nclass Derived : public Base {};\n\nvoid foo(Base* b)\n{\nDerived* d = dynamic_cast&lt;Derived*&gt;(b);\nif (d != nullptr)\n{\n// b is actually points to a Derived object.\n}\n}\n\nTypeid\ntypeid is a operator in c++, which gives the type_info struct to the given type. See more in cppreference.\nSummary\nDynamic cast needs to work in polymorphic. Once use RTTI, every type will contain a extra info struct type_info.\n\nPass the -fno-rtti to the compiler to disable this, i.e., RTTI incurs extra cost.\nSee also 继承.",
		"tags": [ "note","rtti","dynamic-cast","cpp","typeid"]
},

{
		"title": 202304281707,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202304281707-右值引用/",
		"content": "右值就是没有确切地址可供访问\n闭包：一个函数携带自身数据，就成为闭包，可以去cppinsight里看看lambda表达式的实现",
		"tags": [ "note","cpp","rvalue","右值"]
},

{
		"title": 202305080906,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305080906 Redis数据库连接/",
		"content": "每个微服务每套环境的数据库都是互相独立的。例如连接UniNetworkResourceService的redis数据库，可在管理面查看相关信息：\n\n登录相应机器，找到数据库配置：\ncat /opt/oss/manager/var/tenants/FabricInsight/containerlist.json | grep -A 8 &quot;nrservicerdb&quot;\n\n将上述dbUserPasswd替换到下面的代码中，解出密码明文：\nsu - ossadm -c &quot;source /opt/oss/manager/bin/engr_profile.sh;python -c \\&quot;from util import ossext;plainText=ossext.Cipher.decrypt('AAAAHgAAAAAAAADxBV7EpwAAAAkWajKquyo7T3WGvR+lO0+ePKMvCqnSnwRHbyGIAAAAAAEAAAEAAAAAAAAAIOqJ1ECwyimR01f/DUNZ15NB6JEn9ZBp7TiOoPBkPdAq');print(plainText)\\&quot;&quot;\n\n用上面获取到的密码，登录redis，\ncd /opt/redis/bin\n./redis-cli -h &lt;ip&gt; -p &lt;port&gt; -cipherdir /opt/redis/etc/cipher/1 -a nrservicerdb@ossdbuser@&lt;password&gt;\n\n# 例如\n./redis-cli -h 10.136.242.106 -p 26688 -cipherdir /opt/redis/etc/cipher/1 -a nrservicerdb@ossdbuser@07~}*0R}yN_1h#/a\n\n另外，项目代码中也有封装好的操作redis的接口，搜索RedisUtil即可。\nRedis教程参考：http://3ms.huawei.com/km/groups/2027333/blogs/details/13304815",
		"tags": [ "note","work","hw"]
},

{
		"title": 202305091937,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305091937枚举/",
		"content": "C++中有两种枚举，\n\n普通枚举（enum，unscoped enum）\n枚举类（enum class, scoped enum）\n\n通常，花括号里面的名字具有scope的作用域及可见性，但对普通枚举并非如此。普通枚举中定义的枚举常量，在花括号外也可见。而枚举类则需要加上类名+域作用符来获取花括号内的名字。\nenum Color { RED = 1, GREEN, BLUE, };\nenum class CMYK { C = -1, M = 0, Y = 2, K, };\nenum NewColor: uint8_t { NR = 0, NG, NB };\n\nvoid foo()\n{\nColor c = RED;\nCMYK cmyk = CMYK::C; // Note: scope is need here\nNewColor nc = NB;\ncout &lt;&lt; sizeof c &lt;&lt; endl; // 4\ncout &lt;&lt; sizeof(cmyk) &lt;&lt; endl; // 4\ncout &lt;&lt; sizeof(NewColor) &lt;&lt; endl; // 1\n}\n\n此外，enum class不允许隐式转换为整数，意味着你需要显式转换，也就是说enum class具有更强的类型。",
		"tags": [ "note","enum","enum_class","cpp"]
},

{
		"title": 202305160951,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305160951初始化列表/",
		"content": "初始化列表是轻量级的对象，用于传参是无需使用引用，可以理解为传int这种参数，无需考虑拷贝开销。此外，初始化列表中传入的视为常量，不允许修改。",
		"tags": [ "note","cpp","initializer_list"]
},

{
		"title": 202305161028,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305161028内存模型/",
		"content": "为什么需要内存模型\n编译器会优化代码，会在不影响正确结果的前提下，调整代码执行顺序，此外cpu也会乱序执行，提高效率。所以，你的代码跑起来未必是按照你写的顺序执行的。这在单线程环境下毫无问题，一旦进入多线程，这种乱序会带来不可预期的结果。\n因此，我们需要一种方式来（向底层：编译器）控制，告诉，声明我这段代码必须要按顺序执行。内存模型应运而生。\n此外，还有\n\n[!NOTE] Cache coherency\n现代cpu拥有多级cache，其中cache是有访问权限的。有些cahce中的数据只能被一个核心看到，这在多线程访问数据时就会出现很大的问题。\n\n例如：\n.container {font-family: sans-serif; text-align: center;} .button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;} .excalidraw .App-menu_top .buttonList { display: flex;} .excalidraw-wrapper { height: 800px; margin: 50px; position: relative;} :root[dir=\"ltr\"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;} (function(){const InitialData={\"type\":\"excalidraw\",\"version\":2,\"source\":\"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.7.1\",\"elements\":[{\"type\":\"rectangle\",\"version\":263,\"versionNonce\":1597686196,\"isDeleted\":false,\"id\":\"2obJnozdgySbJp3sxTH4M\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-140,\"y\":-100,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":217,\"height\":113,\"seed\":270569298,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"EZFJ5cmz\"},{\"id\":\"Zr7-kRtDOsCzCFMZwOs4t\",\"type\":\"arrow\"}],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"index\":\"a0\",\"frameId\":null},{\"type\":\"text\",\"version\":219,\"versionNonce\":1477600140,\"isDeleted\":false,\"id\":\"EZFJ5cmz\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-81.14994812011719,\"y\":-95,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":99.29989624023438,\"height\":25,\"seed\":1358882032,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"CPU Core1\",\"rawText\":\"CPU Core1\",\"textAlign\":\"center\",\"verticalAlign\":\"top\",\"containerId\":\"2obJnozdgySbJp3sxTH4M\",\"originalText\":\"CPU Core1\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a1\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":384,\"versionNonce\":861956916,\"isDeleted\":false,\"id\":\"GgZCPi-Ftl_nRy9voleLb\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-180,\"y\":100,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":599,\"height\":40,\"seed\":2008470802,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"jbCW04Au\"},{\"id\":\"Zr7-kRtDOsCzCFMZwOs4t\",\"type\":\"arrow\"},{\"id\":\"qK2BSuTEqi8ZAs2thpmmC\",\"type\":\"arrow\"}],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"index\":\"a2\",\"frameId\":null},{\"type\":\"text\",\"version\":310,\"versionNonce\":26612236,\"isDeleted\":false,\"id\":\"jbCW04Au\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":86.030029296875,\"y\":107.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":66.93994140625,\"height\":25,\"seed\":824167440,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"memory\",\"rawText\":\"memory\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"GgZCPi-Ftl_nRy9voleLb\",\"originalText\":\"memory\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a3\",\"frameId\":null},{\"type\":\"arrow\",\"version\":2370,\"versionNonce\":1071041972,\"isDeleted\":false,\"id\":\"Zr7-kRtDOsCzCFMZwOs4t\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-47.573292149938375,\"y\":15.179783950617292,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":1.7237290650041075,\"height\":82.42245370370368,\"seed\":670982866,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1734707177399,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"2obJnozdgySbJp3sxTH4M\",\"gap\":2.1797839506172885,\"focus\":0.13591943458454825},\"endBinding\":{\"elementId\":\"GgZCPi-Ftl_nRy9voleLb\",\"gap\":2.3977623456790145,\"focus\":-0.56437187063031},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[-1.7237290650041075,82.42245370370368]],\"index\":\"a4\",\"frameId\":null},{\"type\":\"arrow\",\"version\":2605,\"versionNonce\":840822964,\"isDeleted\":false,\"id\":\"qK2BSuTEqi8ZAs2thpmmC\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":260.03372492207217,\"y\":16.22222222222223,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":0.21795372114019074,\"height\":80.9189814814815,\"seed\":193869970,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1734707177401,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"74zfclxf7kyjGoTB4x5Jn\",\"gap\":2.2222222222222223,\"focus\":0.07938802468499777},\"endBinding\":{\"elementId\":\"GgZCPi-Ftl_nRy9voleLb\",\"gap\":2.858796296296296,\"focus\":0.4700791974583939},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[0.21795372114019074,80.9189814814815]],\"index\":\"a5\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":239,\"versionNonce\":855518772,\"isDeleted\":false,\"id\":\"i_emLgJ9-b3uXTpLd63N6\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-122.25,\"y\":-58.15625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#ced4da\",\"width\":178,\"height\":60,\"seed\":572347986,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"XzB00LSM\"}],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"index\":\"a6\",\"frameId\":null},{\"type\":\"text\",\"version\":177,\"versionNonce\":636092172,\"isDeleted\":false,\"id\":\"XzB00LSM\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-113.70991516113281,\"y\":-40.65625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":160.91983032226562,\"height\":25,\"seed\":516788434,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"cache: A=1; B=0;\",\"rawText\":\"cache: A=1; B=0;\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"i_emLgJ9-b3uXTpLd63N6\",\"originalText\":\"cache: A=1; B=0;\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a7\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":377,\"versionNonce\":84035508,\"isDeleted\":false,\"id\":\"74zfclxf7kyjGoTB4x5Jn\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":160,\"y\":-100,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":217,\"height\":114,\"seed\":1552071698,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"x8CFQFy4\"},{\"id\":\"qK2BSuTEqi8ZAs2thpmmC\",\"type\":\"arrow\"}],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"index\":\"a8\",\"frameId\":null},{\"type\":\"text\",\"version\":351,\"versionNonce\":2028879244,\"isDeleted\":false,\"id\":\"x8CFQFy4\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":214.44005584716797,\"y\":-95,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":108.11988830566406,\"height\":25,\"seed\":2025155026,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"CPU Core2\",\"rawText\":\"CPU Core2\",\"textAlign\":\"center\",\"verticalAlign\":\"top\",\"containerId\":\"74zfclxf7kyjGoTB4x5Jn\",\"originalText\":\"CPU Core2\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a9\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":332,\"versionNonce\":38220084,\"isDeleted\":false,\"id\":\"EwK9n6v89S-EJfbMWgdz3\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":172.75,\"y\":-56.15625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#ced4da\",\"width\":182,\"height\":60,\"seed\":1573674898,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"s8nU81Eq\"}],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"index\":\"aA\",\"frameId\":null},{\"type\":\"text\",\"version\":308,\"versionNonce\":233221132,\"isDeleted\":false,\"id\":\"s8nU81Eq\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":178.88008880615234,\"y\":-38.65625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":169.7398223876953,\"height\":25,\"seed\":2013175122,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"cache: A=0; B=2;\",\"rawText\":\"cache: A=0; B=2;\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"EwK9n6v89S-EJfbMWgdz3\",\"originalText\":\"cache: A=0; B=2;\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aB\",\"frameId\":null},{\"type\":\"text\",\"version\":178,\"versionNonce\":707979956,\"isDeleted\":false,\"id\":\"GMcQpra9\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":480,\"y\":-80,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#ced4da\",\"width\":129.90625,\"height\":216,\"seed\":346235666,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734707177209,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":3,\"text\":\"A=0; B=0;\\n\\n// thread 1\\nA = 1;\\nprint(B);\\n\\n// thread 2\\nB = 2;\\nprint(A);\",\"rawText\":\"A=0; B=0;\\n\\n// thread 1\\nA = 1;\\nprint(B);\\n\\n// thread 2\\nB = 2;\\nprint(A);\",\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"containerId\":null,\"originalText\":\"A=0; B=0;\\n\\n// thread 1\\nA = 1;\\nprint(B);\\n\\n// thread 2\\nB = 2;\\nprint(A);\",\"lineHeight\":1.2,\"baseline\":211,\"autoResize\":true,\"index\":\"aC\",\"frameId\":null}],\"appState\":{\"theme\":\"light\",\"viewBackgroundColor\":\"#ffffff\",\"currentItemStrokeColor\":\"#000000\",\"currentItemBackgroundColor\":\"#ced4da\",\"currentItemFillStyle\":\"hachure\",\"currentItemStrokeWidth\":1,\"currentItemStrokeStyle\":\"solid\",\"currentItemRoughness\":1,\"currentItemOpacity\":100,\"currentItemFontFamily\":3,\"currentItemFontSize\":20,\"currentItemTextAlign\":\"left\",\"currentItemStartArrowhead\":null,\"currentItemEndArrowhead\":\"arrow\",\"currentItemArrowType\":\"round\",\"scrollX\":200.78694331029976,\"scrollY\":308.3649997486985,\"zoom\":{\"value\":1},\"currentItemRoundness\":\"round\",\"gridSize\":20,\"gridStep\":5,\"gridModeEnabled\":true,\"gridColor\":{\"Bold\":\"rgba(217, 217, 217, 0.5)\",\"Regular\":\"rgba(230, 230, 230, 0.5)\"},\"colorPalette\":{},\"currentStrokeOptions\":null,\"frameRendering\":{\"enabled\":true,\"clip\":true,\"name\":true,\"outline\":true},\"objectsSnapModeEnabled\":false,\"activeTool\":{\"type\":\"selection\",\"customType\":null,\"locked\":false,\"lastActiveTool\":null}},\"files\":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener(\"resize\",e),()=>window.removeEventListener(\"resize\",e)},[t]),React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"excalidraw-wrapper\",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById(\"cache-coherencyexcalidraw.md1\");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();\n正常理解，无论线程1，2的执行顺序如何，最后不可能出现打印出0，0的情况。但是在这种情况下，如果各自都从缓存中读数据，那就可能出现0，0的情况。这也进一步引出了volatile关键字<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304202149volatile-specifier/\">volatile wiki link</a>。\nSequential Consistency\n顺序一致性，是一致性最严格的内存模型，他有两条要求：\n\n每个处理器的执行顺序和代码的执行顺序一致\n处理器并行执行的结果要和处理器按照某种顺序执行的结果一致\n\nMemory barrier\n即内存栅栏。为什么需要内存栅栏？\n\nmemory_order\n解释\n\nmemory_order_acquire\n所有内存操作必须在我这个load之后\n\nmemory_order_release\n所有内存操作必须在我这个release之前\n\n有两个因素会影响执行顺序：\n\n编译器优化，重排\n处理器乱序\n\nARM 和 Alpha 更为松散\n即使 Intel 处理器仍有乱序\n\n在c++98里，我们没有一种机制能够告诉c++编译器，我们在某个代码块不希望乱序。我们不可能阻止所有乱序，但在多线程同步场合下，我们确实需要保证顺序。\nacquire、release语义\n解决通过单个原子量进行同步的场景。\nacquire指的是，我在这里做了一个原子读操作，我要求在我后面的所有读操作不允许重排到我前面去。\nrelase说的是，我这儿做了个原子写操作，我要求在我前面的写操作不允许重排到我后面去。\n这两个配合使用可以做到两个线程间的同步！假设线程A store an atmoic variable using memory_order_release，线程B load the same atomic variable using memory_order_acquire.\n根据acquire和release的语义，线程A中所有发生在atomic store之前的内存写（包括非原子的和松弛原子【memory_order_relaxed】的），在线程B中将变得可见。也就是说，当线程B atmoic load之后且load到的值确实是线程A写入的那个值，则B能够保证看到everything thread A wrote to memory.\n这个同步仅仅存在于load with acuqire, store with release, on the same atomic variable的任意两个线程之间。其他线程不保证。\nMutual exclusion locks, such as std::mutex or atomic spinlock, are an example of release-acquire synchronization: when the lock is released by thread A and acquired by thread B, everything that took place in the critical section (before the release) in the context of thread A has to be visible to thread B (after the acquire) which is executing the same critical section.\n(function(){const InitialData={\"type\":\"excalidraw\",\"version\":2,\"source\":\"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.7.1\",\"elements\":[{\"id\":\"m_y3yqXpn9gyInpowwCrv\",\"type\":\"rectangle\",\"x\":-420,\"y\":-80,\"width\":340,\"height\":302,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":{\"type\":3},\"seed\":1124802156,\"version\":84,\"versionNonce\":1860841100,\"isDeleted\":false,\"boundElements\":[{\"type\":\"text\",\"id\":\"LsvvuRLU\"}],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"index\":\"a0\",\"frameId\":null},{\"id\":\"LsvvuRLU\",\"type\":\"text\",\"x\":-297.015625,\"y\":-75,\"width\":94.03125,\"height\":24,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":null,\"seed\":72567764,\"version\":69,\"versionNonce\":1862193204,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"text\":\"thread A\",\"rawText\":\"thread A\",\"fontSize\":20,\"fontFamily\":3,\"textAlign\":\"center\",\"verticalAlign\":\"top\",\"baseline\":19,\"containerId\":\"m_y3yqXpn9gyInpowwCrv\",\"originalText\":\"thread A\",\"lineHeight\":1.2,\"autoResize\":true,\"index\":\"a1\",\"frameId\":null},{\"id\":\"EaLfjD5E\",\"type\":\"text\",\"x\":-40,\"y\":-200,\"width\":164.0625,\"height\":24,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":null,\"seed\":693974764,\"version\":46,\"versionNonce\":557612300,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"text\":\"atomic x;\",\"rawText\":\"atomic x;\",\"fontSize\":20,\"fontFamily\":3,\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"baseline\":19,\"containerId\":null,\"originalText\":\"atomic x;\",\"lineHeight\":1.2,\"autoResize\":true,\"index\":\"a2\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":120,\"versionNonce\":2090772916,\"isDeleted\":false,\"id\":\"yL6F1uRJ8rIZzFUZjlI6A\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-20,\"y\":-80,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":520,\"height\":302,\"seed\":1124802156,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"tPg2MLwk\"}],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"index\":\"a3\",\"frameId\":null},{\"type\":\"text\",\"version\":107,\"versionNonce\":557906828,\"isDeleted\":false,\"id\":\"tPg2MLwk\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":192.984375,\"y\":-75,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":94.03125,\"height\":24,\"seed\":72567764,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":3,\"text\":\"thread B\",\"rawText\":\"thread B\",\"textAlign\":\"center\",\"verticalAlign\":\"top\",\"containerId\":\"yL6F1uRJ8rIZzFUZjlI6A\",\"originalText\":\"thread B\",\"lineHeight\":1.2,\"baseline\":19,\"autoResize\":true,\"index\":\"a4\",\"frameId\":null},{\"id\":\"AzajFeco\",\"type\":\"text\",\"x\":-400,\"y\":1.7763568394002505e-15,\"width\":309.375,\"height\":96,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":null,\"seed\":2110611540,\"version\":123,\"versionNonce\":1275548468,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"text\":\"// dome \\n// some \\n// write\\n\\nx.store(23, memory_order_realse);\",\"rawText\":\"// dome \\n// some \\n// write\\n\\nx.store(23, memory_order_realse);\",\"fontSize\":16,\"fontFamily\":3,\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"baseline\":92,\"containerId\":null,\"originalText\":\"// dome \\n// some \\n// write\\n\\nx.store(23, memory_order_realse);\",\"lineHeight\":1.2,\"autoResize\":true,\"index\":\"a5\",\"frameId\":null},{\"id\":\"xwlSwItr\",\"type\":\"text\",\"x\":20,\"y\":20,\"width\":478.125,\"height\":96,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":null,\"seed\":424746732,\"version\":226,\"versionNonce\":1496427020,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"text\":\"if (x.load(memory_order_acquire) == 23) {\\n // at this point, all writes in A\\n // before x.store(23, memory_order_release)\\n // is visible in B.\\n}\",\"rawText\":\"if (x.load(memory_order_acquire) == 23) {\\n // at this point, all writes in A\\n // before x.store(23, memory_order_release)\\n // is visible in B.\\n}\",\"fontSize\":16,\"fontFamily\":3,\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"baseline\":92,\"containerId\":null,\"originalText\":\"if (x.load(memory_order_acquire) == 23) {\\n // at this point, all writes in A\\n // before x.store(23, memory_order_release)\\n // is visible in B.\\n}\",\"lineHeight\":1.2,\"autoResize\":true,\"index\":\"a6\",\"frameId\":null},{\"id\":\"fIrIUYcdWX2t8_vJHSpFl\",\"type\":\"line\",\"x\":-420,\"y\":120,\"width\":340,\"height\":0,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":{\"type\":2},\"seed\":675984212,\"version\":29,\"versionNonce\":1268698292,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"points\":[[0,0],[340,0]],\"lastCommittedPoint\":null,\"startBinding\":null,\"endBinding\":null,\"startArrowhead\":null,\"endArrowhead\":null,\"index\":\"a7\",\"frameId\":null},{\"type\":\"line\",\"version\":44,\"versionNonce\":1544063116,\"isDeleted\":false,\"id\":\"WP-6_Ta-cRa7Lbi-c0xBd\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-419.43526566177604,\"y\":-18.90875959247351,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":340,\"height\":0,\"seed\":675984212,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"startBinding\":null,\"endBinding\":null,\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":null,\"points\":[[0,0],[340,0]],\"index\":\"a8\",\"frameId\":null},{\"id\":\"XEohCeTZdHTX2UqGjYFEJ\",\"type\":\"line\",\"x\":-20,\"y\":40,\"width\":520,\"height\":0,\"angle\":0,\"strokeColor\":\"#873184\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":{\"type\":2},\"seed\":136541420,\"version\":49,\"versionNonce\":755701300,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"points\":[[0,0],[520,0]],\"lastCommittedPoint\":null,\"startBinding\":null,\"endBinding\":null,\"startArrowhead\":null,\"endArrowhead\":null,\"index\":\"a9\",\"frameId\":null},{\"id\":\"1aYgM6dvWJzQwvJ1WFrf6\",\"type\":\"line\",\"x\":-80,\"y\":-20,\"width\":60,\"height\":60,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":{\"type\":2},\"seed\":1711447508,\"version\":17,\"versionNonce\":1300207372,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"points\":[[0,0],[60,60]],\"lastCommittedPoint\":null,\"startBinding\":null,\"endBinding\":null,\"startArrowhead\":null,\"endArrowhead\":null,\"index\":\"aA\",\"frameId\":null},{\"id\":\"kKQUvKDVN8l0MAQGefbNH\",\"type\":\"line\",\"x\":-80.4501079544425,\"y\":120.03893110603094,\"width\":60,\"height\":80,\"angle\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":100,\"groupIds\":[],\"roundness\":{\"type\":2},\"seed\":948879596,\"version\":45,\"versionNonce\":2100441012,\"isDeleted\":false,\"boundElements\":[],\"updated\":1734705933725,\"link\":null,\"locked\":false,\"points\":[[0,0],[60,80]],\"lastCommittedPoint\":null,\"startBinding\":null,\"endBinding\":null,\"startArrowhead\":null,\"endArrowhead\":null,\"index\":\"aB\",\"frameId\":null}],\"appState\":{\"theme\":\"light\",\"viewBackgroundColor\":\"#ffffff\",\"currentItemStrokeColor\":\"#000000\",\"currentItemBackgroundColor\":\"transparent\",\"currentItemFillStyle\":\"hachure\",\"currentItemStrokeWidth\":1,\"currentItemStrokeStyle\":\"dashed\",\"currentItemRoughness\":1,\"currentItemOpacity\":100,\"currentItemFontFamily\":3,\"currentItemFontSize\":16,\"currentItemTextAlign\":\"left\",\"currentItemStartArrowhead\":null,\"currentItemEndArrowhead\":\"arrow\",\"currentItemArrowType\":\"round\",\"scrollX\":444.80592444144565,\"scrollY\":371.93113817471055,\"zoom\":{\"value\":1},\"currentItemRoundness\":\"round\",\"gridSize\":20,\"gridStep\":5,\"gridModeEnabled\":true,\"gridColor\":{\"Bold\":\"rgba(217, 217, 217, 0.5)\",\"Regular\":\"rgba(230, 230, 230, 0.5)\"},\"colorPalette\":{},\"currentStrokeOptions\":null,\"frameRendering\":{\"enabled\":true,\"clip\":true,\"name\":true,\"outline\":true},\"objectsSnapModeEnabled\":false,\"activeTool\":{\"type\":\"selection\",\"customType\":null,\"locked\":false,\"lastActiveTool\":null}},\"files\":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener(\"resize\",e),()=>window.removeEventListener(\"resize\",e)},[t]),React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"excalidraw-wrapper\",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById(\"202305161028内存模型-202306291048excalidraw.md2\");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();\n内存屏障：内核文档",
		"tags": [ "note","cpp","memory-model","memory-order","memory-barrier","内存序"]
},

{
		"title": 202305170944,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305170944callout-user-guide/",
		"content": "This article comes from obsidian sandbox vault. Command palette -&gt; open sandbox vault -&gt; Formatting.Callout\n\nAs of v0.14.0, Obsidian supports callout blocks, sometimes called &quot;admonitions&quot;. Callout blocks are written as a blockquote, inspired by the &quot;alert&quot; syntax from Microsoft Docs.\nCallouts are also be supported natively on Obsidian Publish.\n\n[!NOTE]\nFor compatibility reasons, if you're also using the Admonitions plugin, you should update it to at least v8.0.0 to avoid problems with the new callout system.\n\nUse the following syntax to denote a callout block: &gt; [!INFO].\n&gt; [!INFO]\n&gt; Here's a callout block.\n&gt; It supports **markdown** and <a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">wikilinks</a>.\n\nIt will show up like this:\n\n[!INFO]\nHere's a callout block.\nIt supports markdown and <a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">wikilinks</a>.\n\nTypes\nBy default, there are 12 distinct callout types, each with several aliases. Each type comes with a different background color and icon.\nTo use these default styles, replace INFO in the examples with any of these types. Any unrecognized type will default to the &quot;note&quot; type, unless they are <a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">customized</a>. The type identifier is case insensitive.\n\nnote\nabstract, summary, tldr\ninfo, todo\ntip, hint, important\nsuccess, check, done\nquestion, help, faq\nwarning, caution, attention\nfailure, fail, missing\ndanger, error\nbug\nexample\nquote, cite\n\nTitle and body\nYou can define the title of the callout block, and you can also have a callout without body content.\n&gt; [!TIP] Callouts can have custom titles, which also supports **markdown**!\n\nFolding\nAdditionally, you can create a folding callout by adding + (default expanded) or - (default collapsed) after the block.\n&gt; [!FAQ]- Are callouts foldable?\n&gt; Yes! In a foldable callout, the contents are hidden until it is expanded.\n\nWill show up as:\n\n[!FAQ]- Are callouts foldable?\nYes! In a foldable callout, the contents are hidden until it is expanded.\n\nCustomizations\nSnippets and plugins can define custom callouts, too, or overwrite the default options. Callout types and icons are defined in CSS, where the color is an r, g, b tuple and the icon is the icon ID from any internally supported icon (like lucide-info). Alternatively, you can specify an SVG icon as a string.\n.callout[data-callout=&quot;my-callout-type&quot;] {\n--callout-color: 0, 0, 0;\n--callout-icon: icon-id;\n--callout-icon: '&lt;svg&gt;...custom svg...&lt;/svg&gt;';\n}",
		"tags": [ "note","obsidian","callout","user-guide"]
},

{
		"title": 202305191500,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305191500tcpdump抓包/",
		"content": "tcpdump -i any port 30002 and host 10.136.242.200 -X # 接口不限，指定端口和ip，进行抓包\ntcpdump -i any port 27371 and host 125.7.6.51 -w aa.cap # 将抓包输出写入到aa.cap文件\ntcpdump -i vEth0 # 指定接口为vEth0抓包\n\nfile aa.cap\naa.cap: pcap capture file, microsecond ts (little-endian) - version 2.4 (Ethernet, capture length 262144)",
		"tags": [ "note","tcpdump","抓包"]
},

{
		"title": 202305271514,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305271514sudo安全问题/",
		"content": "sudo安全排查涉及的两个要求：\n\n脚本文件不允许被修改\n文件只能被属主用户执行\n脚本的输入参数需要校验，否则容易被用户拼接注入攻击 --&gt; 可以硬编码写死的直接在脚本里写死，否则一定做校验\n\n高权限用户执行低权限用户的脚本，对于低权限用户来说，就是越权。而这往往难以排查，因为脚本里可能调另一个脚本，或者调其他可执行文件（例如python）而他们的权限",
		"tags": [ "note","hw","sudo","安全"]
},

{
		"title": 202305302345,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305302345/",
		"content": "1. Prime or Not?.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; } .ps-content-wrapper-v0 div.preheader { display: none; } .ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; } .ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; } .ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 code { color: black; } .ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; } .ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; } .ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; } .ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; } .ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; } .ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 table { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; } .ps-content-wrapper-v0 table tbody tr th, .ps-content-wrapper-v0 table tbody tr td { font-weight: bold; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table tbody tr th.description { width: 60%; } .ps-content-wrapper-v0 table tbody tr td { font-weight: normal; white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; } .ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; } .ps-content-wrapper-v0 .left { text-align: left; } .ps-content-wrapper-v0 .right { text-align: right; } .ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; } .ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; } .json-object-array li { float: left; margin-right: 30px; margin-left: 10px; } .json-object-array pre { padding: 4px; margin-left: 0px; }\n\nDetermine whether or not a number is prime and, if it's not prime, find its smallest factor.\nGiven an integer, if the number is prime, return 1. Otherwise return its smallest divisor greater than 1.\n&nbsp;\nExample\nn = 24&nbsp;\n&nbsp;\nThe number 24&nbsp;is not prime: its divisors are [1, 2, 3, 4, 6, 8, 12, 24]. The smallest divisor greater than 1&nbsp;is 2.\n&nbsp;\nFunction Description\nComplete the function isPrime in the editor below.\n&nbsp;\nisPrime has the following parameter(s):\n&nbsp;&nbsp;&nbsp; long n:&nbsp; a long integer to test\nReturns\n&nbsp;&nbsp;&nbsp;&nbsp;int: if the number is prime, return 1; otherwise returns the smallest divisor greater than 1\n&nbsp;\nConstraints\n\n\t2 ≤ n ≤ 1012\n\nInput Format for Custom Testing\n\nInput from stdin will be processed as follows and passed to the function.\n&nbsp;\nThe only line of input contains the long integer to analyze, n.\n&nbsp;\n\nSample Case 0\n\n&nbsp;\nSample Input 0\nSTDIN &nbsp; &nbsp; &nbsp;Function\n----- &nbsp; &nbsp; &nbsp;--------\n2 &nbsp; &nbsp; &nbsp;→ &nbsp; n = 2\n\n&nbsp;\nSample Output 0\n1\n&nbsp;\nExplanation 0\nAs 2 is a prime number, the function returns 1.\n&nbsp;\n\nSample Case 1\n\nSample Input 1\nSTDIN &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Function\n----- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------\n4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ &nbsp;&nbsp;n = 4\n\n&nbsp;\nSample Output 1\n2\n&nbsp;\nExplanation 1\nSince 4 is not a prime number, and the factors of 4 are [1, 2, 4], the function returns the smallest factor of 4 greater than 1.\n\n2. Lottery Coupons.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; }\n.ps-content-wrapper-v0 div.preheader { display: none; }\n.ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; }\n.ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; }\n.ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; }\n.ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 code {color: black; background: transparent; font-weight: normal; font-size: 1em; }\n.ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; }\n.ps-content-wrapper-v0 pre.scrollable-full-json { overflow-x: scroll; white-space: pre; }\n.ps-content-wrapper-v0 pre.scrollable-json { height: 300px; overflow-y: scroll; display: inline-grid; white-space: pre-wrap; padding-left: 8px; padding-right: 8px; padding-top: 4px; padding-bottom: 4px; }\n.ps-content-wrapper-v0 div.equation-parent { width: 400px; text-align: center; border: 1px solid #000; padding: 8px; }\n.ps-content-wrapper-v0 div.equation-parent.equation { width: 100%; display: inline-block; }\n.ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; }\n.ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; }\n.ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; }\n.ps-content-wrapper-v0 details details { padding-left: 8px; padding-right: 8px; }\n.ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; }\n.ps-content-wrapper-v0 details details summary code { color: black; font-weight: bold; padding-left: 2px; padding-right: 2px; padding-top: 4px; padding-right: 4px; margin-left: 4px; }\n.ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; }\n.ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 table { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; }\n.ps-content-wrapper-v0 table.data-table { border: none; border-collapse: collapse; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; }\n.ps-content-wrapper-v0 table tbody { display: block; overflow-x: auto; overflow-y: hidden; }\n.ps-content-wrapper-v0 table tbody tr:first-child th { font-weight: bold; white-space: normal; }\n.ps-content-wrapper-v0 table tbody tr th, .ps-content-wrapper-v0 table tbody tr td { font-weight: normal; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; }\n.ps-content-wrapper-v0 table tbody tr th.description { width: 60%; }\n.ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; }\n.ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; }\n.ps-content-wrapper-v0 .left { text-align: left; }\n.ps-content-wrapper-v0 .right { text-align: right; }\n.ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; }\n.ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; }\n.json-object-array li { float: left; margin-right: 30px; margin-left: 10px; }\n.json-object-array pre { padding: 4px; margin-left: 0px; }\n\nThere is a lottery with n coupons and n people take part in it. Each person picks exactly one coupon. Coupons are numbered consecutively from 1 to n. A lottery winner is any person who owns a coupon where the sum of the digits on the coupon is equal to s. If there are multiple winners, the prize is split equally among them. Determine how many values of s there are where there is at least one winner and the prize is split among the largest group of people.&nbsp;\n&nbsp;\nExample\nn = 12\n&nbsp;\nThe list of coupon numbers generated from 1 to n is [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]. The sums of the digits are [1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 2, 3]. The largest number of winners is 2 which occurs for coupons [1, 10], [2, 11], and [3, 12]. The maximum possible number of winners occurs for any of these 3&nbsp;possible values of s, so 3 is the answer.\n&nbsp;\nFunction Description\nComplete the function lotteryCoupons in the editor.&nbsp;\n&nbsp;\nlotteryCoupons has the following parameter(s):\n&nbsp;&nbsp;&nbsp;&nbsp;int n: the maximum coupon number\n&nbsp;\nReturns\n&nbsp;&nbsp;&nbsp;&nbsp;int:&nbsp;the number of ways to choose s\n&nbsp;\nConstraints\n\n\t1 ≤ n ≤ 104\n\n&nbsp;\n\nInput Format For Custom Testing\n\nThe first line contains an integer, n, the maximum ticket number.\n\nSample Case 0\n\nSample Input\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp; Function\n-----&nbsp;&nbsp;&nbsp;&nbsp; --------\n3 &nbsp;&nbsp;&nbsp;&nbsp; →&nbsp; n = 3\n\n&nbsp;\nSample Output\n3\n&nbsp;\nExplanation\nSince all coupon numbers are different, i.e. (1, 2, 3), there can only be one winner. There are three possible winners.\n\nSample Case 1\n\nSample Input\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp; Function\n-----&nbsp;&nbsp;&nbsp;&nbsp; --------\n11&nbsp;&nbsp;&nbsp;&nbsp; →&nbsp; n = 11\n\n&nbsp;\nSample Output\n2\n&nbsp;\nExplanation\nThe sums of the digits are 1, 2, 3, 4, 5, 6, 7, 8, 9, 1, and 2. Winners have coupons (1, 10) or (2, 11).&nbsp;\n&nbsp;\n\nSample Case 2\n\nSample Input\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp; Function\n-----&nbsp;&nbsp;&nbsp;&nbsp; --------\n22&nbsp;&nbsp;&nbsp;&nbsp; →&nbsp; n = 22\n\nSample Output\n3\nExplanation\nThe lottery coupons are numbered from 1 to 22&nbsp;and the sum of the digits of each of them is 1, 2, 3, 4, 5, 6, 7, 8, 9, 1,&nbsp;2, 3, 4, 5, 6, 7, 8, 9, 10, 2, 3 and 4&nbsp;&nbsp;respectively. There are two ways to choose s:\n\n\tWhen s = 1, winners are 1 and 10.&nbsp;\n\tWhen s = 2, winners are 2, 11, and 20.\n\tWhen s = 3, then 3, 12, and 21.\n\tWhen s = 4, then 4, 13, and 22.\n\tThere are two winning numbers when s is in the range [5-9].\n\tWhen s = 10, there is one winning number, 19.\n\n&nbsp;\nThere are 3 ways to have the greatest number of winners, when n = 2, 3, or 4.&nbsp;\n\n3. Shifting Strings.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; }\n.ps-content-wrapper-v0 div.preheader { display: none; }\n.ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; }\n.ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; }\n.ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; }\n.ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 code {color: black; background: transparent; font-weight: normal; font-size: 1em; }\n.ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; }\n.ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; }\n.ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; }\n.ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; }\n.ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; }\n.ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; }\n.ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; }\n.ps-content-wrapper-v0 table { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; }\n.ps-content-wrapper-v0 table tbody tr th, .ps-content-wrapper-v0 table tbody tr td { font-weight: bold; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; }\n.ps-content-wrapper-v0 table tbody tr th.description { width: 60%; }\n.ps-content-wrapper-v0 table tbody tr td { font-weight: normal; white-space: normal; }\n.ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; }\n.ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; }\n.ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; }\n.ps-content-wrapper-v0 .left { text-align: left; }\n.ps-content-wrapper-v0 .right { text-align: right; }\n.ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; }\n.ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; }\n.json-object-array li { float: left; margin-right: 30px; margin-left: 10px; }\n.json-object-array pre { padding: 4px; margin-left: 0px; }\n\nPerform some number of left and right circular shifts on a string.\nThe following operations on a string are defined:\n\n\t\nLeft Shift: A single circular rotation of the string in which the first character becomes the last character and all other characters are shifted one index to the left. For example, abcde becomes bcdea after one left shift and cdeab after two left shifts.\n\t\nRight Shift: A single circular rotation of the string in which the last character becomes the first character and all other characters are shifted one index to the right. For example, abcde becomes eabcd after one right shift and deabc after two right shifts.\n\n&nbsp;\nExample\ns = 'abcdefg'\nleftShifts = 2\nrightShifts = 4\n&nbsp;\nThe string abcdefg shifted left by 2 positions is cdefgab. The string cdefgab shifted right by 4 positions is fgabcde, the string to return.\n&nbsp;\nFunction Description\nComplete the function getShiftedString in the editor below.\n&nbsp;\ngetShiftedString has the following parameter(s):\n&nbsp;&nbsp;&nbsp;&nbsp;string s:&nbsp; the string to shift\n&nbsp;&nbsp;&nbsp;&nbsp;int leftShifts: number of shifts left\n&nbsp;&nbsp;&nbsp;&nbsp;int rightShifts:&nbsp; number of shifts right\n&nbsp;\nReturns:\n&nbsp;&nbsp;&nbsp;&nbsp;string: a string shifted left or right\n&nbsp;\nConstraints\n\n\t1 ≤ length of s ≤ 105\n\t0 ≤ leftShifts, rightShifts ≤ 109\n\tString s consists of lowercase English alphabetic letters only, ascii[a-z].\n\n&nbsp;\n\nInput Format for Custom Testing\n\nInput from stdin will be processed as follows and passed to the function.\n&nbsp;\nThe first line contains s, the string to shift.\nThe second line contains an integer, leftShifts.\nThe third line contains an integer, rightShifts.\n&nbsp;\n\nSample Case 0\n\nSample Input 0\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Function\n-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------\nabcd&nbsp;&nbsp;&nbsp;&nbsp; →&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s = \"abcd\"\n1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; →&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leftShifts = 1\n2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; →&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rightShifts = 2\n\n&nbsp;\nSample Output 0\ndabc\n&nbsp;\nExplanation 0\nInitially, s is abcd.\n\n\t\nleftShifts = 1 : abcd → bcda\n\n\t\nrightShifts = 2 : bcda → abcd → dabc\n\nThe function then returns dabc.\n&nbsp;\n\nSample Case 1\n\nSample Input 1\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Function\n-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------\na&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s = \"a\"\n0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leftShifts = 0\n1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rightShifts = 1\n\n \nSample Output 1\na\n&nbsp;\nExplanation 1\nA one character string is unchanged regardless of the number of shifts performed.\n&nbsp;\n\n4. Degree of an Array.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; } .ps-content-wrapper-v0 div.preheader { display: none; } .ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; } .ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; } .ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 code { color: black; } .ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; } .ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; } .ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; } .ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; } .ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; } .ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 table { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; } .ps-content-wrapper-v0 table tbody tr th, .ps-content-wrapper-v0 table tbody tr td { font-weight: bold; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table tbody tr th.description { width: 60%; } .ps-content-wrapper-v0 table tbody tr td { font-weight: normal; white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; } .ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; } .ps-content-wrapper-v0 .left { text-align: left; } .ps-content-wrapper-v0 .right { text-align: right; } .ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; } .ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; } .json-object-array li { float: left; margin-right: 30px; margin-left: 10px; } .json-object-array pre { padding: 4px; margin-left: 0px; }\n\nFind the length of the smallest subarray satisfying some criteria.\nGiven an array of integers, its degree is defined as the number of occurrences of the element that occurs most frequently in the array. Given a list of integers, determine two properties:\n\n\tthe degree of the array\n\tthe length of the shortest sub-array that shares that degree\n\n&nbsp;\nExample\narr = [1, 2, 1, 3, 2]\n&nbsp;\nThe array has a degree of 2 based on the occurrences of values 1 and 2. The subarray of degree 2 based on the 1's is [1, 2, 1] and based on 2's is [2, 1, 3, 2]. Their lengths are 3 and 4, so the shortest is length 3. Return the shortest length.\n&nbsp;\n\nFunction Description\nComplete the function degreeOfArray in the editor below. The function must return an integer denoting the minimum size of the subarray such that the degree of the subarray is equal to the degree of the array.\n&nbsp;\ndegreeOfArray has the following parameter(s):\n&nbsp;&nbsp;&nbsp;&nbsp;int arr[n]:&nbsp; an array of integers indexed from 0&nbsp;to n-1\n&nbsp;\nReturn\n&nbsp;&nbsp;&nbsp;&nbsp;int:&nbsp; the minimum size of the subarrays that have a degree equal to the degree of the array\n&nbsp;\nConstraints\n\n\t2 ≤ n ≤ 105\n\n\t1 ≤&nbsp;arr[i]≤ 106\n\n&nbsp;\nInput Format For Custom Testing\n\nInput from stdin will be processed as follows and passed to the function:\n&nbsp;\nThe first line contains an integer, n, denoting the number of elements in arr.\nEach of the n subsequent lines contains an integer describing arr[i] where 0 ≤ i &lt; n.\n\nSample Case 0\nSample Input\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp;Function\n-----&nbsp;&nbsp;&nbsp;&nbsp;--------\n5&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;arr[] size n = 5\n1&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;arr = [1, 2, 2, 3, 1]\n2\n2\n3\n1\n\nSample Output\n2\n\nExplanation\nThe array arr has a degree of 2 based on elements values 1 and 2 because each occurs two times. The subarrays with a degree of 2 are:\n\n\t[1, 2, 2, 3, 1], which has a length of 5.\n\t[2, 2], which has a length of 2.\n\n&nbsp;\nReturn minimum( 2, 5 ) = 2\n\nSample Case 1\nSample Input\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp;Function\n_____&nbsp;&nbsp;&nbsp;&nbsp;________\n6&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;arr[] size n = 6\n1&nbsp;&nbsp;&nbsp;&nbsp;→&nbsp;&nbsp;&nbsp;arr = [1, 1, 2, 1, 2, 2]\n1\n2\n1\n2\n2\n\nSample Output\n4\n\nExplanation\nThe array arr has a degree of 3 based on elements values 1 and 2 because each occurs three times. Subarrays with a degree of 3 are:\n\n\t[1, 1, 2, 1], which has a length of 4.\n\t[2, 1, 2, 2], which has a length of 4.\n\n&nbsp;\nReturn minimum(4, 4) = 4\n\n5. Sub-palindrome\n.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; } .ps-content-wrapper-v0 div.preheader { display: none; } .ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; } .ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; } .ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 code { color: black; } .ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; } .ps-content-wrapper-v0 pre.scrollable-full-json { overflow-x: scroll; white-space: pre; } .ps-content-wrapper-v0 pre.scrollable-json { height: 300px; overflow-y: scroll; display: inline-grid; white-space: pre-wrap; padding-left: 8px; padding-right: 8px; padding-top: 4px; padding-bottom: 4px; } .ps-content-wrapper-v0 div.equation-parent { width: 400px; text-align: center; border: 1px solid #000; padding: 8px; } .ps-content-wrapper-v0 div.equation-parent.equation { width: 100%; display: inline-block; } .ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; } .ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; } .ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 details details { padding-left: 8px; padding-right: 8px; } .ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; } .ps-content-wrapper-v0 details details summary code { color: black; font-weight: bold; padding-left: 2px; padding-right: 2px; padding-top: 4px; padding-right: 4px; margin-left: 4px; } .ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; } .ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 table.normal { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; } .ps-content-wrapper-v0 table.normal tbody { display: block; overflow-x: auto; overflow-y: hidden; } .ps-content-wrapper-v0 table.normal tbody tr:first-child th { font-weight: bold; white-space: normal; } .ps-content-wrapper-v0 table.normal tbody tr th, .ps-content-wrapper-v0 table.normal tbody tr td { font-weight: normal; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table.database-table { border-collapse: collapse; border-color: darkgray; border: 1px solid black; width: auto; margin-left: 4px; margin-top: 8px; margin-bottom: 8px; padding: 8px; } .ps-content-wrapper-v0 table.database-table tbody { overflow-x: auto; overflow-y: hidden; border: none; } .ps-content-wrapper-v0 table.database-table tbody tr th, .ps-content-wrapper-v0 table.database-table tbody tr td { font-weight: normal; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table.database-table tbody tr th { font-weight: bold; border: 1px solid black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(2) td { border: 1px solid black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(n+2) td:first-child { border-left-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(n+2) td:last-child { border-right-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr:last-child td { border-bottom-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr td.description { text-align: left; white-space: pre-wrap; } .ps-content-wrapper-v0 table.normal tbody tr th.description { width: 60%; } .ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; } .ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; } .ps-content-wrapper-v0 table.sudoku { border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; } .ps-content-wrapper-v0 table.sudoku colgroup, tbody { border: 3px solid black; } .ps-content-wrapper-v0 table.sudoku td { border: 1px solid black; height: 25px; width: 25px; text-align: center; padding: 0; } .ps-content-wrapper-v0 .left { text-align: left; } .ps-content-wrapper-v0 .right { text-align: right; } .ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; } .ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; } .json-object-array li { float: left; margin-right: 30px; margin-left: 10px; } .json-object-array pre { padding: 4px; margin-left: 0px; }\n\nA palindrome is a string that reads the same forward and backward, e.g. 121 or tacocat. A substring is a contiguous subset of characters in a string. Given a string s, how many distinct substrings of s are palindromes?\n&nbsp;\nExample\ns = \"mokkori\"\n&nbsp;\nSome of its substrings are [m, o, k, r, i, mo, ok, mok, okk, kk, okko]. There are 7 distinct palindromes [m, o, k, r, i, kk, okko].\n&nbsp;\nFunction Description\nComplete the function palindrome in the editor below.\n&nbsp;\npalindrome has the following parameter(s):\n&nbsp;&nbsp;&nbsp; string s:&nbsp; a string\n&nbsp;\nReturns\n&nbsp;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;int: the number of distinct palindromes\n&nbsp;\nConstraints\n\n\t1 ≤ |s| ≤ 5000\n\tEach character s[i] ∈ ascii[a-z]\n\n&nbsp;\n\nInput Format for Custom Testing\n\nInput from stdin will be processed as follows and passed to the function.\n&nbsp;\nThe input line contains a string s.\n\nSample Case 0\n\nSample Input 0\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp; Function Parameters\n-----&nbsp;&nbsp;&nbsp;&nbsp; -------------------\naabaa → s = \"aabaa\"\n\nSample Output 0\n5\n\nExplanation 0\nPalindromic substrings are [a, aa, aabaa, aba, b].\nThe substring 'a' occurs 4 times, but is counted only once. Similarly, the substring 'aa' occurs twice but counts as one distinct palindrome.\nThe number of distinct palindromes is 5.\n&nbsp;\n\nSample Case 1\n\nSample Input 1\nSTDIN&nbsp;&nbsp;&nbsp;&nbsp; Function Parameters\n-----&nbsp;&nbsp;&nbsp;&nbsp; -------------------\nabcddcbabcdcdaadcdcbabcdddcb → s = \"abcddcbabcdcdaadcdcbabcdddcb\"\n\nSample Output 1\n27\n\nExplanation 1\nPalindromic substrings are [a, b, c, d, aa, dd, cddc, bab, cbabc, abcddcba, bcddcb, dcbabcd,&nbsp;cdc, dcd, ddd, cdddc, bcdddcb, daad, cdaadc, dcdaadcd, cdcdaadcdc, bcdcdaadcdcb, abcdcdaadcdcba, babcdcdaadcdcbab, cbabcdcdaadcdcbabc, dcbabcdcdaadcdcbabcd, ddcbabcdcdaadcdcbabcdd ].\nThe number of distinct palindromes is 27.\n\n6. REST API: Get IOT devices by Parent Id.ps-content-wrapper-v0 div { margin: 0 auto; overflow: auto; } .ps-content-wrapper-v0 div.preheader { display: none; } .ps-content-wrapper-v0 p { white-space: pre-wrap; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 p.section-title { font-weight: bold; padding-bottom: 0px; } .ps-content-wrapper-v0 ol.plain-list, .ps-content-wrapper-v0 ul.plain-list { list-style-type: none; padding: 4px; } .ps-content-wrapper-v0 li { white-space: normal; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 code { color: black; } .ps-content-wrapper-v0 pre { background-color: #f4faff; border: 0; border-radius: 2px; margin: 8px; padding: 10px; } .ps-content-wrapper-v0 pre.scrollable-full-json { overflow-x: scroll; white-space: pre; } .ps-content-wrapper-v0 pre.scrollable-json { height: 300px; overflow-y: scroll; display: inline-grid; white-space: pre-wrap; padding-left: 8px; padding-right: 8px; padding-top: 4px; padding-bottom: 4px; } .ps-content-wrapper-v0 div.equation-parent { width: 400px; text-align: center; border: 1px solid #000; padding: 8px; } .ps-content-wrapper-v0 div.equation-parent.equation { width: 100%; display: inline-block; } .ps-content-wrapper-v0 figure { background-color: transparent; display: table; margin-top: 8px; margin-bottom: 8px; text-align: center; margin-left: auto; margin-right: auto; } .ps-content-wrapper-v0 figcaption { text-align: center; display: table-caption; caption-side: bottom; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 img { width: auto; max-width: 100%; height: auto; } .ps-content-wrapper-v0 details { background-color: transparent; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; } .ps-content-wrapper-v0 details details { padding-left: 8px; padding-right: 8px; } .ps-content-wrapper-v0 details summary { background-color: #39424e; color: white; font-weight: bold; margin-top: 4px; margin-bottom: 4px; padding: 8px; } .ps-content-wrapper-v0 details details summary code { color: black; font-weight: bold; padding-left: 2px; padding-right: 2px; padding-top: 4px; padding-right: 4px; margin-left: 4px; } .ps-content-wrapper-v0 details div.collapsable-details { margin: 0 auto; padding-left: 4px; padding-right: 4px; padding-top: 0px; padding-bottom: 2px; overflow: auto; } .ps-content-wrapper-v0 details div.collapsable-details pre { margin-left: 4px; margin-right: 4px; margin-top: 4px; margin-bottom: 4px; } .ps-content-wrapper-v0 table.normal { border: 1px solid black; border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; width: 96%; table-layout: fixed; } .ps-content-wrapper-v0 table.normal tbody { display: block; overflow-x: auto; overflow-y: hidden; } .ps-content-wrapper-v0 table.normal tbody tr:first-child th { font-weight: bold; white-space: normal; } .ps-content-wrapper-v0 table.normal tbody tr th, .ps-content-wrapper-v0 table.normal tbody tr td { font-weight: normal; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table.database-table { border-collapse: collapse; border-color: darkgray; border: 1px solid black; width: auto; margin-left: 4px; margin-top: 8px; margin-bottom: 8px; padding: 8px; } .ps-content-wrapper-v0 table.database-table tbody { overflow-x: auto; overflow-y: hidden; border: none; } .ps-content-wrapper-v0 table.database-table tbody tr th, .ps-content-wrapper-v0 table.database-table tbody tr td { font-weight: normal; white-space: nowrap; text-align: center; vertical-align: middle; border: 1px solid black; border-color: darkgray; padding: 8px; } .ps-content-wrapper-v0 table.database-table tbody tr th { font-weight: bold; border: 1px solid black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(2) td { border: 1px solid black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(n+2) td:first-child { border-left-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr:nth-child(n+2) td:last-child { border-right-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr:last-child td { border-bottom-color: black; } .ps-content-wrapper-v0 table.database-table tbody tr td.description { text-align: left; white-space: pre-wrap; } .ps-content-wrapper-v0 table.normal tbody tr th.description { width: 60%; } .ps-content-wrapper-v0 table.function-params tbody tr:first-child td.headers { border-bottom-width: 2px; } .ps-content-wrapper-v0 table.function-params tbody tr:last-child td { border-top-width: 2px; border-top-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.headers { width: 25%; font-weight: bold; text-align: center; border: 1px solid black; border-right-width: 2px; border-color: darkgray; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell { width: 100%; height: 100%; padding: 0px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table { width: 100%; height: 100%; padding: 0px; margin: 0px; border: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td.code { white-space: normal; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th { border-top: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr th:last-child { border-right: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr:last-child td { border-bottom: 0; border-top-width: 1px; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:first-child { border-left: 0; } .ps-content-wrapper-v0 table.function-params tbody tr td.params-table-cell table.params-table tbody tr td:last-child { border-right: 0; } .ps-content-wrapper-v0 table.sudoku { border-collapse: collapse; border-color: darkgray; margin: 0 auto; margin-top: 8px; margin-bottom: 8px; padding: 8px; } .ps-content-wrapper-v0 table.sudoku colgroup, tbody { border: 3px solid black; } .ps-content-wrapper-v0 table.sudoku td { border: 1px solid black; height: 25px; width: 25px; text-align: center; padding: 0; } .ps-content-wrapper-v0 .left { text-align: left; } .ps-content-wrapper-v0 .right { text-align: right; } .ps-content-wrapper-v0 .code { font-family: monospace; white-space: nowrap; } .ps-content-wrapper-v0 .json-object-array ol, .ps-content-wrapper-v0 .json-object-array ol ul { margin-top: 0px; padding-left: 14px; } .json-object-array li { float: left; margin-right: 30px; margin-left: 10px; } .json-object-array pre { padding: 4px; margin-left: 0px; }\n\nIn this challenge, the REST API contains information about a collection of IoT devices. Given the status query and the identifier of the parent device, get the average rotor speed of available IoT devices with the given status parent identifier.\n&nbsp;\nTo access the collection of devices, perform an HTTP GET request to:\nhttps://jsonmock.hackerrank.com/api/iot_devices/search?status=&lt;statusQuery&gt;&amp;page=&lt;pageNumber&gt;\nwhere &lt;statusQuery&gt; is a given string to query and &lt;pageNumber&gt; is the page number of the results to return.\n&nbsp;\nFor example, GET request to:\nhttps://jsonmock.hackerrank.com/api/iot_devices/search?status=STOP&amp;page=2\nwill return the second page of the devices with their status containing \"STOP\".\n&nbsp;\nThe response to such request is a JSON with the following 5 fields:\n&nbsp;\n\n\t\npage: The current page of the results\n\t\nper_page: The maximum number of devices returned per page.\n\t\ntotal: The total number of devices available on all pages of the result.\n\t\ntotal_pages: The total number of pages with results.\n\t\ndata: An&nbsp;array of objects containing devices returned on the requested page\n\n&nbsp;\nEach device object has the following schema:\n\n\t\nid: The unique ID of the device\n\t\ntimestamp: The timestamp when the device was added to the collection, in&nbsp;UTC milliseconds\n\t\nstatus: The status of the device\n\t\noperatingParams: the object containing operating parameters of the device\n\t\nasset: The object containing information about the asset of the device\n\t\nparent: Optional. The object containing information about the parent of the device\n\n&nbsp;\nThe operating parameters object has the following schema:\n\n\t\nrotorSpeed: The rotor speed of the device\n\t\nslack: The slack in the device\n\t\nrootThreshold: The root threshold for the device\n\n&nbsp;\nThe asset object has the following schema:\n\n\t\nid: The unique ID of the asset\n\t\nalias: The alias for the asset\n\nThe parent object, if it is present, will have one or both of the following fields:\n\n\t\nid:&nbsp;The unique ID of the parent of the asset\n\t\nalias: The alias for&nbsp;the parent of the asset\n\n&nbsp;\nGiven string statusQuery, and numerical parentId value, the goal is to return the floor of the average rotor speed of all returned devices that have their parent identifier matching the parentId value. If there are no devices matching the given criteria, the result must be 0.\n&nbsp;\n&nbsp;\nFunction Description\nComplete the function avgRotorSpeed in the editor below.&nbsp;\n&nbsp;\navgRotorSpeed has the following parameter(s):\n&nbsp; &nbsp; statusQuery:&nbsp;string to query for\n&nbsp; &nbsp; parentId: id of the parent to match\n&nbsp;\nReturns:\n&nbsp;&nbsp;&nbsp; int: the floor of the average rotor speed of matching devices or 0 if there are none\n&nbsp;\n\nInput Format For Custom Testing\n\nIn the first line, there is a string statusQuery.\nIn the second line, there is an integer parentId.\n\nSample Case 0\n\nSample Input For Custom Testing\nRUNNING\n7\n\nSample Output\n3880\nExplanation\nThe status query is \"RUNNING\" and the parent identifier is 7, so we are interested in the average rotor speed of all returned devices having a parent identifier of 7. There are 4 such devices and their rotor speeds are 4721, 4446, 1592 and 4761 respectively. Their average rotor speed is (4721 + 4446 + 1592 + 4761)/4 = 15520/4 = 3880. Therefore, the final answer is 3880 rounded down to integer value which is 3880.",
		"tags": ["f4faff", "39424e", "f4faff", "000", "39424e", "f4faff", "39424e", "f4faff", "39424e", "f4faff", "000", "39424e", "f4faff", "000", "39424e", "note","coding","problem"]
},

{
		"title": 202305310919,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202305310919GO语言基础/",
		"content": "m := map[string]int {&quot;a&quot;:1, &quot;b&quot;:2}\n\n其实是make的语法糖，它等价于\nvar m map[string]int = make(map[string]int, 2)\nm = {&quot;a&quot;:1, &quot;b&quot;:2}\n\n内建函数 make 用来为 slice，map 或 chan 类型分配内存和初始化一个对象(注意：只能用在这三种类型上)，跟 new 类似，第一个参数也是一个类型而不是一个值，跟 new 不同的是，make 返回类型的引用而不是指针，而返回值也依赖于具体传入的类型。\n\nmake 的作用是初始化内置的数据结构，也就是我们在前面提到的切片、哈希表和 Channel\nnew 的作用是根据传入的类型分配一片内存空间并返回指向这片内存空间的指针\n\nChannel\nfunc f1(c chan int, x int) // 无向channel\nfunc f2(c chan&lt;- int, x int) // 只写channel，函数内只能向channel写数据，不能读，send-only channel\nfunc f3(c &lt;-chan int, x int) // 只读channel，receive-only channel\n\nUnbuffered channel\n一个基于无缓存Channels的发送操作将导致发送者goroutine阻塞，直到另一个goroutine在相同的Channels上执行接收操作，当发送的值通过Channels成功传输之后，两个goroutine可以继续执行后面的语句。反之，如果接收操作先发生，那么接收者goroutine也将阻塞，直到有另一个goroutine在相同的Channels上执行发送操作。\nGoroutine\n\n[!Hint]\nmain函数也是一个goroutine，称之为主goroutine.\n\n不管一个channel是否被关闭，当它没有被引用时将会被Go语言的垃圾自动回收器回收。（不要将关闭一个打开文件的操作和关闭一个channel操作混淆。对于每个打开的文件，都需要在不使用的时候调用对应的Close方法来关闭文件。）\nselect\nC 语言的 select 系统调用可以同时监听多个文件描述符的可读或者可写的状态，Go 语言中的 select 也能够让 Goroutine 同时等待多个 Channel 可读或者可写，在多个文件或者 Channel状态改变之前，select 会一直阻塞当前线程或者 Goroutine。\nselect 是与 switch 相似的控制结构，与 switch 不同的是，select 中虽然也有多个 case，但是这些 case 中的表达式必须都是 Channel 的收发操作。\n在通常情况下，select 语句会阻塞当前 Goroutine 并等待多个 Channel 中的一个达到可以收发的状态。但是如果 select 控制结构中包含 default 语句，那么这个 select 语句在执行时会遇到以下两种情况：\n\n当存在可以收发的 Channel 时，直接处理该 Channel 对应的 case；\n当不存在可以收发的 Channel 时，执行 default 中的语句；\n\n[!cite]- runtime.LockOSThread 的意义\nWith the Go threading model, calls to C code, assembler code, or blocking system calls occur in the same thread as the calling Go code, which is managed by the Go runtime scheduler.\nThe os.LockOSThread() mechanism is mostly useful when Go has to interface with some foreign library (a C library for instance). It guarantees that several successive calls to this library will be done in the same thread.\nThis is interesting in several situations:\n\na number of graphic libraries (OS X Cocoa, OpenGL, SDL, ...) require all the calls to be done on a specific thread (or the main thread in some cases).\nsome foreign libraries are based on thread local storage (TLS) facilities. They store some context in a data structure attached to the thread. Or some functions of the API provide results whose memory lifecycle is attached to the thread. This concept is used in both Windows and Unix-like systems. A typical example is the errno global variable commonly used in C libraries to store error codes. On systems supporting multi-threading, errno is generally defined as a thread-local variable.\nmore generally, some foreign libraries may use a thread identifier to index/manage internal resources.",
		"tags": [ "note","go"]
},

{
		"title": 202306062013,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306062013SSL-vs-TLS/",
		"content": "SSL (Secure Sockets Layer) 【安全套接字层】和 TLS (Transport Layer Security) 【传输层安全】都是通信协议，用于加密服务器、应用程序、用户和系统之间的数据。这两种协议都会对通过网络连接的双方进行身份验证，以便他们能安全交换数据。\nTaher Elgamal 领导了 SSL 的开发，并于 1995 年公开发布了 SSL 2.0。SSL 旨在确保万维网上的通信安全。在 SSL 经历多次迭代后，Tim Dierks 和 Christopher Allen 于 1999 年创建了 TLS 1.0，作为 SSL 3.0 的后继者。\n术语\nTLS 是 SSL 的直接后继者，所有版本的 SSL 目前均已弃用。但是，使用术语 SSL 来描述 TLS 连接的情况很常见。在大多数情况下，术语 SSL 和 SSL/TLS 都是指 TLS 协议和 TLS 证书。\n用途\nTLS 是一种支持加密和身份验证的安全通信协议，SSL 在被弃用之前也是如此。TLS 和 SSL 都使用数字证书来简化握手过程并在浏览器和 Web 服务器之间建立加密通信。\nHTTPS 中的用法\nHTTP 是一种协议或一组通信规则，用于通过任何网络进行客户端-服务器通信。HTTPS 是在不安全的 HTTP 连接上建立安全 SSL/TLS 协议的做法。\n在与网站连接之前，您的浏览器会使用 TLS 来检查网站的 TLS 或 SSL 证书。TLS 和 SSL 证书表明服务器符合当前的安全标准。您可以在浏览器地址栏中找到有关证书的证据。真实且加密的连接将显示 https://，而不是 http://。附加的 s 代表 secure（安全）。\nRefrences\n\nSSL 与 TLS 之间有何区别？",
		"tags": [ "note","ssl","tls","terminology","term","术语"]
},

{
		"title": 202306071056,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306071056对称加密和非对称加密/",
		"content": "明文通信的弊端\n\n冒充\n窃听\n篡改\n\nflowchart LR\nid1(A)-- 我是A今晚7点小树林见 -->id2(B)\nstyle id1 fill:#f9f,stroke:#333,stroke-width:4px\nstyle id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5冒充：\nflowchart LR\nid3(C)-- 我是A今晚7点小树林见 -->id2(B)\nstyle id3 fill:#49a,stroke:#333,stroke-width:4px\nstyle id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5窃听：\nflowchart LR\nTXT(我是A今晚7点小树林见)\nid1(A) --- TXT -->id2(B)\nTXT --窃听--> id3(C)\nstyle id1 fill:#f9f,stroke:#333,stroke-width:4px\nstyle id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5\nstyle id3 fill:#49a,stroke:#333,stroke-width:4px\nstyle TXT stroke-width:0篡改：\nflowchart LR\nTXT(我是A今晚7点小树林见)\nid1(A) --- TXT --> id2(B)\nid3 --我是A今晚9点点小湖边见--> TXT\nTXT --截获--> id3(C)\n\nstyle id1 fill:#f9f,stroke:#333,stroke-width:4px\nstyle id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5\nstyle id3 fill:#49a,stroke:#333,stroke-width:4px\nstyle TXT stroke-width:0\n\n对称密钥：指通信的双方使用同一个密钥进行加解密。\n非对称密钥：成对出现，一个称为公钥，可对外公开。一个称为私钥，仅自己持有。\n\n对称加密\n.container {font-family: sans-serif; text-align: center;} .button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;} .excalidraw .App-menu_top .buttonList { display: flex;} .excalidraw-wrapper { height: 800px; margin: 50px; position: relative;} :root[dir=\"ltr\"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;} (function(){const InitialData={\"type\":\"excalidraw\",\"version\":2,\"source\":\"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.7.1\",\"elements\":[{\"type\":\"rectangle\",\"version\":104,\"versionNonce\":1842702676,\"isDeleted\":false,\"id\":\"oXGIlth6gbIsBArDulooC\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":20,\"angle\":0,\"x\":220,\"y\":-220,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":460,\"height\":440,\"seed\":244598972,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a0\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":70,\"versionNonce\":328173036,\"isDeleted\":false,\"id\":\"TitHBTEvh9jyEgY3IrGgK\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":20,\"angle\":0,\"x\":-480,\"y\":-220,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":460,\"height\":440,\"seed\":301821572,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a1\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":58,\"versionNonce\":1401233108,\"isDeleted\":false,\"id\":\"qhGwKjOoG022hZJ1-D2WJ\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-320,\"y\":-160.0234375,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":139,\"height\":90,\"seed\":1679321276,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"zPCPNxNI\"},{\"id\":\"DTD6g2M8aRYf7Bgc-bHVk\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a2\",\"frameId\":null},{\"type\":\"text\",\"version\":31,\"versionNonce\":1778378860,\"isDeleted\":false,\"id\":\"zPCPNxNI\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-280.5,\"y\":-127.5234375,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":1452052740,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"发送方\",\"rawText\":\"发送方\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"qhGwKjOoG022hZJ1-D2WJ\",\"originalText\":\"发送方\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a3\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":254,\"versionNonce\":614605908,\"isDeleted\":false,\"id\":\"GVzi8gxLCXCwW951OC32K\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-460,\"y\":29.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#228be6\",\"width\":96,\"height\":61,\"seed\":319025468,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"id\":\"q_rG3EqGnMvYgfLehZ22n\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"Za59QtAD\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a4\",\"frameId\":null},{\"type\":\"text\",\"version\":196,\"versionNonce\":155187948,\"isDeleted\":false,\"id\":\"Za59QtAD\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-432,\"y\":47.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":73126020,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"明文\",\"rawText\":\"明文\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"GVzi8gxLCXCwW951OC32K\",\"originalText\":\"明文\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a5\",\"frameId\":null},{\"type\":\"diamond\",\"version\":458,\"versionNonce\":654473684,\"isDeleted\":false,\"id\":\"g9GUgUQ5OffH-Z2UvHtda\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-308.2580371694647,\"y\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":115,\"height\":120,\"seed\":1550477756,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[{\"id\":\"q_rG3EqGnMvYgfLehZ22n\",\"type\":\"arrow\"},{\"id\":\"exh9YQ5KpJyEjiCjbx8ue\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"SV1uHQRm\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a6\",\"frameId\":null},{\"type\":\"text\",\"version\":400,\"versionNonce\":467254636,\"isDeleted\":false,\"id\":\"SV1uHQRm\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-270.5080371694647,\"y\":35,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":50,\"seed\":1159143428,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"加密\\n算法\",\"rawText\":\"加密算法\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"g9GUgUQ5OffH-Z2UvHtda\",\"originalText\":\"加密算法\",\"lineHeight\":1.25,\"baseline\":43,\"autoResize\":true,\"index\":\"a7\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":209,\"versionNonce\":1975263060,\"isDeleted\":false,\"id\":\"7R3ykIPHAzZ6vZ0MhaNwt\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-148.99999999999997,\"y\":29.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fa5252\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"id\":\"exh9YQ5KpJyEjiCjbx8ue\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"dlLHS7ks\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"a8\",\"frameId\":null},{\"type\":\"text\",\"version\":159,\"versionNonce\":1796681708,\"isDeleted\":false,\"id\":\"dlLHS7ks\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-120.99999999999997,\"y\":47.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密文\",\"rawText\":\"密文\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"7R3ykIPHAzZ6vZ0MhaNwt\",\"originalText\":\"密文\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"a9\",\"frameId\":null},{\"type\":\"text\",\"version\":49,\"versionNonce\":1495602388,\"isDeleted\":false,\"id\":\"TF1jWOXE\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-270.5,\"y\":140,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":1458580156,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"id\":\"jhLAbbUDkoPiRlzxdpkoT\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密钥\",\"rawText\":\"密钥\",\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"containerId\":null,\"originalText\":\"密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aA\",\"frameId\":null},{\"type\":\"arrow\",\"version\":1522,\"versionNonce\":90000108,\"isDeleted\":false,\"id\":\"q_rG3EqGnMvYgfLehZ22n\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-356.925220259329,\"y\":64.90392471872943,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":46.551488845037795,\"height\":5.46137988645016,\"seed\":1871310596,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1755965486807,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"GVzi8gxLCXCwW951OC32K\",\"gap\":7.0747797406709765,\"focus\":0.3145539734410799},\"endBinding\":{\"elementId\":\"g9GUgUQ5OffH-Z2UvHtda\",\"gap\":2.1879027404367477,\"focus\":0.12585860309696323},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[46.551488845037795,-5.46137988645016]],\"index\":\"aB\",\"frameId\":null},{\"type\":\"arrow\",\"version\":70,\"versionNonce\":1545633772,\"isDeleted\":false,\"id\":\"exh9YQ5KpJyEjiCjbx8ue\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-190.20128598548726,\"y\":61.920402668035315,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":30.20128598548729,\"height\":0.9577566845042114,\"seed\":429093692,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1755965486808,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"g9GUgUQ5OffH-Z2UvHtda\",\"gap\":3.609941025577122,\"focus\":0},\"endBinding\":{\"elementId\":\"7R3ykIPHAzZ6vZ0MhaNwt\",\"gap\":11,\"focus\":-0.14830942622950818},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[30.20128598548729,0.9577566845042114]],\"index\":\"aC\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":89,\"versionNonce\":1852122348,\"isDeleted\":false,\"id\":\"CtpknYFsGN3Js9cmzhanx\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":380,\"y\":-160.0234375,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":139,\"height\":90,\"seed\":1992372740,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"Wr7OIS3b\"},{\"id\":\"DTD6g2M8aRYf7Bgc-bHVk\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aD\",\"frameId\":null},{\"type\":\"text\",\"version\":70,\"versionNonce\":1906110420,\"isDeleted\":false,\"id\":\"Wr7OIS3b\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":419.5,\"y\":-127.5234375,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":1465143684,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"接收方\",\"rawText\":\"接收方\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"CtpknYFsGN3Js9cmzhanx\",\"originalText\":\"接收方\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aE\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":342,\"versionNonce\":919185260,\"isDeleted\":false,\"id\":\"94leFWXjqyR6mqEpf2iFq\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":559.9999999999999,\"y\":29.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#228be6\",\"width\":96,\"height\":61,\"seed\":459483908,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"0HfNRRlv\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aF\",\"frameId\":null},{\"type\":\"text\",\"version\":282,\"versionNonce\":832034132,\"isDeleted\":false,\"id\":\"0HfNRRlv\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":587.9999999999999,\"y\":47.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":1733241476,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"明文\",\"rawText\":\"明文\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"94leFWXjqyR6mqEpf2iFq\",\"originalText\":\"明文\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aG\",\"frameId\":null},{\"type\":\"diamond\",\"version\":496,\"versionNonce\":880400876,\"isDeleted\":false,\"id\":\"0Tw5LtNpU_XNtNWRiCEUW\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":391.03928391766385,\"y\":0,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":115,\"height\":120,\"seed\":818637444,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[{\"type\":\"text\",\"id\":\"RVJONLsM\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aH\",\"frameId\":null},{\"type\":\"text\",\"version\":445,\"versionNonce\":1276775124,\"isDeleted\":false,\"id\":\"RVJONLsM\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":428.78928391766385,\"y\":35,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":50,\"seed\":1464870972,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"解密\\n算法\",\"rawText\":\"解密算法\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"0Tw5LtNpU_XNtNWRiCEUW\",\"originalText\":\"解密算法\",\"lineHeight\":1.25,\"baseline\":43,\"autoResize\":true,\"index\":\"aI\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":300,\"versionNonce\":578796652,\"isDeleted\":false,\"id\":\"JiRfbzgB7jKFQE9Vsuphx\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":260,\"y\":29.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fa5252\",\"width\":96,\"height\":61,\"seed\":1502158012,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"ZkUaD9cO\"},{\"id\":\"LqNsVS4g4b1yqL-JmJEZH\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aJ\",\"frameId\":null},{\"type\":\"text\",\"version\":249,\"versionNonce\":330928212,\"isDeleted\":false,\"id\":\"ZkUaD9cO\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":288,\"y\":47.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":1091431356,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密文\",\"rawText\":\"密文\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"JiRfbzgB7jKFQE9Vsuphx\",\"originalText\":\"密文\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aK\",\"frameId\":null},{\"type\":\"text\",\"version\":82,\"versionNonce\":1252347628,\"isDeleted\":false,\"id\":\"dwOwvEMQ\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":429.5,\"y\":140,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":91298236,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"id\":\"jhLAbbUDkoPiRlzxdpkoT\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密钥\",\"rawText\":\"密钥\",\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"containerId\":null,\"originalText\":\"密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aL\",\"frameId\":null},{\"type\":\"arrow\",\"version\":99,\"versionNonce\":711041644,\"isDeleted\":false,\"id\":\"DTD6g2M8aRYf7Bgc-bHVk\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-180,\"y\":-120,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":559,\"height\":0,\"seed\":814856836,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486808,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"qhGwKjOoG022hZJ1-D2WJ\",\"gap\":1,\"focus\":-0.11059027777777777},\"endBinding\":{\"elementId\":\"CtpknYFsGN3Js9cmzhanx\",\"gap\":1,\"focus\":0.11059027777777777},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[559,0]],\"index\":\"aM\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":229,\"versionNonce\":762614124,\"isDeleted\":false,\"id\":\"EKGgm32aGD8YkVxj2GEHZ\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":60,\"y\":-180,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fa5252\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"Q3smUyjs\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aN\",\"frameId\":null},{\"type\":\"text\",\"version\":180,\"versionNonce\":2129169236,\"isDeleted\":false,\"id\":\"Q3smUyjs\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":88,\"y\":-162,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密文\",\"rawText\":\"密文\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"EKGgm32aGD8YkVxj2GEHZ\",\"originalText\":\"密文\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aO\",\"frameId\":null},{\"type\":\"arrow\",\"version\":38,\"versionNonce\":156923116,\"isDeleted\":false,\"id\":\"LqNsVS4g4b1yqL-JmJEZH\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":360,\"y\":60,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":40,\"height\":0,\"seed\":9794364,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486810,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"JiRfbzgB7jKFQE9Vsuphx\",\"gap\":4,\"focus\":0},\"endBinding\":null,\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[40,0]],\"index\":\"aP\",\"frameId\":null},{\"type\":\"arrow\",\"version\":462,\"versionNonce\":1508114644,\"isDeleted\":false,\"id\":\"BJ0kV9qcgRO-nJvyxbIgX\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":500,\"y\":60,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":60,\"height\":0,\"seed\":1459989252,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"startBinding\":null,\"endBinding\":null,\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[60,0]],\"index\":\"aQ\",\"frameId\":null},{\"type\":\"arrow\",\"version\":59,\"versionNonce\":653796972,\"isDeleted\":false,\"id\":\"jhLAbbUDkoPiRlzxdpkoT\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dotted\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-220,\"y\":160,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":640,\"height\":0,\"seed\":2018180100,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"type\":\"text\",\"id\":\"BhrmNHIi\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"TF1jWOXE\",\"focus\":0.6,\"gap\":10.5},\"endBinding\":{\"elementId\":\"dwOwvEMQ\",\"focus\":-0.6,\"gap\":9.5},\"lastCommittedPoint\":null,\"startArrowhead\":\"triangle\",\"endArrowhead\":\"triangle\",\"points\":[[0,0],[640,0]],\"index\":\"aR\",\"frameId\":null},{\"type\":\"text\",\"version\":18,\"versionNonce\":13944404,\"isDeleted\":false,\"id\":\"BhrmNHIi\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dotted\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":50,\"y\":147.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":100,\"height\":25,\"seed\":525454212,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"同一个密钥\",\"rawText\":\"同一个密钥\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"jhLAbbUDkoPiRlzxdpkoT\",\"originalText\":\"同一个密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aS\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":174,\"versionNonce\":947943660,\"isDeleted\":false,\"id\":\"p8mdpfw8pMkS3u3N24ZSa\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":20,\"angle\":0,\"x\":280,\"y\":580,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":460,\"height\":440,\"seed\":244598972,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aT\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":109,\"versionNonce\":1754323924,\"isDeleted\":false,\"id\":\"Hk6NLGeMipYDdg547Xenq\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dashed\",\"roughness\":1,\"opacity\":20,\"angle\":0,\"x\":-500,\"y\":580,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":460,\"height\":440,\"seed\":301821572,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aU\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":97,\"versionNonce\":1247443820,\"isDeleted\":false,\"id\":\"8ddaUvTi-zJcXjR9trbmr\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-340,\"y\":639.9765625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":139,\"height\":90,\"seed\":1679321276,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"V92cnV0p\"},{\"id\":\"ZKvBdW62_Eg5sRNLRXiIO\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aV\",\"frameId\":null},{\"type\":\"text\",\"version\":70,\"versionNonce\":2066628948,\"isDeleted\":false,\"id\":\"V92cnV0p\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-300.5,\"y\":672.4765625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":1452052740,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"发送方\",\"rawText\":\"发送方\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"8ddaUvTi-zJcXjR9trbmr\",\"originalText\":\"发送方\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aW\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":293,\"versionNonce\":1188048364,\"isDeleted\":false,\"id\":\"E78A_3L36tp06fE_QSYM3\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-480,\"y\":829.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#228be6\",\"width\":96,\"height\":61,\"seed\":319025468,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"id\":\"DJ3wUKBcx4C3JEfLo6hKg\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"8j6kt4P3\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aX\",\"frameId\":null},{\"type\":\"text\",\"version\":240,\"versionNonce\":1879242452,\"isDeleted\":false,\"id\":\"8j6kt4P3\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-452,\"y\":847.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":73126020,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"消息\",\"rawText\":\"消息\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"E78A_3L36tp06fE_QSYM3\",\"originalText\":\"消息\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"aY\",\"frameId\":null},{\"type\":\"diamond\",\"version\":514,\"versionNonce\":1055625324,\"isDeleted\":false,\"id\":\"c7mQ3YXzpgCa-Ye3mdvjW\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-360,\"y\":800,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":169,\"height\":120,\"seed\":1550477756,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[{\"id\":\"DJ3wUKBcx4C3JEfLo6hKg\",\"type\":\"arrow\"},{\"id\":\"xo7n39tvHzTL721RBSE2X\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"HjZN6rGr\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aZ\",\"frameId\":null},{\"type\":\"text\",\"version\":511,\"versionNonce\":598015060,\"isDeleted\":false,\"id\":\"HjZN6rGr\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-305.25,\"y\":835,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":50,\"seed\":1159143428,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\\n计算\",\"rawText\":\"认证码计算\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"c7mQ3YXzpgCa-Ye3mdvjW\",\"originalText\":\"认证码计算\",\"lineHeight\":1.25,\"baseline\":43,\"autoResize\":true,\"index\":\"aa\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":262,\"versionNonce\":309764844,\"isDeleted\":false,\"id\":\"yVLzJ5x8WVXQvA8JbvpMH\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-160,\"y\":820,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"id\":\"xo7n39tvHzTL721RBSE2X\",\"type\":\"arrow\"},{\"type\":\"text\",\"id\":\"dwlBDM9R\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"ab\",\"frameId\":null},{\"type\":\"text\",\"version\":221,\"versionNonce\":1877627348,\"isDeleted\":false,\"id\":\"dwlBDM9R\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-142,\"y\":838,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\",\"rawText\":\"认证码\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"yVLzJ5x8WVXQvA8JbvpMH\",\"originalText\":\"认证码\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ac\",\"frameId\":null},{\"type\":\"text\",\"version\":88,\"versionNonce\":402351468,\"isDeleted\":false,\"id\":\"3tUc1Xbg\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-290.5,\"y\":940,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":1458580156,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"id\":\"lpKmbkqPgPskY3hSsPJgq\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密钥\",\"rawText\":\"密钥\",\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"containerId\":null,\"originalText\":\"密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ad\",\"frameId\":null},{\"type\":\"arrow\",\"version\":2119,\"versionNonce\":867634284,\"isDeleted\":false,\"id\":\"DJ3wUKBcx4C3JEfLo6hKg\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-376.6610468981684,\"y\":864.7104588178894,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":16.968150235148926,\"height\":2.056750502512955,\"seed\":1871310596,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1755965486813,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"E78A_3L36tp06fE_QSYM3\",\"gap\":7.33895310183158,\"focus\":0.31439245010813177},\"endBinding\":{\"elementId\":\"c7mQ3YXzpgCa-Ye3mdvjW\",\"gap\":1.9859294647184367,\"focus\":0.1258586030969622},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[16.968150235148926,-2.056750502512955]],\"index\":\"ae\",\"frameId\":null},{\"type\":\"arrow\",\"version\":909,\"versionNonce\":890757484,\"isDeleted\":false,\"id\":\"xo7n39tvHzTL721RBSE2X\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-188.5212841339642,\"y\":857.3462144845303,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":17.110542445984663,\"height\":0.47517825538432135,\"seed\":429093692,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[],\"updated\":1755965486814,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"c7mQ3YXzpgCa-Ye3mdvjW\",\"gap\":3.6313372064096154,\"focus\":-0.003983472711416707},\"endBinding\":{\"elementId\":\"yVLzJ5x8WVXQvA8JbvpMH\",\"gap\":11.410741687979538,\"focus\":-0.14830942622950627},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[17.110542445984663,-0.47517825538432135]],\"index\":\"af\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":132,\"versionNonce\":1006038228,\"isDeleted\":false,\"id\":\"psHAauVaayZ6G3RcyYaHX\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":440,\"y\":639.9765625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":139,\"height\":90,\"seed\":1992372740,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"3ekrsxBB\"},{\"id\":\"ZKvBdW62_Eg5sRNLRXiIO\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"ag\",\"frameId\":null},{\"type\":\"text\",\"version\":113,\"versionNonce\":1423571564,\"isDeleted\":false,\"id\":\"3ekrsxBB\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":479.5,\"y\":672.4765625,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":1465143684,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"接收方\",\"rawText\":\"接收方\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"psHAauVaayZ6G3RcyYaHX\",\"originalText\":\"接收方\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ah\",\"frameId\":null},{\"type\":\"diamond\",\"version\":743,\"versionNonce\":2041197140,\"isDeleted\":false,\"id\":\"YWTj4EOZ2zYWQptmHq5Cx\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":440.71350619685904,\"y\":814.0806059829156,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":149,\"height\":120,\"seed\":818637444,\"groupIds\":[],\"roundness\":{\"type\":2},\"boundElements\":[{\"type\":\"text\",\"id\":\"VPyNT4z3\"},{\"id\":\"dLHBnFvY5Q66GXyAmtyTy\",\"type\":\"arrow\"},{\"id\":\"wCxF_NJkZ3uhVHD_b7tSN\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"ai\",\"frameId\":null},{\"type\":\"text\",\"version\":647,\"versionNonce\":1929891052,\"isDeleted\":false,\"id\":\"VPyNT4z3\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":485.46350619685904,\"y\":849.0806059829156,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":50,\"seed\":1464870972,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\\n计算\",\"rawText\":\"认证码计算\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"YWTj4EOZ2zYWQptmHq5Cx\",\"originalText\":\"认证码计算\",\"lineHeight\":1.25,\"baseline\":43,\"autoResize\":true,\"index\":\"aj\",\"frameId\":null},{\"type\":\"text\",\"version\":125,\"versionNonce\":2077804500,\"isDeleted\":false,\"id\":\"8oThIhTP\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":489.5,\"y\":940,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":91298236,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"id\":\"lpKmbkqPgPskY3hSsPJgq\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"密钥\",\"rawText\":\"密钥\",\"textAlign\":\"left\",\"verticalAlign\":\"top\",\"containerId\":null,\"originalText\":\"密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ak\",\"frameId\":null},{\"type\":\"arrow\",\"version\":410,\"versionNonce\":15782892,\"isDeleted\":false,\"id\":\"ZKvBdW62_Eg5sRNLRXiIO\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-199.9999999999999,\"y\":680,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":639,\"height\":0,\"seed\":814856836,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486814,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"8ddaUvTi-zJcXjR9trbmr\",\"gap\":1,\"focus\":-0.11059027777777777},\"endBinding\":{\"elementId\":\"psHAauVaayZ6G3RcyYaHX\",\"gap\":1,\"focus\":0.11059027777777777},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[639,0]],\"index\":\"al\",\"frameId\":null},{\"type\":\"arrow\",\"version\":571,\"versionNonce\":2111163244,\"isDeleted\":false,\"id\":\"dLHBnFvY5Q66GXyAmtyTy\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":417,\"y\":858.5725258576501,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":42.525406762407044,\"height\":0.9264295800153377,\"seed\":9794364,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486818,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"EDKSGvcti1uWqr_ZW42RL\",\"gap\":1,\"focus\":-0.3442622950819672},\"endBinding\":{\"elementId\":\"YWTj4EOZ2zYWQptmHq5Cx\",\"gap\":1,\"focus\":0.29411764705882354},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[42.525406762407044,-0.9264295800153377]],\"index\":\"am\",\"frameId\":null},{\"type\":\"arrow\",\"version\":989,\"versionNonce\":241270252,\"isDeleted\":false,\"id\":\"wCxF_NJkZ3uhVHD_b7tSN\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":593.5232061503019,\"y\":874.3625350927098,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":20.783258522059327,\"height\":16.207604211932562,\"seed\":1459989252,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486818,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"YWTj4EOZ2zYWQptmHq5Cx\",\"gap\":3.8201175058120995,\"focus\":-1.0130646339596443},\"endBinding\":{\"elementId\":\"2gH7wiYMFTSxW9-0fru-j\",\"gap\":1,\"focus\":-0.33285204401171553},\"lastCommittedPoint\":null,\"startArrowhead\":null,\"endArrowhead\":\"arrow\",\"points\":[[0,0],[20.783258522059327,16.207604211932562]],\"index\":\"an\",\"frameId\":null},{\"type\":\"arrow\",\"version\":370,\"versionNonce\":725607124,\"isDeleted\":false,\"id\":\"lpKmbkqPgPskY3hSsPJgq\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dotted\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":-240,\"y\":960,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":720,\"height\":0,\"seed\":2018180100,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"type\":\"text\",\"id\":\"uKo34RgY\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"3tUc1Xbg\",\"focus\":0.6,\"gap\":10.5},\"endBinding\":{\"elementId\":\"8oThIhTP\",\"focus\":-0.6,\"gap\":9.5},\"lastCommittedPoint\":null,\"startArrowhead\":\"triangle\",\"endArrowhead\":\"triangle\",\"points\":[[0,0],[720,0]],\"index\":\"ao\",\"frameId\":null},{\"type\":\"text\",\"version\":59,\"versionNonce\":323183724,\"isDeleted\":false,\"id\":\"uKo34RgY\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"dotted\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":70,\"y\":947.5,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#fab005\",\"width\":100,\"height\":25,\"seed\":525454212,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"同一个密钥\",\"rawText\":\"同一个密钥\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"lpKmbkqPgPskY3hSsPJgq\",\"originalText\":\"同一个密钥\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ap\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":299,\"versionNonce\":1080322132,\"isDeleted\":false,\"id\":\"WEyezplxzSgEoHMUIisK9\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":20,\"y\":620,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#228be6\",\"width\":96,\"height\":61,\"seed\":319025468,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"FhRQKAAA\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aq\",\"frameId\":null},{\"type\":\"text\",\"version\":246,\"versionNonce\":884209388,\"isDeleted\":false,\"id\":\"FhRQKAAA\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":48,\"y\":638,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":73126020,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"消息\",\"rawText\":\"消息\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"WEyezplxzSgEoHMUIisK9\",\"originalText\":\"消息\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ar\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":278,\"versionNonce\":433864148,\"isDeleted\":false,\"id\":\"X-UIeEmnXNGPTUndhcvCy\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":120,\"y\":620,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"aHzFoG51\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"as\",\"frameId\":null},{\"type\":\"text\",\"version\":237,\"versionNonce\":795752812,\"isDeleted\":false,\"id\":\"aHzFoG51\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":138,\"y\":638,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\",\"rawText\":\"认证码\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"X-UIeEmnXNGPTUndhcvCy\",\"originalText\":\"认证码\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"at\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":306,\"versionNonce\":1891459924,\"isDeleted\":false,\"id\":\"EDKSGvcti1uWqr_ZW42RL\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":320,\"y\":840,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#228be6\",\"width\":96,\"height\":61,\"seed\":319025468,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"DkOmj20U\"},{\"id\":\"dLHBnFvY5Q66GXyAmtyTy\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"au\",\"frameId\":null},{\"type\":\"text\",\"version\":252,\"versionNonce\":247213036,\"isDeleted\":false,\"id\":\"DkOmj20U\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":348,\"y\":858,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":40,\"height\":25,\"seed\":73126020,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"消息\",\"rawText\":\"消息\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"EDKSGvcti1uWqr_ZW42RL\",\"originalText\":\"消息\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"av\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":357,\"versionNonce\":1801312468,\"isDeleted\":false,\"id\":\"2gH7wiYMFTSxW9-0fru-j\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":615.3064646723612,\"y\":875.670868490053,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"y5YNdiwy\"},{\"id\":\"wCxF_NJkZ3uhVHD_b7tSN\",\"type\":\"arrow\"},{\"id\":\"XWFpPcoy5C6L9rYVF6aeF\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"aw\",\"frameId\":null},{\"type\":\"text\",\"version\":312,\"versionNonce\":1688718956,\"isDeleted\":false,\"id\":\"y5YNdiwy\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":633.3064646723612,\"y\":893.670868490053,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\",\"rawText\":\"认证码\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"2gH7wiYMFTSxW9-0fru-j\",\"originalText\":\"认证码\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"ax\",\"frameId\":null},{\"type\":\"rectangle\",\"version\":433,\"versionNonce\":1968414292,\"isDeleted\":false,\"id\":\"nFVrn-LpCvhX4PKQF4YWm\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":617.8354342450264,\"y\":696.8967271794988,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":96,\"height\":61,\"seed\":325964348,\"groupIds\":[],\"roundness\":{\"type\":3},\"boundElements\":[{\"type\":\"text\",\"id\":\"xjvVLn8g\"},{\"id\":\"XWFpPcoy5C6L9rYVF6aeF\",\"type\":\"arrow\"}],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"index\":\"ay\",\"frameId\":null},{\"type\":\"text\",\"version\":385,\"versionNonce\":1912283372,\"isDeleted\":false,\"id\":\"xjvVLn8g\",\"fillStyle\":\"hachure\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":635.8354342450264,\"y\":714.8967271794988,\"strokeColor\":\"#000000\",\"backgroundColor\":\"transparent\",\"width\":60,\"height\":25,\"seed\":12353412,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"认证码\",\"rawText\":\"认证码\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"nFVrn-LpCvhX4PKQF4YWm\",\"originalText\":\"认证码\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"az\",\"frameId\":null},{\"type\":\"arrow\",\"version\":75,\"versionNonce\":32764652,\"isDeleted\":false,\"id\":\"XWFpPcoy5C6L9rYVF6aeF\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":669.7884811970387,\"y\":768.8375697725116,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":1.877414131055275,\"height\":100.44165601146528,\"seed\":846240828,\"groupIds\":[],\"roundness\":null,\"boundElements\":[{\"type\":\"text\",\"id\":\"xKLhIM3x\"}],\"updated\":1755965486819,\"link\":null,\"locked\":false,\"startBinding\":{\"elementId\":\"nFVrn-LpCvhX4PKQF4YWm\",\"gap\":10.940842593012803,\"focus\":-0.06544051157962238},\"endBinding\":{\"elementId\":\"2gH7wiYMFTSxW9-0fru-j\",\"gap\":6.391642706076027,\"focus\":0.18630794026852904},\"lastCommittedPoint\":null,\"startArrowhead\":\"triangle\",\"endArrowhead\":\"triangle\",\"points\":[[0,0],[1.877414131055275,100.44165601146528]],\"index\":\"b00\",\"frameId\":null},{\"type\":\"text\",\"version\":10,\"versionNonce\":1312826220,\"isDeleted\":false,\"id\":\"xKLhIM3x\",\"fillStyle\":\"solid\",\"strokeWidth\":1,\"strokeStyle\":\"solid\",\"roughness\":1,\"opacity\":100,\"angle\":0,\"x\":650.2271882625663,\"y\":806.5583977782444,\"strokeColor\":\"#000000\",\"backgroundColor\":\"#40c057\",\"width\":41,\"height\":25,\"seed\":558451516,\"groupIds\":[],\"roundness\":null,\"boundElements\":[],\"updated\":1755965486707,\"link\":null,\"locked\":false,\"fontSize\":20,\"fontFamily\":1,\"text\":\"比较\",\"rawText\":\"比较\",\"textAlign\":\"center\",\"verticalAlign\":\"middle\",\"containerId\":\"XWFpPcoy5C6L9rYVF6aeF\",\"originalText\":\"比较\",\"lineHeight\":1.25,\"baseline\":18,\"autoResize\":true,\"index\":\"b01\",\"frameId\":null}],\"appState\":{\"theme\":\"light\",\"viewBackgroundColor\":\"#ffffff\",\"currentItemStrokeColor\":\"#ffffff\",\"currentItemBackgroundColor\":\"#fef37c\",\"currentItemFillStyle\":\"solid\",\"currentItemStrokeWidth\":1,\"currentItemStrokeStyle\":\"solid\",\"currentItemRoughness\":1,\"currentItemOpacity\":100,\"currentItemFontFamily\":1,\"currentItemFontSize\":20,\"currentItemTextAlign\":\"left\",\"currentItemStartArrowhead\":\"triangle\",\"currentItemEndArrowhead\":\"triangle\",\"currentItemArrowType\":\"round\",\"scrollX\":532.6311464659154,\"scrollY\":474.9073580186521,\"zoom\":{\"value\":1},\"currentItemRoundness\":\"sharp\",\"gridSize\":20,\"gridStep\":5,\"gridModeEnabled\":false,\"gridColor\":{\"Bold\":\"rgba(217, 217, 217, 0.5)\",\"Regular\":\"rgba(230, 230, 230, 0.5)\"},\"colorPalette\":{},\"currentStrokeOptions\":null,\"frameRendering\":{\"enabled\":true,\"clip\":true,\"name\":true,\"outline\":true},\"objectsSnapModeEnabled\":false,\"activeTool\":{\"type\":\"selection\",\"customType\":null,\"locked\":false,\"lastActiveTool\":null}},\"files\":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener(\"resize\",e),()=>window.removeEventListener(\"resize\",e)},[t]),React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"excalidraw-wrapper\",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById(\"对称加密-202306071102excalidraw.md1\");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();\n常见对称加密算法：\n\nDES\nAES\n\n消息认证码的通信机制：\n非对称加密\n密钥交换/协商\n这个过程是很重要的，尤其是对与对称加密算法而言。对称加密要想work，必须使得通信的双方具备同一个密钥，且不能被第三方知晓。要做到这一点，有两条路子：\n\n提前（可能是很久之前，具备预见性）在通信的双方使用安全的方法部署好同一个密钥，供后续通信使用；\n通信前使用安全的方法确定密钥（密钥交换/协商）。\n\n第一种方式显然不太科学，缺乏灵活性和预见性。第二种方式有个依赖：如何才能安全地交换密钥信息呢？\n基于加密通道传输密钥\n这种就是使用非对称加密算法，发送方使用接收方公钥加密密钥（这是用于后续通信的密钥），然后直接发给接收方，接收方使用私钥解密，这样双方都有了同一个密钥。\n基于通信双方共享的密钥\n比如PSK算法，双方预先部署若干个共享的密钥，通过密钥编号（明文传输）协商使用哪个密钥。这是一种比较朴素的加密通信，相当少双方持有同一个密码本，然后发送“密文”（密钥编号），双方查询密码本确定明文（后续通信要用的密钥）。其实密钥编号可被中间人获取，但他不知道编号的意义。\nsee also DH 算法。\n\nhttps://www.peterjxl.com/JavaSE/encrypt-dh/\nhttps://blog.51cto.com/u_13291771/2798365\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n发送方发送方密文密文接收方公钥接收方公钥摘要算法摘要算法消息消息发送方私钥发送方私钥摘要摘要签名签名合并合并接收方接收方摘要算法摘要算法消息消息密文密文接收方私钥接收方私钥发送方公钥发送方公钥签名签名比对比对摘要摘要摘要摘要这种方式既可以防止窃听，也可以防止冒充和篡改。因为消息中有发送方的签名，但中间人拿不到这个签名。接收方收到这个签名也可以解出消息摘要进行比对，防止消息被篡改，也可以验证消息的发送者。这种方式既可以防止窃听，也可以防止冒充和篡改。因为消息中有发送方的签名，但中间人拿不到这个签名。接收方收到这个签名也可以解出消息摘要进行比对，防止消息被篡改，也可以验证消息的发送者。Text is not SVG - cannot display\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n发送方发送方明文明文密文密文接收方公钥接收方公钥接收方接收方明文明文密文密文接收方私钥接收方私钥这种方式可以防止窃听，因为只有接收方私钥可以解密。但不能防止冒充和篡改，因为中间人可以使用接收方公钥伪造消息。这种方式可以防止窃听，因为只有接收方私钥可以解密。但不能防止冒充和篡改，因为中间人可以使用接收方公钥伪造消息。Text is not SVG - cannot display",
		"tags": [ "note","加密","安全","密钥"]
},

{
		"title": 202306262103,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306262103cmake-template/",
		"content": "cmake_minimum_required(VERSION 3.20)\nproject(GREDialing VERSION 0.1)\n\nmessage(STATUS &quot;CMake version: &quot; ${CMAKE_VERSION})\nif(NOT ${CMAKE_VERSION} VERSION_LESS &quot;3.2&quot;)\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nelse()\nmessage(STATUS &quot;Checking compiler flags for C++11 support.&quot;)\n# Set C++11 support flags for various compilers\ninclude(CheckCXXCompilerFlag)\ncheck_cxx_compiler_flag(&quot;-std=c++11&quot; COMPILER_SUPPORTS_CXX11)\ncheck_cxx_compiler_flag(&quot;-std=c++0x&quot; COMPILER_SUPPORTS_CXX0X)\nif(COMPILER_SUPPORTS_CXX11)\nmessage(STATUS &quot;C++11 is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11 -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11&quot;)\nendif()\nelseif(COMPILER_SUPPORTS_CXX0X)\nmessage(STATUS &quot;C++0x is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x&quot;)\nendif()\nelse()\nmessage(STATUS &quot;The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.&quot;)\nendif()\nendif()\n\n# 禁止 C++ assert terminate 程序\n# add_definitions(-DNDEBUG)\n\n# ASIO 不使用 Boost 库\n#add_definitions(-DASIO_STANDALONE)\n\n# Spdlog 使用外部 Fmt 库\n#add_definitions(-DSPDLOG_FMT_EXTERNAL)\n\n# Jwt-cpp 使用外部 Json 库\n# ADD_DEFINITIONS(-DJWT_CPP_JSON_EXTERNAL)\n\n# add_definitions(-DGLOG_ON)\n\n# 生成编译命令文件，给 YCM/Clangd 使用\nset(CMAKE_EXPORT_COMPILE_COMMANDS ON)\n\nADD_COMPILE_OPTIONS(-g)\n\n#设置输出目录\n# set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)\n\n#加入包含目录\n# include_directories(${CMAKE_CURRENT_SOURCE_DIR}/service/src/main/cpp/decryptSDK/include)\ninclude_directories(decryptSDK/include)\ninclude_directories(/home/hubingbing/rapidjson/include)\ninclude_directories(/home/hubingbing/concurrentqueue)\n# include_directories(/opt/Euler_compile_env/usr/src/kernels/4.19.90-vhulk2107.1.0.h699.eulerosv2r10.aarch64/include)\n\n#静态库目录\n#link_directories(/usr/lib64/mysql)\n\n#logger lib\n#add_subdirectory(decryptSDK)\n\n# aux_source_directory(decryptSDK SRCS) #加入目录下所有源码\n# add_executable(demo ${SRCS}) #生成可执行文件\n# target_link_libraries(demo logger) #链接logger库\n\nset(EXECUTABLE_OUTPUT_PATH &quot;${CMAKE_CURRENT_SOURCE_DIR}/build&quot;)\nmessage(STATUS &quot;binary dir is ${EXECUTABLE_OUTPUT_PATH}&quot;)\n\nset(BUILD_SCRATCH_TARGET 0)\n\nif(BUILD_SCRATCH_TARGET)\nfile(GLOB_RECURSE scratch_srcs scratch/*.cpp)\n# message(STATUS &quot;all scratchs: ${scratch_srcs}&quot;)\nforeach(srcfile IN LISTS scratch_srcs)\n# Get file name without directory\nget_filename_component(elfname ${srcfile} NAME_WE)\nmessage(STATUS &quot;${elfname} .. ${srcfile}&quot;)\nadd_executable(${elfname} ${srcfile})\ntarget_link_libraries(${elfname} pthread)\nendforeach()\nendif()\n\n# add_executable(main ../main.cpp)\n# add_executable(server udp_server.cpp)\n# add_executable(ConfigReader ConfigReader.cpp)\n# add_executable(packet_handler packet_handler.cpp)\n\nset(BUILD_MAIN_TARGET 1)\n\nif(BUILD_MAIN_TARGET)\nset(target main)\n\nset(src_lst main.cpp ConfigReader.cpp packet_handler.cpp SslClient.cpp packet.cpp)\nadd_executable(${target} ${src_lst})\n\naux_source_directory(decryptSDK KMC_DIR)\ntarget_sources(${target} PRIVATE ${KMC_DIR})\ntarget_include_directories(${target} PRIVATE /home/hubingbing/cloud-frame-kmc/include/)\ntarget_link_directories(${target} PRIVATE /home/hubingbing/cloud-frame-kmc/lib_so/)\ntarget_link_libraries(${target} kmcjni)\n\ntarget_link_libraries(${target} ssl crypto pthread)\nendif()\n# target_link_libraries(debug pthread)\n# target_link_libraries(server pthread)\n\nnew:\ncmake_minimum_required(VERSION 3.20)\nproject(GREDialing VERSION 0.1)\n\nmessage(STATUS &quot;CMake version: &quot; ${CMAKE_VERSION})\nif(NOT ${CMAKE_VERSION} VERSION_LESS &quot;3.2&quot;)\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nelse()\nmessage(STATUS &quot;Checking compiler flags for C++11 support.&quot;)\n# Set C++11 support flags for various compilers\ninclude(CheckCXXCompilerFlag)\ncheck_cxx_compiler_flag(&quot;-std=c++11&quot; COMPILER_SUPPORTS_CXX11)\ncheck_cxx_compiler_flag(&quot;-std=c++0x&quot; COMPILER_SUPPORTS_CXX0X)\nif(COMPILER_SUPPORTS_CXX11)\nmessage(STATUS &quot;C++11 is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11 -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11&quot;)\nendif()\nelseif(COMPILER_SUPPORTS_CXX0X)\nmessage(STATUS &quot;C++0x is supported.&quot;)\nif(${CMAKE_SYSTEM_NAME} MATCHES &quot;Darwin&quot;)\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x -stdlib=libc++&quot;)\nelse()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++0x&quot;)\nendif()\nelse()\nmessage(STATUS &quot;The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.&quot;)\nendif()\nendif()\n\n# 禁止 C++ assert terminate 程序\n# add_definitions(-DNDEBUG)\n\n# ASIO 不使用 Boost 库\n#add_definitions(-DASIO_STANDALONE)\n\n# Spdlog 使用外部 Fmt 库\n#add_definitions(-DSPDLOG_FMT_EXTERNAL)\n\n# Jwt-cpp 使用外部 Json 库\n# ADD_DEFINITIONS(-DJWT_CPP_JSON_EXTERNAL)\n\n# add_definitions(-DGLOG_ON)\n\n# 生成编译命令文件，给 YCM/Clangd 使用\nset(CMAKE_EXPORT_COMPILE_COMMANDS ON)\n\nADD_COMPILE_OPTIONS(-g)\n\n#设置输出目录\n# set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)\n# set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/bin)\n\n#加入包含目录\n# include_directories(${CMAKE_CURRENT_SOURCE_DIR}/service/src/main/cpp/decryptSDK/include)\n# include_directories(decryptSDK/include)\n# include_directories(/home/hubingbing/concurrentqueue)\ninclude_directories(json/include) # for baize json\n\n#静态库目录\n#link_directories(/usr/lib64/mysql)\n\n#logger lib\n#add_subdirectory(decryptSDK)\n# add_subdirectory(json)\n\naux_source_directory(json/src BAIZE_JSON_SRC)\n# aux_source_directory(decryptSDK SRCS) #加入目录下所有源码\n# add_executable(demo ${SRCS}) #生成可执行文件\n# target_link_libraries(demo logger) #链接logger库\n\nset(EXECUTABLE_OUTPUT_PATH &quot;${CMAKE_CURRENT_SOURCE_DIR}/build&quot;)\nmessage(STATUS &quot;binary dir is ${EXECUTABLE_OUTPUT_PATH}&quot;)\n\nset(BUILD_SCRATCH_TARGET 1)\nif(BUILD_SCRATCH_TARGET)\nfile(GLOB_RECURSE scratch_srcs scratch/*.cpp)\n# message(STATUS &quot;all scratchs: ${scratch_srcs}&quot;)\nforeach(srcfile IN LISTS scratch_srcs)\n# Get file name without directory\nget_filename_component(elfname ${srcfile} NAME_WE)\nmessage(STATUS &quot;${elfname} .. ${srcfile}&quot;)\nif (${elfname} STREQUAL &quot;test_logger&quot;)\nadd_executable(${elfname} ${srcfile} SimpleLogger.cpp)\nelseif(${elfname} STREQUAL &quot;cqueue_test&quot;)\nadd_executable(${elfname} ${srcfile} helper.cpp SimpleLogger.cpp packet_handler.cpp ConfigReader.cpp packet.cpp ${BAIZE_JSON_SRC})\ntarget_link_libraries(${elfname} securec)\nelseif(${elfname} STREQUAL &quot;baizejson&quot;)\nadd_executable(${elfname} ${srcfile} ${BAIZE_JSON_SRC})\ntarget_link_libraries(${elfname} securec)\nelse()\nadd_executable(${elfname} ${srcfile})\nendif()\ntarget_link_libraries(${elfname} pthread)\nendforeach()\nendif()\n\n# add_executable(main ../main.cpp)\n# add_executable(server udp_server.cpp)\n# add_executable(ConfigReader ConfigReader.cpp)\n# add_executable(packet_handler packet_handler.cpp)\n\nset(LIBKMC_PATH decryptSDK)\nset(KMC_LINK_OPTION &quot;STATIC&quot;)\nset(BUILD_MAIN_TARGET 1)\nif(BUILD_MAIN_TARGET)\nset(target gredialingagent) # 可执行文件名\nif(${CMAKE_BUILD_TYPE} MATCHES &quot;RELEASE&quot;)\nmessage(STATUS &quot;build with release, add compile options to remove debug info...&quot;)\n# 安全编译选项：http://3ms.huawei.com/hi/group/2028271/wiki_6704184.html\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fstack-protector-strong -Wl,-z,relro,-z,now,-z,noexecstack -s -fPIE -pie&quot;)\nendif()\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} \\\n-Wall -Wextra -Weffc++ -Wconversion -Wsign-conversion \\\n-Wtrampolines -Wdate-time -Wfloat-equal -Wswitch-default \\\n-Wshadow -Wno-return-local-addr -Wcast-qual -Wcast-align -Wvla -Wunused \\\n-Wundef -Wnon-virtual-dtor -Woverloaded-virtual -pedantic-errors -Wsizeof-array-argument \\\n&quot;)\n# message(STATUS &quot;compile options are ${CMAKE_CXX_FLAGS}&quot;)\n\naux_source_directory(./ src_lst)\n# message(STATUS &quot;source list of ${target}: ${src_lst}&quot;)\nadd_executable(${target} ${src_lst})\ntarget_sources(${target} PRIVATE ${BAIZE_JSON_SRC})\n\nif(${KMC_LINK_OPTION} STREQUAL &quot;STATIC&quot;)\nadd_subdirectory(decryptSDK) # 编译kmc静态库\ntarget_link_directories(${target} PRIVATE ${LIBKMC_PATH}/lib/)\n# target_link_libraries(${target} decrypt libkmcext.a libkmc.a libsecurec.a libsdp.a libssl.a libcrypto.a dl)\ntarget_link_libraries(${target} decrypt kmcext kmc securec sdp ssl crypto dl)\nelse()\naux_source_directory(decryptSDK KMC_DIR)\ntarget_sources(${target} PRIVATE ${KMC_DIR})\ntarget_include_directories(${target} PRIVATE ${LIBKMC_PATH}/include/)\ntarget_link_directories(${target} PRIVATE /home/hubingbing/cloud-frame-kmc/lib_so/)\ntarget_link_libraries(${target} kmcjni)\nendif()\n\n# find_library(KMC_STATIC_LIB kmc sdp /home/hubingbing/cloud-frame-kmc/lib_a/)\n# message(STATUS &quot;finded lib: ${KMC_STATIC_LIB}&quot;)\n\ntarget_link_libraries(${target} pthread)\nendif()\n# target_link_libraries(debug pthread)\n# target_link_libraries(server pthread)\n\nsee also 202304230920 cmake learn",
		"tags": ["add_definitions", "add_definitions", "设置输出目录", "加入包含目录", "静态库目录", "link_directories", "logger", "add_subdirectory", "加入目录下所有源码", "生成可执行文件", "链接logger库", "add_definitions", "add_definitions", "设置输出目录", "加入包含目录", "静态库目录", "link_directories", "logger", "add_subdirectory", "加入目录下所有源码", "生成可执行文件", "链接logger库", "note","cmake"]
},

{
		"title": 202306270923,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306270923memcpy/",
		"content": "memcpy拷贝字符串数组时，不会自动拷贝null-terminator，除非指定的size包含它。\n完美转发：http://c.biancheng.net/view/7868.html\nC++11 标准中规定，通常情况下右值引用形式的参数只能接收右值，不能接收左值。但对于函数模板中使用右值引用语法定义的参数来说，它不再遵守这一规定，既可以接收右值，也可以接收左值（此时的右值引用又被称为“万能引用”）。\ntemplate &lt;typename T&gt;\nclass A {\n// 注意这里并非完美转发，因为T是类模板参数，而非函数模板参数\nvoid foo(T&amp;&amp;); // 只能接收右值引用\n\ntemplate &lt;typename U&gt;\nvoid bar(U&amp;&amp;); // 这里就是完美转发，可以接受左值/右值引用\n};",
		"tags": [ "note"]
},

{
		"title": 202306272227,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306272227类型转换/",
		"content": "dynamic_cast 只能用于继承体系下的转换，一般用于将基类转换为子类，需要考虑是不是设计有问题？\nconst_cast用于去除对象的const/volatile属性，一般用于适应接口，且明确接口不会修改对象。\nreinterpret_cast 重新表达，告诉编译器将这段内存解释为指定的数据类型。因为我们知道，类型只是告诉编译器如何解释一段内存，内存还是那个内存，数据还是那份数据，在二进制上，它们没有任何区别。类型只是辅助解释！参见A view of memory and fundamental data types in cpp. 不安全，尽量少用。但用得保证能用对。\nstatic_cast 最常用。",
		"tags": [ "note","cpp","cast"]
},

{
		"title": 202306272237,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306272237整数运算/",
		"content": "常见整数运算的问题\n\n有符号整数运算时出现溢出（undefined behavior）\n无符号整数运算时出现回绕（其实也是溢出）\n整数类型转换导致符号错误\n按位操作有符号整数导致符号错误\n\n整数运算不当带来的风险\n\n运算产生异常\n死循环（将整数运算作为循环判断条件）\n内存分配错误（将整数运算结果作为内存分配大小的参数）\n内存复制、指针偏移、数组索引等出现越界\n\n建议\n对于外部输入（不可控）的整数，需要做相应的边界检查！\n\n如果参与运算的整数来自外部或者整数的绝对值偏大，需要考虑运算后是否出现溢出\n特别关注整数被用在指针偏移、数组索引、内存拷贝长度、内存分配大小、循环判断条件等场景\n\n这里尤其注意，低于 int 类型的无符号整数做位运算时，会进行整型提升！",
		"tags": [ "note","cpp"]
},

{
		"title": 202306281018,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306281018循环队列参考/",
		"content": "下列材料可供实现并发循环队列时参考：\n\nhttps://github.com/facebook/folly/blob/main/folly/ProducerConsumerQueue.h\nhttps://moodycamel.com/blog/2013/a-fast-lock-free-queue-for-c++.htm\nhttps://preshing.com/20120625/memory-ordering-at-compile-time/\nhttps://github.com/cameron314/readerwriterqueue",
		"tags": [ "note","循环队列","cpp"]
},

{
		"title": 202306281021,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306281021资源管理/",
		"content": "资源访问校验\n当外部数据参与数组索引、内存申请大小、内存复制长度、指针偏移等操作，必须对数据大小进行严格校验，否则可能发生严重问题。\nsee also 202306272237整数运算\n在传递数组时，同时传递数组长度\n数组在函数传参时会退化为指针，导致数组长度信息丢失，容易造成数组索引合法性检查错误，引发越界读写问题。\nvoid test()\n{\nchar array[10];\ninit_array(array);\n}\n\nvoid init_array(char arr[])\n{\n// 【错误】这里计算的是 char* 指针的大小\nfor (size_t i = 0; i &lt; sizeof(arr); ++i) ...\n}\n\n建议：\n\n如果函数只接受固定长度的数组作为参数，可以定义参数类型为数组引用或std::array\n如果函数要兼容C接口，那么应该把长度作为另外一个参数也传递进去\n\nvoid init_array(char arr[], size_t len); // ok\n\nvoid init_arr(char arr[]) // error, arr deduced to char*\n{\ncout &lt;&lt; &quot;nake arr&quot; &lt;&lt; sizeof(arr) &lt;&lt; endl;\n}\n\nvoid init_arr_ref(char (&amp;arr_ref)[10]) // ok, pass by ref\n{\ncout &lt;&lt; &quot;arr ref&quot; &lt;&lt; sizeof(arr_ref) &lt;&lt; endl;\n}\n\ntemplate&lt;typename T, size_t N&gt;\nvoid init_arr_temp(T (&amp;arr_temp)[N]) // ok, template instantiate to init_arr_temp&lt;char, 10UL&gt;(char (&amp;arr_temp)[10])\n{\ncout &lt;&lt; &quot;arr temp&quot; &lt;&lt; sizeof(arr_temp) &lt;&lt; endl;\n}\n\nRAII管理资源的声明周期\n#RAII\n资源的获取和释放是成对操作（例如new/delete，fopen/fclose，lock/unlock等）恰好能对应c++语言对称的构造函数和析构函数。利用c++对象的生命周期来管理资源的声明周期，是一种常见的策略。\n不要访问超出生命周期的对象\n禁止将局部变量的地址返回到其作用域以外，\nstring_view get_data()\n{\nconst char s[] = &quot;hello world&quot;;\nreturn s; // 【错误】，会间接将s的地址返回到其作用域外\n}\n\n当lambda会逃逸处函数外面时，禁止按引用捕获局部变量，\nvoid foo()\n{\nint local_var = 0;\n...\n// 【错误】，lambda不确定何时、在何地（线程）执行，而local_val的生命周期在此处即将结束\nthread_pool.QueueWork([&amp;] { process(local_val); });\n}",
		"tags": ["RAII", "note","cpp","resource-manage"]
},

{
		"title": 202306281126,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306281126异常处理/",
		"content": "异常仅用于处理错误\n不要滥用异常。\n不要盲目catch，不能处理的异常应继续向上传播\n避免在不宜抛异常的地方抛出异常\n构造异常的操作本身不应抛出异常，\n// // 如果exp本身抛出异常，这一句实际抛出的就是exp抛出的异常，而非程序员原本想抛出的异常，confusing\nthrow exp;\n\n下面特定的函数不宜抛异常：\n\n全局变量和线程局部变量的构造函数：全局变量构造时，main函数还没有执行，无法捕获这个异常\n析构函数\ndelete操作符\n移动构造函数\n移动赋值操作符\nswap函数\n\n4、5、6会被标准库调用，而其调用时不期望异常抛出。在这些地方抛异常将无法处理、或破坏标准库的某些性质。\n异常的抛出与捕获\n\n只使用std::exception的派生类实例作为异常对象，不要使用基本类型\n抛异常时，抛对象本身而非指针，否则会造成回收责任不明确，简而言之new的异常对象谁负责delete？\n以左值引用的形式捕获异常，如果按值捕获异常的基类，会导致对象被切片。因为只有引用和指针有动态绑定，按值传递会导致类型转换（派生类向基类隐式转换），导致对象被切片。\ntry-catch语句有多个catch子句时，catch的顺序应该是先捕获派生类，后捕获基类",
		"tags": [ "note","cpp","exception","异常处理"]
},

{
		"title": 202306301718,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202306301718类成员是否可以是类本身的类型/",
		"content": "类内成员如果要定义为本身类型的话，只能通过指针或者静态变量定义。原因参考： https://www.zhihu.com/question/341035289/answer/1047747826",
		"tags": [ "note","cpp","class"]
},

{
		"title": 202307031654,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202307031654GIT-rebase撤销/",
		"content": "https://juejin.cn/s/git 撤销rebase\n更改指定commit的msg：https://docs.github.com/zh/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/changing-a-commit-message",
		"tags": [ "note"]
},

{
		"title": 202307051438,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202307051438CPP调试-coredump/",
		"content": "Segmentation fault\n中文叫做段错误，非常令人头疼的问题，默认没有任何提示信息。可能导致段错误的原因有：\n参考：https://www.cnblogs.com/kuliuheng/p/11698378.html\n\n解除引用一个包含非法值\n解除引用一个空指针(常常由函数返回，并未经检查就使用)\n在未得到正确的权限时进行访问。例如，试图往一个只读的文本段储存值就会引发段错误。\n用完了栈或者堆空间(虚拟内存虽然巨大，但也有可能使用殆尽)\n\n生成coredump文件\n# 查看当前coredump文件大小限制\n$ ulimit -c\n\n# 如果为0，则需要解除限制，注意只对当前shell进程生效\n$ ulimit -c unlimited\n\n# 生成coredump文件的命名格式\n$ cat /proc/sys/kernel/core_pattern\n|/usr/share/apport/apport %p %s %c %P\n\n# 更改文coredump文件命名规则\n$ sudo vi /etc/sysctl.conf\nkernel.core_pattern=/var/crash/%E.%p.%t.%s\n$ sudo sysctl -p\n\n我们设置 core dump 目录为/var/crash，core dump 的命名方式为%E.%p.%t.%s，它们的含义：\n\n%E：程序文件的完整路径（路径中的/会被!替代）\n%p：进程 ID\n%t：进程崩溃的时间戳\n%s：哪个信号让进程崩溃\n\n在获取coredump文件后，执行gdb进行调试\n$ gdb &lt;file&gt; &lt;file.coredump&gt;\n(gdb) backtrace # 打印调用栈\n\n使用coredumpctl info可查找coredump文件位置。\nSignal handler\n产生段错误时一般会触发一个SIGSEGV信号，我们可以添加该信号的处理函数，在程序退出之前记录一些信息。我们甚至可以使用backtrace(3)函数来保存当前栈内容。\n#include &lt;csignal&gt;\n#include &lt;execinfo.h&gt;\n\n#define SIZE 100\nvoid dump(int signo)\n{\nfprintf(stderr,&quot;catch Segmentation fault!!!\\n&quot;);\nFILE *fh;\nif(!(fh = fopen(&quot;/tmp/dbg_msg.log&quot;, &quot;w+&quot;)))\nexit(0);\nvoid *buffer[100];\nint nptrs;\nnptrs = backtrace(buffer,SIZE);\nbacktrace_symbols_fd(buffer, nptrs, fileno(fh));\nfflush(fh);\nexit(-1);\n}\n\nmain (void)\n{\nsignal(SIGSEGV, &amp;dump);\n*((int*)NULL) = 0;\n\nreturn 0;\n}\n\nReferences\n\nhttp://senlinzhan.github.io/2017/12/31/coredump/\n段错误(Segmentation fault)产生的原因以及调试方法\nhttps://www.cnblogs.com/linux-37ge/p/12781176.html\nhttps://www.cnblogs.com/kuliuheng/p/11698378.html",
		"tags": ["include", "include", "define", "note","cpp","debug","coredump","gdb"]
},

{
		"title": 202307121011,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202307121011开源协议解读/",
		"content": "开源大类\n\n常见许可证类型\n\n典型软件\n\n触发代码开源义务前提条件\n\n开源要求和范围\n\n规避开源方式\n\nBSD类\n\nApache/BSD/MIT等\n\nTomcat\nOpenSSL\n\n无\n\n无\n\n不涉及\n\nMPL类\n\nMPL/EPL等\n\nFireFox\nEclipse\n\n产品集成使用该软件，并对外分发或销售。\n产品对该软件进行了修改。\n\n若无修改，则无需开源。\n若对其进行了修改，需将修改的部分开源。\n\n使用时不做任何修改\n\nGPL类\n\nLGPL\n\nHibernate\nglibc\n\n产品集成使用该软件，并对外分发或销售。\n\n软件本身须开源。具有传染性，与其静态链接部分的代码也必须以LGPL许可开源；动态链接则不被传染。\n\n动态链接使用，仅开源其软件本身即可，产品代码可免受传染。\n\nGPL\n\nBusybox\nlinux kernel\n\n产品集成使用该软件，并对外分发或销售。\n\n软件本身须开源。具有传染性，与其有链接关系的代码都必须以GPL许可对外开源，即与该软件在同一进程中运行的代码都必须开源\n\n进程隔离，独立于产品进程运行，仅开源其软件本身即可，产品代码可免受传染\n\nAGPL\n\nBerkeley_DB\n\n产品集成使用该软件。\n\n在GPL上增加了一条限制：即便不对外分发，只要在网络服务器上使用AGPL软件提供网络服务，就需要履行相关开源义务。\n例如： Berkeley_DB，即使没有“分发”动作，通过WEB形式为用户提供服务，也要履行对外开源义务。\n\n同GPL\n\nSSPL\n\nMongoDB\n\n产品将该软件做为服务或利用该软件的能力向公司外的第三方提供服务。\n\n软件本身须开源。具有传染性，使用开源软件相关的服务组件也要开源。相对AGPL，任何试图将开源软件作为服务加以利用的组件，都必须开放用于提供此类服务的软件的源代码。\n\n谨慎使用！对于使用SSPL协议软件，向第三方提供服务会导致软件包整体开源。只能向公司内部人员开放。\n\n常见许可证类型\n触发代码开源义务前提条件\n开源要求和范围\n\nBSD类，如：Apache/BSD/MIT等\n无\n无\n\nMPL类，如：MPL/EPL/CDDL等\n-  产品集成使用该软件，并对外分发或销售-  产品对该软件进行了修改\n- 若无修改，则无需开源- 若对其进行了修改，需将修改的部分开源\n\nLGPL\nl  产品集成使用该软件，并对外分发或销售\nl  软件本身须开源l  具有传染性，与其静态链接部分的代码也必须以LGPL许可开源；动态链接则不被传染。l  若对其进行修改，若修改后增加的功能实现依赖于产品软件的数据或功能，则产品代码也会被传染。l  开源的代码要能够通过编译l  若为面向个人或家庭消费者的设备类产品，如手机、平板、电视机顶盒等，V3版本还要允许用户能够将编译出的二进制文件安装回产品设备\n\nGPL\nl  产品集成使用该软件，并对外分发或销售\nl  软件本身须开源。l  具有传染性，与其有链接关系的代码都必须以GPL许可对外开源，即与该软件在同一进程中运行的代码都必须开源l  开源的代码要能够通过编译l  若为面向个人或家庭消费者的设备类产品，如手机、平板、电视机顶盒等，V3版本还要允许用户能够将编译出的二进制文件安装回产品设备\n\nAGPL\nl  产品集成使用该软件，对外分发、销售，或是通过web对外提供服务\nl  同GPL",
		"tags": [ "note","oss","开源"]
},

{
		"title": 202307261811,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202307261811vscode开发cpp配置/",
		"content": "首先安装必要插件，\n\nms-vscode-remote.remote-ssh：远程开发必备插件，可以使用ssh连接打开远端目录作为workspace\nllvm-vs-code-extensions.vscode-clangd：提供c++ code intelligence功能，安装完此插件后，需要禁用或移除微软本身提供的c++插件（如已安装）\nvadimcn.vscode-lldb：提供调试功能\n\n如遇网络问题，可从vsixhub手动下载安装插件。\n\n列一下我的插件列表：\n本地：\n$ code --list-extensions\nhuizhou.githd\njeff-hykin.better-cpp-syntax\nmhutchie.git-graph\nms-vscode-remote.remote-ssh\nms-vscode-remote.remote-ssh-edit\nms-vscode-remote.remote-wsl\nms-vscode.remote-explorer\npeaceshi.syntax-highlight\nvscodevim.vim\n\n远端：\n$ code --list-extensions\nExtensions installed on SSH: arm虚拟机(x.x.x.x):\nhuizhou.githd\nllvm-vs-code-extensions.vscode-clangd\nmhutchie.git-graph\ntwxs.cmake\nvadimcn.vscode-lldb\n\n远程开发配置\n在vscode中，按下ctrl+shift+p打开命令面板，键入如下命令：\n\n打开本地ssh_config文件，编辑连接信息：\n\n之后就可以在vscode中，连接这台机器，打开远端目录。\n\nTIPS：为了避免每次都输入ssh登录密码，可以配置ssh免密登录。\n\nclangd配置\n远程机器需要安装clangd软件包，如果没有，需要安装一个。如果安装不了，可以手动编译。内网llvm仓库地址：https://codehub-y.huawei.com/Performance_Abyss/LTEL2Tools/llvm-project/\n然后在远程机器的vscode全局配置里面配上clangd可执行文件的路径：\n// file:///home/hubingbing/.vscode-server/data/Machine/settings.json\n{\n&quot;clangd.path&quot;: &quot;/home/hubingbing/llvm-project/build/bin/clangd&quot;,\n&quot;clangd.arguments&quot;: [\n// 在后台自动分析文件（基于 complie_commands)\n&quot;--background-index&quot;,\n// 标记 compelie_commands.json 文件的目录位置\n// 关于 complie_commands.json 如何生成可见我上一篇文章的末尾\n// https://zhuanlan.zhihu.com/p/84876003\n// &quot;--compile-commands-dir=build&quot;,\n// 同时开启的任务数量\n&quot;-j=12&quot;,\n// 告诉 clangd 用那个 clang 进行编译，路径参考 which clang++的路径\n&quot;--query-driver=/usr/bin/g++&quot;,\n// clang-tidy 功能\n&quot;--clang-tidy&quot;,\n&quot;--clang-tidy-checks=performance-*,bugprone-*&quot;,\n// 全局补全（会自动补充头文件）\n&quot;--all-scopes-completion&quot;,\n// 更详细的补全内容\n&quot;--completion-style=detailed&quot;,\n// 补充头文件的形式\n&quot;--header-insertion=iwyu&quot;,\n// pch 优化的位置\n&quot;--pch-storage=disk&quot;,\n],\n}\n\n配置完成后，打开一个cpp文件，\n\n状态栏中的clangd有输出，表示配置成功。至此可以在vscode中享受clangd带来的intelligence功能，\n\n调试\n安装好codelldb插件后，选择一个cpp文件，按F5，vscode会自动提示你创建一个调试任务（如果之前没配过）。简单配置成下面的样子即可，\n// file:///.vscode/launch.json\n{\n// Use IntelliSense to learn about possible attributes.\n// Hover to view descriptions of existing attributes.\n// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n// for variables see: https://code.visualstudio.com/docs/editor/variables-reference\n&quot;version&quot;: &quot;0.2.0&quot;,\n&quot;configurations&quot;: [\n{\n&quot;type&quot;: &quot;lldb&quot;,\n&quot;request&quot;: &quot;launch&quot;,\n&quot;name&quot;: &quot;Debug&quot;,\n&quot;args&quot;: [],\n&quot;cwd&quot;: &quot;${workspaceFolder}/service/src/main/cpp&quot;,\n&quot;program&quot;: &quot;service/src/main/cpp/build/${fileBasenameNoExtension}&quot;,\n},\n{\n// see: https://github.com/vadimcn/codelldb/blob/master/MANUAL#connecting-to-lldb-server-agent\n// and https://github.com/vadimcn/codelldb/discussions/779\n&quot;type&quot;: &quot;lldb&quot;,\n&quot;request&quot;: &quot;launch&quot;,\n&quot;name&quot;: &quot;RemoteLaunch&quot;,\n&quot;args&quot;: [],\n&quot;program&quot;: &quot;service/src/main/cpp/build/${fileBasenameNoExtension}&quot;,\n&quot;initCommands&quot;: [\n&quot;platform select remote-linux&quot;,\n// &quot;platform connect connect://127.0.0.1:12306&quot;,\n&quot;platform connect connect://10.136.193.188:12306&quot;,\n],\n&quot;expressions&quot;: &quot;native&quot;,\n}\n]\n}\n\n这样，即可在本地调试程序，\n\n远程调试\n此外，lldb还支持远程调试，将lldb-server及相关文件拷贝到目标机器：\n\n在远程机器上执行lldb-server起监听，然后在本机配置远程调试任务（上述launch.json中的第二个就是用于远程调试）。然后，当你执行这个调试任务，其实就是将可执行文件拷贝到远程机器上执行，并启用调试功能。\n\n此外远程调试还有一个bonus，可以root权限进行调试！只需使用root权限执行lldb-server即可。\n\n参考：\n\nhttps://github.com/vadimcn/codelldb/discussions/779\nhttps://github.com/vadimcn/codelldb/blob/master/MANUAL#connecting-to-lldb-server-agent\n\n例如：\nint sockfd = socket(AF_INET, SOCK_RAW, IPPROTO_RAW);\n\n如果不用root权限执行，会返回errno 1, EPERM，即permission denied. 为了能够正常创建socket并debug，必须使用root身份运行debugger.\n\n可以看到socket创建成功了，且服务后台也有debug connect/disconnect的消息。\n\nReferences\n\nhttps://windowsmacos-vscode-c-llvm-clang-clangd-lldb.readthedocs.io/configure.html",
		"tags": [ "note"]
},

{
		"title": 202308011934,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202308011934C++惯用法/",
		"content": "使用lambda表达式消除多重初始化路径\nObj obj;\nswitch (init_mode) {\ncase mode1:\nobj = Obj(...);\nbreak;\ncase mode2:\nobj = Obj(...);\nbreak;\n...\n}\n\n上述代码要求：\n\nObj类型支持默认初始化\nObj类型支持赋值\n如果要获得较好的性能，Obj类型需要移动友好\n\n可用如下lambda表达式消减：\nauto obj = [&amp;] {\nswitch (init_mode) {\ncase mode1:\nreturn Obj(...);\nbreak;\ncase mode2:\nreturn Obj(...);\nbreak;\n...\n}\n}();",
		"tags": [ "note","cpp"]
},

{
		"title": 202308012018,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202308012018lambda表达式/",
		"content": "考虑如下代码：\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nint get_count()\n{\nstatic int count = 0;\nreturn ++count;\n}\n\nclass task\n{\npublic:\ntask(int data) : data_(data) {}\nauto lazy_launch()\n{\nreturn [*this, count = get_count()]() mutable { // 这里使用*this按值捕获，如果直接捕获this，会有问题\nostringstream oss;\noss &lt;&lt; &quot;Done work &quot; &lt;&lt; data_ &lt;&lt; &quot; (No. &quot; &lt;&lt; count\n&lt;&lt; &quot;) in thread &quot; &lt;&lt; this_thread::get_id() &lt;&lt; '\\n';\nmsg_ = oss.str();\ncalculate();\n};\n}\n\nvoid calculate()\n{\nthis_thread::sleep_for(100ms);\ncout &lt;&lt; msg_;\n}\n\nprivate:\nint data_;\nstring msg_;\n};\n\nint main()\n{\ntask t(37);\nthread t1{t.lazy_launch()};\nthread t2{t.lazy_launch()};\nt1.join();\nt2.join();\nreturn 0;\n}\n\n运行结果：\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:22\nDone work 37 (No. 1) in thread 281473391817152\nDone work 37 (No. 2) in thread 281473383424448\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:22\nDone work 37 (No. 1) in thread 281473675637184\nDone work 37 (No. 2) in thread 281473667244480\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:22\nDone work 37 (No. 1) in thread 281473119936960\nDone work 37 (No. 2) in thread 281473111544256\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:22\nDone work 37 (No. 2) in thread 281473806221760\nDone work 37 (No. 1) in thread 281473814614464\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:22\nDone work 37 (No. 2) in thread 281473281548736\nDone work 37 (No. 1) in thread 281473289941440\n\nfine, ok.\n如果把注释处改为按this指针捕获，则运行结果为：\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:23\nDone work 37 (No. 2) in thread 281473417372096\nDone work 37 (No. 2) in thread 281473417372096\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:23\nDone work 37 (No. 1) in thread 281473528775104\nDone work 37 (No. 1) in thread 281473528775104\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:23\nDone work 37 (No. 2) in thread 281473521451456\nDone work 37 (No. 2) in thread 281473521451456\nhubingbing@siaphisprm02259 ~/PacketForwardAgent/service/src/main/cpp/build&gt; ./01_lambda_capture 20:23\nDone work 37 (No. 1) in thread 281473544192448\nDone work 37 (No. 1) in thread 281473544192448\n\n很奇怪有没有？\n如果按指针捕获，lambda表达式中对成员msg_的修改是同一处，后跑的线程会覆盖先跑的线程，所以打印出来都是一句。而按*this捕获，lambda表达式中已经对task做了拷贝，两个线程写的msg_不是同一个，因此可以正常输出。",
		"tags": ["include", "include", "include", "include", "note","cpp","laa"]
},

{
		"title": 202308181549,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202308181549SFINAE/",
		"content": "问题背景\n想要实现一个append(C&amp; contianer, T* ptr, size_t size)函数，作用是拷贝size个数组ptr中的元素到容器container中。为了防止container扩容引发的性能开销，希望如果container有reserve成员，先调用reserve分配好内存，如果没有就算了。\ntemplate &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr, size_t size)\n{\ncontainer.reserve(container.size() + size); // 有reserve的版本\nfor (size_t i = 0; i &lt; size; ++i) {\ncontainer.push_back(ptr[i]);\n}\n}\n\ntemplate &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr, size_t size)\n{\n// 无reserve的版本\nfor (size_t i = 0; i &lt; size; ++i) {\ncontainer.push_back(ptr[i]);\n}\n}\n\n我们能不能像python一样，\ntemplate &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr, size_t size)\n{\nif (has_reserve&lt;C&gt;::value) { // 实现一个trait，判断C有没有reserve成员\ncontainer.reserve(container.size() + size); // #1\n}\nfor (size_t i = 0; i &lt; size; ++i) {\ncontainer.push_back(ptr[i]);\n}\n}\n\n很遗憾不行，因为当类型C没有reserve成员时，#1处直接编译错误。\n解决方案\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T, typename = void_t&lt;&gt;&gt;\nstruct has_reserve : false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_reserve&lt;T, void_t&lt;decltype(declval&lt;T&amp;&gt;().reserve(1U))&gt;&gt; : true_type {};\n\ntemplate &lt;typename C, typename T&gt;\nvoid append(C&amp; container, T* ptr, size_t size)\n{\nif constexpr (has_reserve&lt;C&gt;::value) { // #2\ncontainer.reserve(container.size() + size);\n}\nfor (size_t i = 0; i &lt; size; ++i) {\ncontainer.push_back(ptr[i]);\n}\n}\n\ntemplate &lt;typename T&gt;\nvoid print(const T&amp; container)\n{\ncout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; &quot;: &quot;;\nfor (auto it = container.begin(); it != container.end(); ++it) {\ncout &lt;&lt; *it &lt;&lt; ' ';\n}\ncout &lt;&lt; endl;\n}\n\nint main()\n{\ncout &lt;&lt; has_reserve&lt;vector&lt;int&gt;&gt;::value &lt;&lt; endl;\ncout &lt;&lt; has_reserve&lt;list&lt;int&gt;&gt;::value &lt;&lt; endl;\nint a[] = {1,2,3,4,5};\nlist&lt;int&gt; lst;\nvector&lt;int&gt; vec;\n// append(lst, data(a), std::size(a));\n// append(vec, data(a), std::size(a));\nappend(lst, a, 5);\nappend(vec, a, 5);\n\nprint(lst); // void print(const T&amp;) [with T = std::__cxx11::list&lt;int&gt;]: 1 2 3 4 5\nprint(vec); // void print(const T&amp;) [with T = std::vector&lt;int&gt;]: 1 2 3 4 5\n\nreturn 0;\n}\n\n这里#2处使用了if constexpr功能，由c++17引入（被吴咏炜称为c++17最喜爱的特性）。他的作用是，直接在编译期判断条件，判过了，if下面的语句才会被编译，否则直接跳过。",
		"tags": ["1", "include", "include", "include", "include", "2", "note","cpp","sfinae"]
},

{
		"title": "202308261504",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202308261504make基础/",
		"content": "makefile的规则\n一个makefile可以有很多个rules，一个rule长这样：\ntarget ... : prerequisites ...\nrecipe\n...\n...\n\ntarget：可以是一个object file（目标文件），也可以是一个可执行文件，还可以是一个标签（label）。\nprerequisites：生成该target所依赖的文件和/或target。\nrecipe：该target要执行的命令（任意的shell命令）。\n\n一个rule包含三个部分\n\n一个或多个targets\n0个或多个dependencies\n0个或多个commands（recipe）\n\n这是一个文件的依赖关系，也就是说，target这一个或多个的目标文件依赖于prerequisites中的文件，其生成规则定义在command中。说白一点就是说:\nprerequisites中如果有一个以上的文件比target文件要新的话，recipe所定义的命令就会被执行。\n\n这就是makefile的规则，也就是makefile中最核心的内容。\n重要参数：\n\n-n : dry run\n-f : 指定makefile\n-s : silent/quiet，静默模式，不显示任何输出\n\n规则说明：\n\nrecipe中的命令默认使用/bin/sh解释shell命令\n输入make target意味着\n\n确定所有的依赖都是最新的\n如果target比任何一个dependency旧，则重新构建target\n\n输入make默认构建Makefile中的第一个target\nPhony target（伪目标）：伪目标的名字并不表示真的要生成这样一个文件，伪目标仅包含recipe和target，不包含任何dependency\n\n命令的开头\n\nrecipe中的命令一定要以一个Tab键作为开头，不能用空格代替\nrecipe中的命令若以-开头，表示如果命令执行出错，继续执行下一条命令\nrecipe中的命令若以@开头，表示命令本身不会输出，但命令的输出（如有）会输出\n\n命令的执行\nmake会一条一条执行recipe中的命令，需要注意的是，如果你要让上一条命令的结果应用在下一条命令时，你应该使用分号分隔这两条命令。比如你的第一条命令是cd命令，你希望第二条命令得在cd之后的基础上运行，那么你就不能把这两条命令写在两行上，而应该把这两条命令写在一行上，用分号分隔。如：\n#1\nexec:\ncd /home/hchen\npwd\n\n#2\nexec:\ncd /home/hchen; pwd\n\n当我们执行 make exec 时，第一个例子中的cd没有作用，pwd会打印出当前的Makefile目录，而第二个例子中，cd就起作用了，pwd会打印出“/home/hchen”。\n嵌套执行make\n在一些大的工程中，我们会把我们不同模块或是不同功能的源文件放在不同的目录中，我们可以在每个目录中都书写一个该目录的Makefile，这有利于让我们的Makefile变得更加地简洁，而不至于把所有的东西全部写在一个Makefile中，这样会很难维护我们的Makefile，这个技术对于我们模块编译和分段编译有着非常大的好处。\n例如，我们有一个子目录叫subdir，这个目录下有个Makefile文件，来指明了这个目录下文件的编译规则。那么我们总控的Makefile可以这样书写：\nsubsystem:\ncd subdir &amp;&amp; $(MAKE)\n\n其等价于：\nsubsystem:\n$(MAKE) -C subdir\n\n定义$(MAKE)宏变量的意思是，也许我们的make需要一些参数，所以定义成一个变量比较利于维护。这两个例子的意思都是先进入“subdir”目录，然后执行make命令。\n我们把这个Makefile叫做“总控Makefile”，总控Makefile的变量可以传递到下级的Makefile中（如果你显示的声明），但是不会覆盖下层的Makefile中所定义的变量，除非指定了 -e 参数。\n定义命令包\n如果Makefile中出现一些相同命令序列，那么我们可以为这些相同的命令序列定义一个变量。定义这种命令序列的语法以 define 开始，以 endef 结束，如:\ndefine run-yacc\nyacc $(firstword $^)\nmv y.tab.c $@\nendef\n\n这里，“run-yacc”是这个命令包的名字，其不要和Makefile中的变量重名。在 define 和 endef 中的两行就是命令序列。这个命令包中的第一个命令是运行Yacc程序，因为Yacc程序总是生成“y.tab.c”的文件，所以第二行的命令就是把这个文件改改名字。还是把这个命令包放到一个示例中来看看吧。\nfoo.c : foo.y\n$(run-yacc)\n\n我们可以看见，要使用这个命令包，我们就好像使用变量一样。在这个命令包的使用中，命令包“run-yacc”中的 $^ 就是 foo.y ， $@ 就是 foo.c （有关这种以 $ 开头的特殊变量，我们会在后面介绍），make在执行命令包时，命令包中的每个命令会被依次独立执行。\n使用变量\n在Makefile中的定义的变量，就像是C/C++语言中的宏一样，他代表了一个文本字串，在Makefile中执行的时候其会自动原模原样地展开在所使用的地方。其与C/C++所不同的是，你可以在Makefile中改变其值。在Makefile中，变量可以使用在“目标”，“依赖目标”， “命令”或是Makefile的其它部分中。\n命名规则：变量的命名字可以包含字符、数字，下划线（可以是数字开头），但不应该含有 : 、 # 、 = 或是空字符（空格、回车等）。变量是大小写敏感的，“foo”、“Foo”和“FOO”是三个不同的变量名。传统的Makefile的变量名是全大写的命名方式，但我推荐使用大小写搭配的变量名，如：MakeFlags。这样可以避免和系统的变量冲突，而发生意外的事情。\n有一些变量是很奇怪字串，如 $&lt; 、 $@ 等，这些是自动化变量，我会在后面介绍。\n\nmacro @ evaluates to the name of the current target.\n可用make -p打印内部宏\n\n变量在声明时需要给予初值，而在使用时，需要给在变量名前加上 $ 符号，但最好用小括号 () 或是大括号 {} 把变量给包括起来。如果你要使用真实的 $ 字符，那么你需要用 $$ 来表示。\n变量可以使用在许多地方，如规则中的“目标”、“依赖”、“命令”以及新的变量中。先看一个例子：\nobjects = program.o foo.o utils.o\nprogram : $(objects)\ncc -o program $(objects)\n\n$(objects) : defs.h\n\n变量会在使用它的地方精确地展开，就像C/C++中的宏一样，例如：\nfoo = c\nprog.o : prog.$(foo)\n$(foo)$(foo) -$(foo) prog.$(foo)\n\n展开后得到：\nprog.o : prog.c\ncc -c prog.c\n\n当然，千万不要在你的Makefile中这样干，这里只是举个例子来表明Makefile中的变量在使用处展开的真实样子。可见其就是一个“替代”的原理。\n另外，给变量加上括号完全是为了更加安全地使用这个变量，在上面的例子中，如果你不想给变量加上括号，那也可以，但我还是强烈建议你给变量加上括号。\n与C/C++不同，为变量赋值时，右侧变量可以是后面定义的变量：\nfoo = $(bar)\nbar = $(ugh)\nugh = Huh?\n\nall:\necho $(foo)\n\n我们执行“make all”将会打出变量 $(foo) 的值是 Huh? （ $(foo) 的值是 $(bar) ， $(bar) 的值是 $(ugh) ， $(ugh) 的值是 Huh? ）可见，变量是可以使用后面的变量来定义的。\n还有另一种使用变量的方式（推荐）：\nx := foo\ny := $(x) bar\nx := later\n\n其等价于：\ny := foo bar\nx := later\n\n值得一提的是，这种方法，前面的变量不能使用后面的变量，只能使用前面已定义好了的变量。如果是这样：\ny := $(x) bar\nx := foo\n\n那么，y的值是“bar”，而不是“foo bar”。\n总结一下：\n\n=操作符允许先使用变量，后为变量赋值，但容易引发递归定义的问题\n:=操作符遵循常规变量先定义后使用的原则，推荐使用\n\n行尾注释的副作用\nnullstring :=\nspace := $(nullstring) # essential for one space\ndir := /foo/bar # dir for xxx\nall:\n@echo &quot;$(space),$(dir),$(nullstring),hehe&quot;\n\n$ make -n\necho &quot; ,/foo/bar ,,hehe&quot;\n$ make\n,/foo/bar ,,hehe\n\n注意其中的空格，由此可见，行尾注释之前的空格也会被附加到变量值中。如果行尾没有注释，space变量将没有空格，dir变量也将恢复正常，没有后面的空格。用“#”注释符来表示变量定义的终止。这样，我们可以定义出其值是一个空格的变量。\n?= 操作符\nFOO ?= bar\n\n其含义是，如果FOO没有被定义过，那么变量FOO的值就是“bar”，如果FOO先前被定义过，那么这条语将什么也不做，其等价于：\nifeq ($(origin FOO), undefined)\nFOO = bar\nendif\n\n+= 操作符\n我们可以使用 += 操作符给变量追加值，如：\nobjects = main.o foo.o bar.o utils.o\nobjects += another.o\n\n于是，我们的 $(objects) 值变成：“main.o foo.o bar.o utils.o another.o”（another.o被追加进去了）。它等价于下面的写法：\nobjects = main.o foo.o bar.o utils.o\nobjects := $(objects) another.o\n\n很明显，+= 更简洁。\n如果变量之前没有定义过，那么， += 会自动变成 = ，如果前面有变量定义，那么 += 会继承于前次操作的赋值符。如果前一次的是 := ，那么 += 会以 := 作为其赋值符。\n仍然，小心使用=和+=时引发的递归定义：\nv = $(value)\nvalue += $v\nall:\n@echo &quot;value is $(value)&quot;\n\n$ make\nMakefile:6: *** Recursive variable 'value' references itself (eventually). Stop.\n\n目标变量\n前面我们所讲的在Makefile中定义的变量都是“全局变量”，在整个文件，我们都可以访问这些变量[1]。当然，我也同样可以为某个目标设置局部变量，这种变量被称为“Target-specific Variable”，它可以和“全局变量”同名，因为它的作用范围只在这条规则以及连带规则中，所以其值也只在作用范围内有效。而不会影响规则链以外的全局变量的值。\n其语法是：\n&lt;target ...&gt; : &lt;variable-assignment&gt;;\n&lt;target ...&gt; : overide &lt;variable-assignment&gt;\n\n&lt;variable-assignment&gt;;可以是前面讲过的各种赋值表达式，如 = 、 := 、 += 或是 ?= 。第二个语法是针对于make命令行带入的变量，或是系统环境变量。\n这个特性非常的有用，当我们设置了这样一个变量，这个变量会作用到由这个目标所引发的所有的规则中去。如：\nprog : CFLAGS = -g\nprog : prog.o foo.o bar.o\n$(CC) $(CFLAGS) prog.o foo.o bar.o\n\nprog.o : prog.c\n$(CC) $(CFLAGS) prog.c\n\nfoo.o : foo.c\n$(CC) $(CFLAGS) foo.c\n\nbar.o : bar.c\n$(CC) $(CFLAGS) bar.c\n\n在这个示例中，不管全局的 $(CFLAGS) 的值是什么，在prog目标，以及其所引发的所有规则中（prog.o foo.o bar.o的规则）， $(CFLAGS) 的值都是 -g.\n高级用法\n拼接：\nfirst_second = Hello\na = first\nb = second\nall = $($a_$b)\n\n这里的 $a_$b 组成了“first_second”，于是， $(all) 的值就是“Hello”。当然，“把变量的值再当成变量”这种技术，同样可以用在操作符的左边:\ndir = foo\n$(dir)_sources := $(wildcard $(dir)/*.c)\ndefine $(dir)_print\nlpr $($(dir)_sources)\nendef\n\n这个例子中定义了三个变量：“dir”，“foo_sources”和“foo_print”。\nReference\n\n跟我一起写Makefile - 陈皓\nA Short Introduction to Makefile\n羽夏 MakeFile 简明教程\n\n当然，“自动化变量”除外，如 $&lt; 等这种类量的自动化变量就属于“规则型变量”，这种变量的值依赖于规则的目标和依赖目标的定义。 ↩︎",
		"tags": ["1", "2", "note","make"]
},

{
		"title": 202309080931,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202309080931code-smells/",
		"content": "滥用OO\n被拒绝的遗赠\nRefused Bequest\n是什么\n子类不需要父类的数据、方法\n有什么问题\n滥用继承，会造成理解困难，不必要的耦合\n场景\n子类只用父类部分方法\n搞一个兄弟类，把不用的都放进去\nPush Down Method\nPush Down Field\n子类用了父类的实现，但接口不一样\n可能这个时候要用代理，而不是继承\nReplace Inheritance with Delegation\n异曲同工的类\nAlternative Classes with Different Interfaces\n是什么\n两个函数做一样的事，却有不同的签名\n所以主要是接口不同，跟类的关系不大\n有什么问题\n缺乏抽象，引发不必要的复杂度\n场景\n两个函数做的事一样，签名不同\n通过命名的修改来凸显问题\nRename Method\n通过不停地把行为内置，让两边协议一样\nMove Method\n最后可能提取到父类里\nExtract Superclass\n临时字段\nTemporary Field\n是什么\n为了特定情况建立的字段\n有什么问题\n跟其他字段生命周期不一样容易造成bug\n场景\n用一个或几个field当临时变量\n应该创建一个新类\nExtract Class\n然后传参\n为null设置一个field\nIntroduce Null Object\n一个复杂算法，要用很多变量，但是作者不想传太多变量，所以把他们都搞成了field，这些变量只对这个算法有意义\n提取新对象\nExtract Class\n新版被去掉的坏味道\n不完美的类库\nIncomplete Library Class\n手法\nIntroduce Local Extension\nIntroduce Foreign Method\nMove Method\n场景\n类库有些API不提供，或API不好用\nswitch惊悚现身\nswitch statements\n是什么\n分支判断很多，而且到处出现\n不仅仅是switch关键字\n有什么问题\n因为四处出现，每改一个分支就要改好多地方\n遗漏而出bug\n即便只有一个地方，太长的分支列表也会有问题\n改一个新的，不小心动到了旧代码\n就算没动到新代码，也会扩散变化，无法证明整个列表中其他分支没有被改变，要做全量回归\n场景\n一个明显需要多态的场景\n需要一连串的手法来实现一个多态替换掉它\n先把整个分支列表移到一个新函数里\nExtract Method\n再移到你计划制造多态的新类里\nMove Method\n然后决定是否需要用继承体系替换掉\n如果是，选择哪一种继承体系，如下：\n一组State/Strategy\nReplace Type Code with State/Strategy\n一些子类\nReplace Type Code with Subclasses\n最后用继承体系替换掉\n多态类的创建场景\n用enum或抽象工厂或loC容器\n手法同上\n有时候调用端其实是只在此自己要什么的，没必要隐藏\n你可以把分支里的行为抽取成具体的函数\n调用段只要直接调用具体的函数就可以\nReplace Parameter with Explicit Methods\n有时候只是判个空\n可以让调用端传入一个NullObject对象\nIntroduce Null Object\n膨胀剂\n神秘的命名\n新版新加的\n可以对应magic number\n过长的参数列表\nlong parameter list\n是什么\n就是形参太多了\n有什么问题\n不容易理解\n你从接口上看不出为啥需要这些数据\n不容易定义出函数的职责\n造成职责不单一，各种耦合\n接口会经常变动\n场景\n几个参数明显属于一个整体\n手法：组合成一个类\nIntroduce Parameter Object\nPreserve Whole Object\n参数里有对象和对象的属性\n手法：那就不要传属性，直接读对象\nReplace Parameter with Method\n有时候自己的属性可以被对方读属性读到\n就直接传自己，手法同上\nPreserve Whole Object\nReplace Parameter with Method\n例外场景\n你不需要被调对象和其他某个对象（比如自己）产生依赖（纯函数流行后，这个可能越发的多了）\n这个时候，传属性是对的\n过长的函数\nlong method\n是什么\n一个函数的函数体内代码行数过长\n一个函数建议在20行以内\n有什么问题\n程序越长越难理解，自然容易出bug\n场景\n一个函数内有很多段逻辑，函数本身职责不单一，每段代码彼此可以通过数据传递隔离（绝大多数）\n分割成小函数，并起一个合理的名字\nExtract Method\n如果函数内临时变量太多，或函数本身的参数太多。提取函数会制造大量的参数，搞不好就有long param list坏味道\n可以用函数替代临时变量\nReplace Temp with Query\n这样可以在其他函数里直接调用这个新函数，省去传参\n可以用对象来封装参数\nIntroduce Parameter Object\n有时你从一个对象里去除几个数据传给函数A，这个时候，你就直接传这个对象，在函数A里面取\nPreserve Whole Object\n如果以上手法还不能拯救你，就可以祭出大杀器，用函数对象代替函数\nReplace Method with Method Object\n不要滥用\n毕竟OO不是FP\n不知道哪段代码，该被提取\n寻找注释\n哪怕只有一行代码，既然值得注释，就值得提取\n发现循环\n整个提取\nExtract Method\n新时代可以用lambda替换\n发现条件表达式\n把表达式提取成函数\nDecompose Conditional\n数据泥团\nData Dump\n是什么\n数据项总是扎堆出现，扎堆小时，说明他们是一个类\n有什么问题\n丢失的概念\n往往这里有个概念，但是我们在需求传递中丢失了，造成不内聚\n场景\n有几个数据项，总是同时被某一个或几个函数使用\n有几个数据项，总是同时被一个或几个代码块使用\n手法是一样的\n先把数据项抽取成对象\nIntroduce Parameter Object\n直接传对象\nPreserve Whole Object\n过大的类\nLarge Class\n是什么\n单个类做了太多的事情\n类的行数很长，field也很多\n有什么问题\n这也是百病之源\n理解困难\n职责不单一，代码容易耦合\n场景\n有些时候，这些变量适合放在子类里\n那就抽取一个子类\nExtract Subclass\n仅仅是行数太长\n也是需要提取一个新类\nExtract Class\nExtract Subclass\n可能是职责不单一，根据客户端的使用情况不同，先提取接口，然后在动刀\nExtract Interface\n这个大类是GUI的类\n有可能需要把业务逻辑和显示逻辑分离\n哪怕你需要duplicate一套数据，两边同步\nDuplicate Observed Data\n如果在服务端，不要对View层的TO过于吝啬\nController可以有自己专属的一组ViewObject\n基本类型偏执\nPrimitive Obsession\n是什么\n该用结构类型来抽取概念的时候，没用，非要用基本类型\n有什么问题\n不内聚\n逻辑泄漏的到处都是\n场景\n不愿意为了小任务建立小对象\n比如\nmoney\n用浮点数是由风险的\ncontact\nZipCode\nRange\nURL\n类型码\n手法\nReplace Data Value with Object\nReplace Type Code with Subclass\nReplace Type Code with State/Strategy\nExtract Class\nIntroduce Parameter\n数组中的不同下标代表不同含义\n举例\n[&quot;张三&quot;,18,&quot;男&quot;]\n手法\nReplace Array with Object\n可有可无\n夸夸其谈的未来性\nSpeculative Generality\n是什么\n过度设计的产物\n认为我们未来会用到，但其实谁知道呢\n有什么问题\n理解困难\n维护困难\n看到一个精巧的设计，人们会本能的害怕，这个东西是不是有谁在用，于是一旦开放的接口只会越来越大，没有人敢删\n场景\n为一个简单的场景做了复杂的设计\n分解成下面具体的场景，然后逐个干掉\n抽象类没啥用（接口类似）\n那就直接用具体类就好了\nCollapse Hierarchy\n不必要的委托（A通过B访问C）\n那就直接依赖被委托的类（A直接访问C）\nInline Class\n函数的参数没啥用\n删掉没人用的参数\nRemove Parameter\n函数名听着太抽象\n重命名\nRename Method\n类和函数只有测试用例用，且这些测试用例业务上并不存在\n直接删除就好了\n这些没啥用，是说在当前需求中没用，\n都是为了某个想象出来的需求做的设计\n重复代码\nDuplicated Code\n是什么\n在一个以上的地点看到同样的程序结构\n有什么问题\n重复代码是万恶之源，会衍生出其他绝大多数的坏味道\n最常见的是一旦变化了，到处修改，漏改一个就是bug\n场景\n同一个类的两个函数含有相同的表达式\n把重复的部分提取出一个函数\nExtract Method\n两个互为兄弟的子类中看到相同的表达式\n先\nExtract Method\n再\nPull Up Method\n前两种情况下，两部分的代码相似却不相同\n首先提取相同部分\nExtract Method\n然后制造模板方法，把差异的部分交给子类实现\nForm Template Method\n有时候，代码确实不同，但其实在做同一件事，只是用了两种算法\n用比较清楚的一种替代掉另一种\nSubstitute Algorithm\n两个毫不相关的类里出现重复\n先提炼到一个类里去\nExtract Class\n然后在另一个类里使用\n注意：要决定这个函数在哪合适\n可能在A\n可能在B\n也能在第三个类\n冗余类\nLazy Class\n是什么\n不必要存在的类，不管是过度设计还是已经过时了\n有什么问题\n增加理解复杂度，已经没用的东西要尽早清理\n场景\n没用的类\n其实方法没人用了，也改干掉\n把类的代码内联回调用端\nInline Class\n没用的子类\n把子类和父类合成一个类，直接用\nCollapse Hierarchy\n莫名其妙的接口\n删除接口，直接用具体实现\nCollapse Hierarchy\n过多的注释\nComments\n是什么\n因为代码很糟糕，不得不写注释\n不是什么\n不写注释\n有什么问题\n掩盖坏味道\n场景\n需要注释一段代码干了什么\nExtract Method\n需要注释一个函数干了什么\nRename Method\n需要注释说明使用规格\nIntroduce Assertion\n纯数据类\nData Class\n是什么\n只有数据，没有方法\n有什么问题\n可能是错误的抽象\n场景\n一堆public field\n没什么好说的，封装起来\nEncapsulate Field\nEncapsulate Collection\n只有setter和getter\n把使用这些数据的函数慢慢挪到类里\nRemove Setting Method\nMove Method\nExtract Method\nHide Method\n例外\n起步阶段，你可能不知道有啥未来的方法，\n那就先用纯数据类，等业务出现的时候再重构\n难以修改\n平行的继承体系\nParallel Inheritance Hierarchies\n是什么\n这种情况下，假设有两个类，没给A增加一个子类，就要给B增加一个子类\n有什么问题\n还是因为不内聚，而容易出bug\n场景\n一个体系的前缀和另一个体系的前缀一模一样\n先引用\n再\nMove Method\nMove Field\n虽然类一样，但不继承，还是不要过早下判断\n分层架构下Domain层和View层、持久化层虽然会有类似对象，但是不继承\n最主要的是，他们往往是为了处理不同的变化\n比如一个是业务变化，一个是存储变化\n霰弹式修改\nShotgun Surgery\n是什么\n一种原因改变多个类\n优秀的设计是，同一种变化应该只改一个类\n最多因为这个类的修改，而逻辑上合理扩散到相关的类\n有什么问题\n很难找到\n也容易遗忘\n忘一个就是一个bug\n场景\n来一个需求，变一处逻辑，要四处修改\n把需要修改的代码放到一个类里，如果这个类不存在，就创造一个\n手法\nMove Method\nMove Field\nInline Class\n缺点\n会造成发散式变化\n比起霰弹式修改，还是好一点\n但不是说就不管了\n你可以先集中在一处，然后再慢慢重构\n发散式变化\nDivergent Change\n是什么\n多个原因改变一个类\n优秀的设计是，同一个类应该只响应一种变化\n不是什么\n一种变化，不是一个变化\n多个变化可能属于一种变化，比如业务逻辑修改，数据库替换，这是两种变化\n上下文也很重要，这就要结合DDD讲了\n有什么问题\n违反单一职责，这种类很容易代码耦合，不容易变\n也不容易理解\n一个业务实体类因为缓存变一变，因为数据库变一变，因为业务逻辑变一变，最后你看这代码想看出业务逻辑到底是啥就比较费劲\n场景\n一个技术需求和一个业务需求都要改同一个类\n不同上下文的业务，都要改同一个类\n库存\n产品\n识别变化原因\n然后Extract Class\n耦合\n依恋情结\nFeature Envy\n是什么\n一个函数对另一个类的数据感兴趣的程度远超过自己所在的类\n有什么问题\n不够内聚\n逻辑分散\n场景\n就是函数放错地方了，它用到的数据基本全在另一个类里，自己类里的数据反而可能只用一两个\nMove Method\n一段代码，用到的数据全在另一个类里\n先提取函数\nExtract Method\n再挪到另一个类里去\nMove Method\n例外\nvisitor\nstrategy\n这是为发散式变化付出的代价\n过度耦合的消息连\nMessage Chains\n是什么\na调b，b调c，c调d\n只是为了拿个数据\n有什么问题\n客户端过度了解被调用端结构\n被调用端改变，客户端不得不修改\n场景\n要通过一长串的访问拿到最终对象\n识别\n看看最终对象到底拿来做啥\n这个方法是否属于客户端\n是否可以直接把逻辑放到消息链里\n或其中一个对象上\n手法\nHide Delegate\nExtract Method\nMove Method\n中间人\nMiddle Man\n是什么\n对于委托的滥用\n有什么问题\n莫名其妙的出现了一个委托，每次查找问题的时候会很困扰，从而难以定位bug\n场景\n一个类大多数的逻辑都委托给了另一个类\n举例\n当客户端需要指导两个概念\nPerson\nDepartment\n却只能通过Person拿到Department\n改为\n既能访问Person，也能访问Department\n还能通过两者互取对方\n手法\nReplace Delegation with Inheritance\nInline Method\nRemove Middle Man\n狎昵关系\nInappropriate Intimacy\n是什么\n一个类对另一个类的了解太多了\n不管是private的field\n还是函数内在逻辑\n包括私有函数\n以至于自己的逻辑完全建立在对方的逻辑假设之上，从而变得两边隔空耦合\n有什么问题\n耦合，难以变动\n场景\n当两个类设计太深，变一个就得改另一个的时候\n先通过搬移Method和Field看能不能隔离变化\nMove Method\nMove Field\n如果存在双向关联，看看是不是要转为单项关联\nChange Bidirectional Association to Unidirectional\n看看是不是能提取出一个公共的类，双方都依赖它\nExtract Class\n或者这个公共的类，来替它们两个通信\nHide Delegate\n子类不再适合做子类的时候\n除了上述手法，有一个专题手法\nReplace Inheritance with Delegation\nReplace Parameter with Explicit Methods\n手法是一样的\n先把数据项抽取成对象\nIntroduce Parameter Object\n直接传对象\nPreserve Whole Object\n这些没啥用，是说在当前需求中没用，\n都是为了某个想象出来的需求做的设计\n识别变化原因\n然后Extract Class\n这是为发散式变化付出的代价",
		"tags": [ "note","code-smell","refactor"]
},

{
		"title": "202310162020",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202310162020UML基础/",
		"content": "UML图分类：\n\n9种UML（Unified Modeling Language）模型图：\n\n用例图（Use-Case Diagram），静态图\n类图（Class Diagram），静态图\n对象图（Object Diagram），静态图\n状态图（State Diagram），动态图\n活动图（Activity Diagram），动态图\n顺序图（Sequence Diagram），动态图\n合作图（Communication Diagram），动态图\n组件图（Component Diagram），静态图\n部署图（Deployment Diagram），静态图\n\n6种关系：\n\n实现（Realization）\n依赖（Dependency）\n泛化（Generalization）\n关联（Association）\n聚合（Aggregation）\n组合（Composition）\n\n关系强弱顺序：泛化 = 实现 &gt; 组合 &gt; 聚合 &gt; 关联 &gt; 依赖\n---\ntitle: 各关系图例\n---\nclassDiagram\n\nclassA --|> classB : Inheritance(Generalization)\nclassC --* classD : Composition\nclassE --o classF : Aggregation\nclassG --> classH : Association\nclassI ..> classJ : Dependency\nclassK ..|> classL : Realization\n[!TIP]\n类图关系连线的箭头，指向内容和范围较小的类。",
		"tags": [ "note","uml"]
},

{
		"title": 202310232023,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202310232023/",
		"content": "#链接 #编译\n// a.c\nint a = 3;\n\n// b.c\n#include &lt;stdio.h&gt;\nint a;\nint main()\n{\nprintf(&quot;a=%d\\n&quot;, a);\nreturn 0;\n}\n\ngcc a.c b.c -c\n[hubingbing@pekphis193995 test_linkage2]$ readelf -s a.o\n\nSymbol table '.symtab' contains 9 entries:\nNum: Value Size Type Bind Vis Ndx Name\n0: 0000000000000000 0 NOTYPE LOCAL DEFAULT UND\n1: 0000000000000000 0 FILE LOCAL DEFAULT ABS a.c\n2: 0000000000000000 0 SECTION LOCAL DEFAULT 1\n3: 0000000000000000 0 SECTION LOCAL DEFAULT 2\n4: 0000000000000000 0 SECTION LOCAL DEFAULT 3\n5: 0000000000000000 0 NOTYPE LOCAL DEFAULT 2 $d\n6: 0000000000000000 0 SECTION LOCAL DEFAULT 5\n7: 0000000000000000 0 SECTION LOCAL DEFAULT 4\n8: 0000000000000000 4 OBJECT GLOBAL DEFAULT 2 a\n[hubingbing@pekphis193995 test_linkage2]$ readelf -s b.o\n\nSymbol table '.symtab' contains 15 entries:\nNum: Value Size Type Bind Vis Ndx Name\n0: 0000000000000000 0 NOTYPE LOCAL DEFAULT UND\n1: 0000000000000000 0 FILE LOCAL DEFAULT ABS b.c\n2: 0000000000000000 0 SECTION LOCAL DEFAULT 1\n3: 0000000000000000 0 SECTION LOCAL DEFAULT 3\n4: 0000000000000000 0 SECTION LOCAL DEFAULT 4\n5: 0000000000000000 0 SECTION LOCAL DEFAULT 5\n6: 0000000000000000 0 NOTYPE LOCAL DEFAULT 5 $d\n7: 0000000000000000 0 NOTYPE LOCAL DEFAULT 1 $x\n8: 0000000000000000 0 SECTION LOCAL DEFAULT 7\n9: 0000000000000014 0 NOTYPE LOCAL DEFAULT 8 $d\n10: 0000000000000000 0 SECTION LOCAL DEFAULT 8\n11: 0000000000000000 0 SECTION LOCAL DEFAULT 6\n12: 0000000000000004 4 OBJECT GLOBAL DEFAULT COM a\n13: 0000000000000000 44 FUNC GLOBAL DEFAULT 1 main\n14: 0000000000000000 0 NOTYPE GLOBAL DEFAULT UND printf\n\n[hubingbing@pekphis193995 test_linkage2]$ g++ a.c b.c -c\n[hubingbing@pekphis193995 test_linkage2]$ readelf -s a.o\n\nSymbol table '.symtab' contains 9 entries:\nNum: Value Size Type Bind Vis Ndx Name\n0: 0000000000000000 0 NOTYPE LOCAL DEFAULT UND\n1: 0000000000000000 0 FILE LOCAL DEFAULT ABS a.c\n2: 0000000000000000 0 SECTION LOCAL DEFAULT 1\n3: 0000000000000000 0 SECTION LOCAL DEFAULT 2\n4: 0000000000000000 0 SECTION LOCAL DEFAULT 3\n5: 0000000000000000 0 NOTYPE LOCAL DEFAULT 2 $d\n6: 0000000000000000 0 SECTION LOCAL DEFAULT 5\n7: 0000000000000000 0 SECTION LOCAL DEFAULT 4\n8: 0000000000000000 4 OBJECT GLOBAL DEFAULT 2 a\n[hubingbing@pekphis193995 test_linkage2]$ readelf -s b.o\n\nSymbol table '.symtab' contains 16 entries:\nNum: Value Size Type Bind Vis Ndx Name\n0: 0000000000000000 0 NOTYPE LOCAL DEFAULT UND\n1: 0000000000000000 0 FILE LOCAL DEFAULT ABS b.c\n2: 0000000000000000 0 SECTION LOCAL DEFAULT 1\n3: 0000000000000000 0 SECTION LOCAL DEFAULT 3\n4: 0000000000000000 0 SECTION LOCAL DEFAULT 4\n5: 0000000000000000 0 NOTYPE LOCAL DEFAULT 4 $d\n6: 0000000000000000 0 SECTION LOCAL DEFAULT 5\n7: 0000000000000000 0 NOTYPE LOCAL DEFAULT 5 $d\n8: 0000000000000000 0 NOTYPE LOCAL DEFAULT 1 $x\n9: 0000000000000000 0 SECTION LOCAL DEFAULT 7\n10: 0000000000000014 0 NOTYPE LOCAL DEFAULT 8 $d\n11: 0000000000000000 0 SECTION LOCAL DEFAULT 8\n12: 0000000000000000 0 SECTION LOCAL DEFAULT 6\n13: 0000000000000000 4 OBJECT GLOBAL DEFAULT 4 a\n14: 0000000000000000 44 FUNC GLOBAL DEFAULT 1 main\n15: 0000000000000000 0 NOTYPE GLOBAL DEFAULT UND printf\n[hubingbing@pekphis193995 test_linkage2]$\n\n特别注意，g++编译出来的b.o，a是在第4段，视作定义而非声明。而gcc编译出来的b.o，a在common段，视为声明，不分配空间。\n所以上述代码gcc能编过并链接成功，而g++链接会报错。\n// a.c\nint x;\nvoid func() {\nx = 20;\n}\n\n// b.c\n#include &quot;stdio.h&quot;\n\nshort x = 10;\nshort y = 10;\nextern void func();\n\nint main()\n{\nprintf(&quot;before call func: x = %d, y = %d\\n&quot;, x, y);\nfunc();\nprintf(&quot;after call func: x = %d, y = %d\\n&quot;, x, y);\nprintf(&quot;sizeof(x)=%lu, sizeof(y)=%lu\\n&quot;, sizeof(x), sizeof(y));\nreturn 0;\n}\n\n[hubingbing@pekphis193995 test_linkage]$ gcc a.c b.c\n/usr/bin/ld: warning: alignment 2 of symbol `x' in /tmp/ccoKSrLO.o is smaller than 4 in /tmp/cc8Qpcod.o\n/usr/bin/ld: warning: size of symbol `x' changed from 4 in /tmp/cc8Qpcod.o to 2 in /tmp/ccoKSrLO.o\n[hubingbing@pekphis193995 test_linkage]$ ./a.out\nbefore call func: x = 10, y = 10\nafter call func: x = 20, y = 0\nsizeof(x)=2, sizeof(y)=2",
		"tags": ["链接", "编译", "include", "include", "note"]
},

{
		"title": 202404150949,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202404150949vlan/",
		"content": "Vlan和Vxlan\nVlan（Virtual LAN）\n为什么需要Vlan？\n在二层网络（Data Link Layer）中，交换机本身就是一个广播域。如果不划分Vlan，任意一台连接到交换机上的设备所发送的报文，将会广播给其他所有的设备。\n如果设备太多，过多的封包将会拥塞网络。\n每一个Vlan都相当于一个广播域。不同的Vlan之间想要通讯就必须要通过第三层网络（Network Layer）。\n二层交换机可以划分出很多的Vlan，但是Vlan间的通信必须要加上路由器。然而，三层交换机包含了路由功能。相当于二层交换机+路由器。\nAccess口：用于接入设备\nTrunk口：连接其他的交换机，上面可以承载多个Vlan\n\n16 bits\n3 bits\n1 bit\n12 bits\n\nTPID\nPCP\nCFI\nVID\n\n因为只有12位 Vlan Identifier， 所以可用的Vlan只有4096-2 = 4094个\n4094个Vlan 对于大型云计算需要的隔离性是不够的，所以需要Vxlan\nVxlan（virtual extensible lan）\nVxlan 有24bit 标识位， 满足庞大的隔离需求。而且提供无障碍接入的网络。\n\n虚拟机动态迁移：将一个虚拟机从一个物理服务器迁移到另一物理服务器。要求IP地址，运行状态不变，只能在一个二层域迁移。\n传统架构限制了迁移的范围\n\nVxlan技术基于三层的网络结构，构建了二层的虚拟网络\n\nVxlan是一种overlay技术，overlay是基于隧道技术实现的。Vxlan把原始二层报文进行隧道协议封装之后，在承载网络中透明传输，完全无视中间网络的结构。中间的网络就像一个巨大的交换机，主机毫不关心报文在交换机中是如何传输的。\nReference\n\nhttps://zh.wikipedia.org/zh-cn/IEEE_802.1Q",
		"tags": [ "note","vlan","vxlan"]
},

{
		"title": 202405100938,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202405100938mutable-in-cpp/",
		"content": "C++中的mutable关键字\n一言以蔽之，在常量成员函数里面可以修改mutable修饰的成员变量。\nReferences\n\n8.8 关键字：mutable\nC++ 中的 mutable 关键字",
		"tags": [ "note","cpp","mutable"]
},

{
		"title": 202406111912,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202406111912函数栈/",
		"content": "两个重要指针：\nThe ESP (Extended Stack Pointer) holds the top stack address. 指向栈顶\nEBP (Extended Base Pointer) is used for this purpose. 指向栈帧\nAs an example in Windows/Intel, typically, when the function call takes place, data elements are stored on the stack in the following way:\n\nThe function parameters are pushed on the stack before the function is called.  The parameters are pushed from right to left.\n\nThe function return address is placed on the stack by the x86 CALL instruction, which stores the current value of the EIP register.\n\nThen, the frame pointer that is the previous value of the EBP register is placed on the stack.\n\nIf a function includes try/catch or any other exception handling construct such as SEH (Structured Exception Handling - Microsoft implementation), the compiler will include exception handling information on the stack.\n\nNext, the locally declared variables.\n\nThen the buffers are allocated for temporary data storage.\n\nFinally, the callee save registers such as ESI, EDI, and EBX are stored if they are used at any point during the functions execution.  For Linux/Intel, this step comes after step no. 4.\n\nthe stack grows downwards in memory as it gets bigger，栈向低内存地址增长，栈越大，栈顶地址越小。\nReference\n\nhttps://www.tenouk.com/Bufferoverflowc/Bufferoverflow2a.html",
		"tags": [ "note","cpp","stack"]
},

{
		"title": "202409242301",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202409242301-usb耳机无声音/",
		"content": "起因：入了个usb耳机，然后插上电脑（archlinux）无效果。电脑自带扬声器和3.5mm耳机孔都是好好工作的，然而插了usb耳机后好像没插一样。\n先看下lsusb排除下物理连接问题\nyychi@~&gt; lsusb\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 002: ID 04f2:b5a3 Chicony Electronics Co., Ltd XiaoMi USB 2.0 Webcam\nBus 001 Device 003: ID 04f3:0c1a Elan Microelectronics Corp. ELAN:Fingerprint\nBus 001 Device 004: ID 8087:0a2b Intel Corp. Bluetooth wireless interface\nBus 001 Device 009: ID 0b0e:0313 GN Netcom Jabra EVOLVE 30 II # usb headphone\nBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n\n接着根据以前的经验，很快定位到了card-profile的问题。是不是情景模式不对呢？最后发现和上次不一样，上次普通耳机和外置扬声器用的一张声卡。这次usb耳机用的自带声卡，所以需要切换成自带声卡，且调对情景模式。\n\n现在用pipewire替代pulse-audio，其对应的配置命令行为pactl\n\nyychi@~&gt; pactl list cards short\n45\talsa_card.pci-0000_00_1f.3\talsa # 自带声卡\n576\talsa_card.usb-GN_Audio_A_S_Jabra_EVOLVE_30_II_0005EDED3F4A09-00\talsa # usb耳机声卡\n\npactl set-card-profile alsa_card.usb-GN_Audio_A_S_Jabra_EVOLVE_30_II_0005EDED3F4A09-00 pro-audio # 设置正确的情景模式\n# 切换声卡，即设置默认输入输出\npactl set-default-sink alsa_output.usb-GN_Audio_A_S_Jabra_EVOLVE_30_II_0005EDED3F4A09-00.pro-output-0 # 设置默认输出\npactl set-default-source alsa_input.usb-GN_Audio_A_S_Jabra_EVOLVE_30_II_0005EDED3F4A09-00.pro-input-0 # 设置默认输入\n\n一番折腾，最终成功让usb耳机出声。\n\n命令\n含义\n\npactl list cards [short]\n列出可用声卡\n\npactl get-default-sink/source\n获取默认输出/输入\n\npactl set-card-profile &lt;card-name/index&gt; &lt;card-profile&gt;\n给指定声卡设置情景模式",
		"tags": [ "note","pipewire","pulseaudio","linux","音频"]
},

{
		"title": "202411092142",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202411092142-frp使用小记/",
		"content": "frp官方文档：https://gofrp.org/zh-cn/docs/reference/server-configures/\n需要一个公网ip服务器运行frps，客户端运行frpc. 值得注意的是，运行frpc的客户端之间可以借助frps实现点对点直连（nat打洞），从而绕开frps（公网服务器）的带宽限制。\nfrps配置示例\n# file:///frps.toml\n\n#: Refer to https://gofrp.org/zh-cn/docs/reference/server-configures/\n#: for more information.\n\nauth.token = &quot;abc&quot; # 用于认证frpc的连接，frpc需要设置同样token才能连接\nbindPort = 7000\n# kcp 绑定的是 UDP 端口，可以和 bindPort 一样\nkcpBindPort = 7000\n# quic 绑定的是 UDP 端口，不能和 kcp 的一样\nquicBindPort = 7001\n\ntransport.tls.force = true\n\n# 默认为 127.0.0.1，如果需要公网访问，需要修改为 0.0.0.0。\nwebServer.addr = &quot;0.0.0.0&quot;\nwebServer.port = 7500\n# dashboard 用户名密码，可选，默认为空\nwebServer.user = &quot;admin&quot;\nwebServer.password = &quot;admin&quot;\n\nfrpc配置示例\n# file:///frpc.toml\n\n#: refer to https://gofrp.org/zh-cn/docs\nserverAddr = &quot;10.10.10.10&quot;\nserverPort = 7000\nauth.token = &quot;abc\n\n# 开启网页后台\n# webServer.addr = &quot;127.0.0.1&quot;\n# webServer.port = 7400\n# webServer.user = &quot;admin&quot;\n# webServer.password = &quot;admin&quot;\n\n[[proxies]]\nname = &quot;ssh-tunnel&quot;\ntype = &quot;tcp&quot;\nlocalIP = &quot;127.0.0.1&quot;\nlocalPort = 22\nremotePort = 8000\n\n[[proxies]]\nname = &quot;p2p_ssh&quot;\ntype = &quot;xtcp&quot;\n# 只有共享密钥 (secretKey) 与服务器端一致的用户才能访问该服务\nsecretKey = &quot;abcdefg&quot;\nlocalIP = &quot;127.0.0.1&quot;\nlocalPort = 22\n\n如此在外网可以通过ssh root@10.10.10.10 -p8000访问内网机器的sshd，流量经过公网服务器转发到内网机器。如果要建立点对点连接，需要在访问内网服务的机器上（下称本机）也执行frpc，作为visitor. 在这种情况下，内网机器frpc作为“服务端”，本机的frpc作为“客户端”。\nfrpc visitor配置示例\n# file:///frpc_visitor.toml\n\n#: refer to https://gofrp.org/zh-cn/docs\nserverAddr = &quot;10.10.10.10&quot;\nserverPort = 7000\nauth.token = &quot;abc&quot;\n\n[[visitors]]\nname = &quot;p2p_ssh_visitor&quot;\ntype = &quot;xtcp&quot;\nprotocol = &quot;kcp&quot;\nserverName = &quot;p2p_ssh&quot;\n# 只有共享密钥 (secretKey) 与服务器端一致的用户才能访问该服务\nsecretKey = &quot;abcdefg&quot;\nbindAddr = &quot;127.0.0.1&quot;\nbindPort = 3344 # 本地端口\nkeepTunnelOpen = true\n\n如此可以在本机使用ssh root@127.0.0.1 -p3344访问内网机器的sshd，且流量不用经过frps，绕过了公网服务器的带宽限制。",
		"tags": [ "note","frp","内网穿透","反代理"]
},

{
		"title": 202411100101,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202411100101firewalld使用小记/",
		"content": "centos自带的防火墙firewalld感觉不太好用，命令行太长了，开放/删除端口的命令比较长，记不住。这里列一个简单方法，\n\n直接编辑zone里面的xml文件，例如，/etc/firewalld/zones/public.xml\n改完之后直接firewall- --reload\n查看firewall- --list-ports是否生效\n\nfirewalld是一个守护进程，可用syst管理，systemctl start/stop firewalld.\nfirewall-是用户交互命令，光看这个命令就很长orz\n附带一篇参考吧：https://juejin.cn/post/6844904116443938824",
		"tags": [ "note","firewalld","防火墙","centos"]
},

{
		"title": 202411132048,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202411132048数字证书/",
		"content": "https比http安全在哪里？http是明文传输，如果被中间人劫持，你提交的表单（例如输入的密码）就会被窃取。而https是加密传输，即使被截取，得到的也是密文，无法直接破译。\nhttps协商要比http复杂一些，简单来说，分为几步：\n\n客户端发起http请求，服务端返回他的数字证书\n客户端（浏览器）根据自己所知道的CA机构密钥，一一验证服务端的数字证书是哪个CA颁发的（即用CA的公钥去解密数字证书，能解出来的就是该CA颁发的）\n再确认是一个可信CA颁发了服务端证书后，（上一步解密会得到服务端公钥），客户端使用对端（服务端）公钥加密消息，开始进行http连接，此时应该会带上自己（客户端）的公钥\n消息到达服务端后，这样双方就有了各自的公钥，可以互相发送加密消息\n\n数字证书是什么，解决了什么问题？\n数字证书是用来验证一个公钥所有权的密文，里面通常包含公钥持有人的公钥、基本信息（单位，名称，域名等）。数字证书一般由可信的第三方机构（CA-Certification Authorization机构）颁发。公钥所有人去CA机构申请证书，通常要缴费。而申请证书其实就是让CA用自己的私钥给公钥所有人的相关信息（他的公钥和基本信息）加密，加密后的产物就是公钥所有人的数字证书。\n数字证书就是“公钥的数字签名”！see：https://www.cnblogs.com/gide/p/16650487.html\n如果没有CA机制会发生什么问题？\n甲想给乙发信（加密的那种），因此他需要乙的公钥。但甲并非天生就有乙的公钥，在他获取公钥的过程中如果被第三者丙劫持，伪造一个公钥，那么甲会得到一个伪造的乙的公钥，他所有向乙发送的加密消息都会被丙知道，丙完全冒充了乙。因此，甲必须有证明“这个公钥就是乙的”的办法。为此他要求乙向CA机构申请数字证书，之后他会请求乙的数字证书。而丙无法伪造一个数字证书，使得甲误认为这是乙的证书。因为证书是由可信的CA机构颁发，已经给乙颁发了，不可能给丙再颁发一个带有同样个人信息的证书。且丙也无法绕过CA伪造证书，因为证书是由CA的私钥加密而来的。\nX.509证书\nX.509是ITU-T定义的证书格式，它包含\n\n两个 专有名称，用于唯一标识颁发证书的认证中心 (CA) 和 主体集 (向其颁发证书的个人或组织)。 专有名称包含多个可选组件:\n\n公共名称\n组织单元\n组织\n位置\n省/自治区/直辖市\n国家或地区\n\n数字签名。 签名由认证中心使用公用密钥加密技术创建:\n\n安全散列算法用于创建证书内容的摘要。\n摘要使用认证中心的专用密钥进行加密。\n使用 CA 的公用密钥对签名进行解密。\n制作证书内容的新摘要，并与解密的签名进行比较。 任何差异都表明证书可能已更改。 因此，数字签名向接收方保证，自证书发放以来，未对其进行任何更改。\n\n主体的域名。 接收方将此与证书的实际发送方进行比较。\n主体的公用密钥。\n\nHTTPs的安全性🔐\n一言以蔽之，HTTPS的流量是经过加密的，即便被中间人截取也无法轻易破译。HTTP的流量是明文的，裸奔！\n从超文本传输协议说起，HTTPs的\n对称加密\n数学定义\n非对称加密\n所谓非对称加密\n窃听三重奏（一）\n数字签名\n数字证书\nHTTPs的连接建立",
		"tags": [ "note","数字签名","数字证书","安全","非对称加密","http","https"]
},

{
		"title": 202411251922,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202411251922动态库链接问题/",
		"content": "参考修改：https://github.com/tbuktu/libntru/pull/47/files\n该仓库是纯C代码，构建工具是make. 但是代码直接下下来是无法编译通过的，它在poly.h中定义了多个函数指针，然后在poly.c中根据平台架构等区分给这几个函数指针不同的实现。\n例如\n// poly.h\nuint8_t (*ntru_invert)(NtruPrivPoly *a, uint16_t mod_mask, NtruIntPoly *Fq);\n\n// poly.c\nvoid ntru_set_optimized_impl_poly() {\n...\nif (sizeof(void*) &gt;= 8) /* 64-bit arch */\nntru_invert = ntru_invert_64;\nelse\nntru_invert = ntru_invert_32;\n...\n#if _LP64\nntru_invert = ntru_invert_64;\n#else\nntru_invert = ntru_invert_32;\n#endif\n\n这样如果多个源文件包含poly.h，必然会存在重复定义的问题，违反ODR（one-definition-rule）。而解决方法首先想到在poly.h中为符号加上extern，改定义为声明。然后这样一来，引发的效果还是符号未定义。\n$ gcc poly.c -c -o poly.o\n$ nm poly.o | grep ntru_invert\nU ntru_invert\n0000000000005228 T ntru_invert_32\n0000000000005bc9 T ntru_invert_64\n\n该项目将函数指针的初始化放在一个init函数里，要求使用者先调用init函数，可这样导致其他依赖这个库的文件编译错误，报错找不到这个符号的定义。\n而修改的方案也很简单，只需要在poly.c中再定义一次这个符号，那么该符号就变成了为初始化的全局数据（B）。\n// poly.c\n\n// 补一个定义即可\nuint8_t (*ntru_invert)(NtruPrivPoly *a, uint16_t mod_mask, NtruIntPoly *Fq);\n...\nvoid ntru_set_optimized_impl_poly() {\n...\nif (sizeof(void*) &gt;= 8) /* 64-bit arch */\nntru_invert = ntru_invert_64;\nelse\nntru_invert = ntru_invert_32;\n...\n#if _LP64\nntru_invert = ntru_invert_64;\n#else\nntru_invert = ntru_invert_32;\n#endif\n\n$ nm poly.o | grep ntru_invert\n0000000000000000 B ntru_invert\n00000000000041f0 T ntru_invert_32\n0000000000003b70 T ntru_invert_64\n\n这样符号至少有定义，但未初始化。其他依赖单元编译时就不会报错。\n参考PR：https://github.com/tbuktu/libntru/pull/47/files\n这个项目还牵扯出一个问题，就是编译出的可执行文件在运行时报错，找不到编出来的动态库：\n$ ./testham\n./testham: error while loading shared libraries: libntru.so: cannot open shared object file: No such file or directory\n$ ldd testham 127 19:44\nlinux-vdso.so.1 (0x00007ac6eec8a000)\nlibntru.so =&gt; not found\nlibm.so.6 =&gt; /usr/lib/libm.so.6 (0x00007ac6eeb5a000)\nlibc.so.6 =&gt; /usr/lib/libc.so.6 (0x00007ac6ee969000)\n/lib64/ld-linux-x86-64.so.2 =&gt; /usr/lib64/ld-linux-x86-64.so.2 (0x00007ac6eec8c000)\n$ ls\nchangelog LICENSE Makefile.bsd Makefile.os2 Makefile.win README testham*\nlibntru.so* Makefile Makefile.linux Makefile.osx PATENTS src/ tests/\n\n可见不会搜索当前目录，此时需要给链接器传额外参数，让他搜索当前目录，在makefile里加上\nCFLAGS+=-Wl,-rpath,./\n\n即可，参考：\n\nhttps://unix.stackexchange.com/a/479476\nhttps://serverfault.com/a/402590\n\n$ ldd testham\nlinux-vdso.so.1 (0x000079365271f000)\nlibntru.so =&gt; ./libntru.so (0x00007936526d7000)\nlibm.so.6 =&gt; /usr/lib/libm.so.6 (0x00007936525b9000)\nlibc.so.6 =&gt; /usr/lib/libc.so.6 (0x00007936523c8000)\n/lib64/ld-linux-x86-64.so.2 =&gt; /usr/lib64/ld-linux-x86-64.so.2 (0x0000793652721000)\n$ ./testham\nRunning tests...\ntest_ntruprime_inv_int ✓\ntest_ntruprime_inv_poly ✓\ntest_mult_int ✓\ntest_mult_tern ✓\ntest_mult_prod ✓\ntest_inv ✓\ntest_arr ✓\ntest_ntruprime_keygen ✓\ntest_ntru_keygen ✓\ntest_encr_decr ✓\ntest_idxgen ✓\ntest_bitstring ✓\ntest_key ✓\ntest_hash ✓\nAll tests passed\n\nNM命令参考\n\nhttps://voidint.github.io/post/tool/nm/\nhttps://linuxtools-rst.readthedocs.io/zh-cn/latest/tool/nm.html",
		"tags": ["if", "else", "endif", "if", "else", "endif", "note","链接路径","符号表","链接","linkage"]
},

{
		"title": 202412111913,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412111913dunst使用小记/",
		"content": "Dunst是一个notification-daemon，同类的软件包有很多，其中之一是extra/notification-daemon，如果没注意，你可能默认用的就是这个软件包。当安装了多个notification-daemon的时候，他们都会宣称自己提供了同个dbus service (org.freedesktop.Notifications)，导致冲突，默认会用一个，但具体规则我不清楚[1]。\nyychi@/usr/share/dbus-1/services&gt; grep org.freedesktop.Notifications *\norg.freedesktop.Notifications.service:Name=org.freedesktop.Notifications\norg.knopwob.dunst.service:Name=org.freedesktop.Notifications\n\n因此，最好保证这里只有一个提供这个service.\nnotification-daemon作为守护进程，接受客户端（libnotify包中提供的notify-send）的通知请求，按照规则显示通知。除此之外，dunst还提供dunstify（完全兼容notify-send）来发送通知以及dunstctl来配置dunst.\ndunst作为守护进程，可以配置通知的样式。从官网[showcase][1]中直接拿一个来用，简单改改即可。凑合看看，比之前默认的好看不少。猛击[这里][2]获取配置。\n\n参考：https://wiki.archlinux.org/title/Dunst关于启动的描述和这个问题帖：https://bbs.archlinux.org/viewtopic.php?id=289214\n[1]: https://dunst-project.org/showcase/\n[2]: https://github.com/guyueshui/dotfiles/blob/master/.config/dunst/dunstrc ↩︎",
		"tags": [ "note","dunst","notification-daemon","桌面通知","美化"]
},

{
		"title": 202412112316,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412112316linux桌面美化/",
		"content": "icon-theme\npapirus-icon-theme\narc-icon-theme\narc-gtk-theme\nicon_theme位置：/usr/share/icons\ntheme位置：/usr/share/themes\n此文有截图效果：https://www.omgubuntu.co.uk/best-icon-themes-ubuntu\n更换示例：\n\n202412212317fcitx5更换systray-icon\n202412212328goldendict更换systray-icon\n\n如何设置\n参考：https://wiki.archlinux.org/title/GTK#Configuration",
		"tags": [ "note","美化","桌面","linux"]
},

{
		"title": 202412112322,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412112322firefox重启保留标签页/",
		"content": "firefox带标签页重启\n\n地址栏输入：about:profiles\n选择正常重启\n\nfirefox直达密码管理：about:logins\n\n顺带说下chrome带标签页重启\n\n直接地址栏输入chrome://restart\n\nchrome直达密码管理：chrome://password-manager",
		"tags": [ "note","firefox","trick","技巧"]
},

{
		"title": 202412121707,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412121707redshift使用小记/",
		"content": "Redshift是linux桌面护眼程序，配置简单却足够使用。开启后自动根据一天中的时间设置渐变色温（色温范围在日间色温和夜间色温之间）。减少蓝光输出，稍微护眼一点吧。\n# file: .config/redshift.conf\n[redshift]\n# 手动提供位置信息\nlocation-provider=manual\n# 日间温度6000K\ntemp-day=6000\ntemp-night=4500\n\n[manual] # 手动位置信息配置，经纬度，x for secret\nlat=xxx.1\nlon=xxx.8\n\n命令行redshift可配合脚本使用，另有redshift-gtk供图形化界面使用。",
		"tags": [ "note","redshift","桌面","美化","护眼"]
},

{
		"title": 202412131501,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412131501waydroid使用小记/",
		"content": "Waydroid是一款可以在linux体内跑android的容器。不同于虚拟机，它利用容器化技术直接在Linux启动android系统，性能比虚拟机要好得多。目前仅支持Wayland session. 但通过在X session中使用一些compositor也能跑起来。\n顺便说下，waydroid数据目录：/home/yychi/.local/share/waydroid/data.\n使用指南主要参考archwiki.\n\n与host共享文件夹，参考此处。\n安装smartdock（一个类似桌面端的launcher）\n\nTroubleshooting\nAndroid容器内无网络\n\n[!note]\nAndroid内部快捷菜单中的wifi按钮开关是假的，没有任何意义。即，无论它的状态是啥跟容器内部有无网络连接无关！\n\n确保开启iptables和dnsmasq，使用systemctl status &lt;xxx&gt;查看状态\n/usr/lib/waydroid/data/scripts/waydroid-net.sh脚本配置问题，参考这个issue\n\nArm安装包安装失败\n由于waydroid的架构和宿主（host）一致，一般是x86_64. 所以为arm架构编译的apk会安装失败。可以尝试casualsnek的脚本[1]。\n这里仅提两个坑点：\n\n上面的脚本指导使用python虚拟环境安装依赖包，但是他又要调用waydroid的系统脚本（依赖dbus-python），而且还要sudo权限，sudo完之后很多包会找不到，不如一开始就用系统环境用sudo安装依赖。\n大陆用户可能受网络问题困扰，终端设置ALL_PROXY不再生效，可能是request包不读这个环境变量。我的做法是，直接浏览器下载好放到指定位置，改改代码跳过校5，直接安装。\n\nReferences\n\nScript to start Android LineageOS with Waydroid in an X11 session\nNo internet in waydroid\n\n这里参考archwiki. ↩︎",
		"tags": [ "note","waydroid","android","linux","container","安卓","容器"]
},

{
		"title": 202412151610,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412151610pipewire-commands/",
		"content": "[!error] Disclaimer\nAdapted from https://kowalcj0.github.io/2022/01/09/handy-pipewire-commands-and-tools/\n\nHandy Pipewire commands and tools\nPipeWire provides a nice set of CLI commands and tools to manage and monitor A/V devices on you machine. Here’s a list of those commands with some usage examples:\n\npw-cli - The PipeWire Command Line Interface.\n\nExamples:\npw-cli dump short Node - list all input/output nodes and their state.\npw-cli info 0 - inspect the state of the server.\n\nLists useful details like: clock-rate and allowed clock-rates\n\npw-mon dumps and monitors the state of the PipeWire daemon.\npw-metadata - Monitor, set and delete metadata on PipeWire objects.\n\npw-metadata -n settings - list the current settings.\n\npw-dot can dump a graph of the pipeline, check out the help for how to do this.\npw-top monitors the real-time status of the graph. This is handy to find out what clients are running and how much DSP resources they use.\npw-dump dumps the state of the PipeWire daemon in JSON format. This can be used to find out the properties and parameters of the objects in the PipeWire daemon.\npw-link - List, monitor or link input or output ports, e.g.:\n\npw-link --input\npw-link --output\n\nBTW. you can still use pactl command to control “PulseAudio” sound server, e.g.:\n\npactl info - shows details like server name &amp; version, sink &amp; source names\npactl list - list all clients, cards, their properties, loaded modules etc\npactl list short - same as above but much less verbose\n\nMore info:\n\nhttps://github.com/MusicPlayerDaemon/MPD/issues/1288\nhttps://github.com/MusicPlayerDaemon/MPD/issues/1263",
		"tags": [ "note","av","pulseaudio","audio","linux","pipewire"]
},

{
		"title": 202412171658,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412171658imv官包不支持gif/",
		"content": "Archlinux的官方extra/imv不支持gif文件查看，\nextra/imv 4.5.0-4\nImage viewer for Wayland and X11\n\narchlinuxcn/imv-lily 4.5.0-7 [已安装]\nImage viewer for Wayland and X11 (with lilydjwg's patches)\n\n本身imv是支持的，前提是依赖libnsgif库，但它要求libnsgif版本&lt; 1.0.0，但当前最新版本是1.0.0，所以官包打不上这个依赖，没办法带上libnsgif，从而不支持gif查看。而且这个库从0.2.1到1.0.0有很多不兼容变更：\n\n头文件从libnsgif.h改为nsgif.h，diff\n头文件暴露的接口，结构体全部换名字，有的还给删掉了，这直接让之前用这个库的人懵了，diff1, diff2\n\n解决办法有二：\n\n自己下载imv源码，机器上将libnsgif库降级为0.2.1版本，自行编译\n使用依云改过的包archlinuxcn/imv-lily，亲测可以查看gif文件\n\nPS：可使用imv -h查看当前编译信息是否带了libnsgif支持，如下是我自己编译带了libnsgif支持的。\n./imv-x11 -h\nimv v4.5.0\nSee manual for usage information.\nThis version of imv has been compiled with the following backends:\n\nName: FreeImage\nDescription: Open source image library supporting a large number of formats\nWebsite: http://freeimage.sourceforge.net/\nLicense: FreeImage Public License v1.0\n\nName: libtiff\nDescription: The de-facto tiff library\nWebsite: http://www.libtiff.org/\nLicense: MIT\n\nName: libpng\nDescription: The official PNG reference implementation\nWebsite: http://www.libpng.org/pub/png/libpng.html\nLicense: The libpng license\n\nName: libjpeg-turbo\nDescription: Fast JPEG codec based on libjpeg. This software is based in part on the work of the Independent JPEG Group.\nWebsite: https://libjpeg-turbo.org/\nLicense: The Modified BSD License\n\nName: libRSVG\nDescription: SVG library developed by GNOME\nWebsite: https://wiki.gnome.org/Projects/LibRsvg\nLicense: GNU Lesser General Public License v2.1+\n\nName: libnsgif\nDescription: Tiny GIF decoding library from the NetSurf project\nWebsite: https://www.netsurf-browser.org/projects/libnsgif/\nLicense: MIT\n\nName: libheif\nDescription: ISO/IEC 23008-12:2017 HEIF file format decoder and encoder.\nWebsite: http://www.libheif.org\nLicense: GNU Lesser General Public License\n\nName: libjxl\nDescription: The official JPEGXL reference implementation\nWebsite: https://jpeg.org/jpegxl/\nLicense: The Modified BSD License\n\nimv's full source code is published under the terms of the MIT\nlicense, and can be found at https://sr.ht/~exec64/imv\n\nimv uses the inih library to parse ini files.\nSee https://github.com/benhoyt/inih for details.\ninih is used under the New (3-clause) BSD license.\n\nPS2：imv官方仓库：https://git.sr.ht/~exec64/imv",
		"tags": [ "note","imv","image-viewer","linux","tool"]
},

{
		"title": 202412202053,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412202053simplify/",
		"content": "目录结构简化\n附件路径不再使用相对路径\n./assets/${filename}/xxxx\n直接迁移至一级目录assets，顺应简单第一原则。\n\n另外摘录一下记笔记原则：\n国外有作者将卡片盒笔记的使用原则总结得非常系统，翻译如下：\n\n原子性原则：这个词是 由 Christian Tietze 创造的，一个笔记只表述一个内容，这样笔记连接起来的指向性更加明确。\n自主原则：每个笔记都应该是独立的，自成一体，包含完整含义，这使得笔记可以独立于相邻位置的卡片进行移动、延伸、分离和串联，就算脱离原始上下文，依然能保证内容的完整性和可读性。\n始终记得链接你的笔记：无论何时添加笔记，请确保将其与内容相关的笔记链接，避免断连，正如卢曼本人所说：“每一个笔记都是引用和反向引用系统网络中的一个元素，笔记的质量就是取决于这个网络，没有被链接起来的笔记，将被 Zettelkasten 遗忘。\n解释你为什么要链接笔记：每当你通过链接连接两个笔记时，一定要简要解释你为什么要链接它们。否则，多年后当你重新查看笔记时，你可能忘记连接它们的原因。\n用你自己的话：不要复制和粘贴 。如果你遇到一个有趣的想法并想将其添加到你的 Zettelkasten 中，你必须用自己的语言表达该想法，确保多年后你还能理解。不要把你的 Zettelkasten 变成一堆复制粘贴的信息。\n保留参考文献：始终在笔记中添加参考文献，以便你知道自己的想法是从哪里获得的 。这可以防止抄袭，并使你以后可以轻松地重新访问原始来源。\n将你自己的想法添加到 Zettelkasten：如果你有自己的想法，请将它们作为笔记添加到 Zettelkasten，同时牢记原子性、自主性和链接需求的原则。\n不要担心笔记结构：不要担心将笔记放在整齐的文件夹中，或者按照先入为主的类别进行归类。正如施密特所说，在 Zettelkasten 这张笔记网中，每一个卡片都没有特权地位，也没有顶部也没有底部，让组织有机地发展。\n添加关联笔记：当你注意到看似随机的笔记之间的内在关联时，请创建关联笔记，该笔记的目的是将其它笔记链接在一起并解释它们之间的关系。\n添加大纲笔记：随着想法开始合并为主题，创建大纲笔记。大纲笔记是只包含一系列指向其他笔记的链接的笔记，将其他笔记按特定顺序排列以创建故事、叙述或论点。（主题索引）\n从不删除：不要删除旧笔记，相反，链接到一条新的笔记去解释旧笔记有什么问题。这样，你的 Zettelkasten 将反映你的思维是如何随着时间的推移而演变的，这将防止 事后偏见。此外，如果你不删除，你可能会重新审视那些可能最终证明是正确的旧想法。\n大胆添加笔记：你的 Zettelkasten 中永远不会被信息塞满，而且，你将添加那些不会立即使用的笔记。就算添加更多笔记也不会破坏你的 Zettelkasten ，或干扰其正常运行。要知道，卢曼在他的 Zettelkasten 中有 90,000 条笔记！\n\nsource: 杨奇的博客",
		"tags": [ "note","笔记","方法论"]
},

{
		"title": 202412202251,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412202251ssh问题记录/",
		"content": "WARNING: terminal is not fully functional\nssh连接服务器时，使用less或vim提示如下信息\nWARNING: terminal is not fully functional\n- (press RETURN)\n\n其原因是目标机器没有你带过去的terminfo. 例如，我如果使用urxvt或者xterm，带过去的TERM环境变量可能就是目标机器已经有的，所以支持，可以很好的展示颜色，超链接等。如果我用小众一点的terminal emulator，例如kitty，带过去的TERM环境变量可能不受目标机器支持。当然，兼容性最好的是xterm. 所以要么在目标机器bashrc里面export TERM=xterm或者xterm-256color，亦或是安装相应terminal的terminfo. 例如kitty的kitty-terminfo. 此外，ncurses-term里面包含了大量terminfo，可以先装下这个。\n参考：https://www.linuxquestions.org/questions/ubuntu-63/terminal-is-not-fully-functional-410946/\nsftp error: Received message too long\nsftp连接服务器时，如果报这个错，基本上是因为连上ssh后有标准输出，这使sftp不知道干啥，所以报错。\nThis output confuses the sftp/scp client.  You can verify if your shell is doing this by executing:\nssh /usr/bin/true\nIf the above command produces any output, then you need to modify your shell initialization.\n确保连上ssh之后不会有任何输出。\n参考：https://unix.stackexchange.com/a/84141",
		"tags": [ "note","ssh","terminfo","troubleshooting","sftp"]
},

{
		"title": "202412212317",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412212317fcitx5更换systray-icon/",
		"content": "安装了Papirus图标包（extra/papirus-icon-theme）之后，按照wiki上的教程设置icon-theme，发现fcitx5的托盘图标太暗了，看不清楚。于是想着换一个亮一点的。最后鼓捣发现把图标包设置为Papirus-Dark之后就好了，托盘图标就变亮了。PS，下图最后一个图标是替换过之后的goldendict图标。",
		"tags": [ "note","fcitx","systray","icon-theme","美化","linux"]
},

{
		"title": 202412212328,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412212328goldendict更换systray-icon/",
		"content": "参考：https://github.com/goldendict/goldendict/issues/1304#issuecomment-732902086\n下图最后一个图标就是goldendict.",
		"tags": [ "note","icon-theme","goldendict","美化","linux","systray"]
},

{
		"title": 202412221603,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412221603笔记方法论/",
		"content": "目前遵循卡片法记录笔记。有心得两条：\n\n没有无用的笔记。或多或少会在某个时刻发挥作用，否则你当初干嘛要记？\n没有记错的笔记。如果有，留下他以便追踪改进的历程，知道一开始为啥错了，错在哪了。就和以前练字一样，发现一个字写不好，千万不要写一部分就重写。一定要把它写完。在整体看看是哪里没写好，才能改进。\n\n参见笔记原则6条。",
		"tags": [ "note","笔记","note","方法论"]
},

{
		"title": 202412222011,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412222011termux编译baidupcs/",
		"content": "有两种方式编译android版本的baidupcs\n\ntermux直接配好go环境，直接编译\n电脑上下载androind ndk，指定编译架构后编译\n\n我最后使用第一个方案成功。第二个虽然编译成功，放到termux里面运行还是会报dns的问题。最后work的编译命令行\nGOOS=android GOARCH=arm64 CGO_ENABLE=1 go build\n\n如果下载依赖过慢，设置一下GOPROXY环境变量，\n$ go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct\n$ go env | grep GOPROX\nGOPROXY='https://mirrors.aliyun.com/goproxy/,direct'\n\n[!tip] 关于登录百度账号\n建议直接使用bduss的方式登录，\n./BaiduPCS-GO login -bduss &lt;your_bduss_string&gt;\n账号密码貌似登录不上。bduss获取方式为，打开浏览器，登录pan.baidu.com，查看cookie，找到bduss对应的value即可。\n\n参考\n\n使用方案二的参考：https://web.archive.org/web/20190830041727/http://www.iikira.com/2017/08/09/golang-compile-jc-2/\n报错invalid reference to runtime.rawbyteslice修改方案：https://github.com/qjfoidnh/BaiduPCS-Go/pull/344/files\nbaidupcs项目地址：https://github.com/qjfoidnh/BaiduPCS-Go",
		"tags": [ "note","baidupcs","termux","android"]
},

{
		"title": 202412242129,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412242129rygel使用小记/",
		"content": "Rygel是一个流媒体服务器，可与支持DLNA/UPnP协议的客户端通信达到局域网文件共享、家庭媒体播放的效果。\n\n在电脑上启动（也可以user unit的方式启动，即systemctl --user start rygel.service）之后，局域网下的客户端就能搜寻到其服务，下图是xplore的DLNA访问截图：\n\n如图，可以在手机上浏览PC上的媒体（图片、视频和音乐），可以直接通过流式播放，也可以下载到本地操作。",
		"tags": [ "note","rygel","dlna"]
},

{
		"title": 202412251940,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412251940linux目录结构/",
		"content": "三个目录的区别，\n\n/usr: 系统自带的包管理器（如archlinux的pacman）安装的软件包及其产物一般在此目录\n/usr/local: 自己下载源码编译安装的系统级软件包及其产物一般在此目录\n~/.local: 自己安装的用户级软件包及其产物一般在此目录",
		"tags": [ "note","linux","directory","目录结构"]
},

{
		"title": 202412262023,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202412262023qt添加翻译/",
		"content": "QT Application想要支持多语言，需要添加一个项目对应的ts（translation source）文件。每支持一种语言就要添加一个ts文件。同时在cmake中指明翻译文件。\n# LinguistTools是多语言组件\nfind_package(Qt6 CREQUIRED COMPONENTS Widgets LinguistTools)\n\n# translation source (ts)\nset(TS_FILES src/i18n/QWdigetTutorial_zh_CN.ts)\n\nset(PROJECT_SOURCES\nsrc/main.cpp\nsrc/mainwindow.cpp\nsrc/mainwindow.h\nsrc/mainwindow.ui\n${TS_FILES}\ntextfinder.qrc\n)\n\n# translation target\nqt_create_translation(QM_FILES ${CMAKE_SOURCE_DIR} ${TS_FILES})\nadd_custom_target(translation ALL DEPENDS ${QM_FILES})\nqt_add_lrelease(QM_FILES)\n\n同时在代码中调用翻译文件，\n// main.cpp\n\nint main(int argc, char *argv[])\n{\nQApplication a(argc, argv);\n\n// add a translation\nQTranslator translator;\nQLocale locale = QLocale::system(); // get system locale\nqDebug() &lt;&lt; &quot;syslocale is &quot; &lt;&lt; locale.name();\n// replace your project name here\n// something like &quot;QWidgetTutorial_zh_CN&quot;\nQString basename = &quot;QWdigetTutorial_&quot; + locale.name();\nif (translator.load(basename)) {\na.installTranslator(&amp;translator);\n}\n\nMainWindow w;\nw.setWindowFlags(Qt::Window | Qt::WindowCloseButtonHint);\nw.show();\nreturn a.exec();\n}\n\n上述代码中直接使用文件名的形式QWidgetTutorial_zh_CN，实际上ts文件会被编译成qm文件使用。上面代码能读到qm文件的条件有二，\n\n可执行文件必须和翻译文件在一个目录\n执行时必须在可执行文件所在目录执行，即使满足条件1，但我像这样执行src/&lt;executable&gt;，那么src目录下的翻译文件是读不到的。也就是执行目录（并不一定是可执行文件所在的目录）下必须有翻译文件（xx.qm）。\n\n例如，linux命令行很多，随着当前目录的变化，执行/usr/bin/ls，他的执行目录也会变化不是吗。\n如何生成ts文件？\n先创建ts文件，大部分时候Qt Creator会帮你创建。空文件长这样，\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE TS&gt;\n&lt;TS version=&quot;2.1&quot; language=&quot;zh_CN&quot;&gt;\n&lt;/TS&gt;\n\n通过在CMakeLists.txt里面指定\nqt_create_translation(QM_FILES ${CMAKE_SOURCE_DIR} ${TS_FILES})\nadd_custom_target(translation ALL DEPENDS ${QM_FILES})\n\n然后\nmake translation\n\n即可往ts里面填充待翻译的文本，自动从源文件中提取，标记为“unfinished”表示还没翻译。\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE TS&gt;\n&lt;TS version=&quot;2.1&quot; language=&quot;zh_CN&quot;&gt;\n&lt;context&gt;\n&lt;name&gt;MainWindow&lt;/name&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;14&quot;/&gt;\n&lt;source&gt;MainWindow&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;32&quot;/&gt;\n&lt;source&gt;Keyword&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;42&quot;/&gt;\n&lt;source&gt;Find&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;65&quot;/&gt;\n&lt;source&gt;file&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;72&quot;/&gt;\n&lt;source&gt;window&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;78&quot;/&gt;\n&lt;source&gt;help&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;89&quot;/&gt;\n&lt;source&gt;open&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;94&quot;/&gt;\n&lt;source&gt;close&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;message&gt;\n&lt;location filename=&quot;../mainwindow.ui&quot; line=&quot;99&quot;/&gt;\n&lt;source&gt;about&lt;/source&gt;\n&lt;translation type=&quot;unfinished&quot;&gt;&lt;/translation&gt;\n&lt;/message&gt;\n&lt;/context&gt;\n&lt;/TS&gt;\n\n然后通过Qt Creator自带的linguist工具添加翻译即可。\nlinguist QWdigetTutorial_zh_CN.ts\n\n翻译完成之后，再make translation一些即可编译出翻译好的QWdigetTutorial_zh_CN.qm文件，程序直接读取他即可达到翻译效果。",
		"tags": [ "note","qt","多语言"]
},

{
		"title": 202501082036,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202501082036suckless-windows/",
		"content": "Windows毛病例举，\n\n祖传蓝屏（这一点在xp尤为严重，win7以上已经少见许多）。\n静默更新。悄悄下载更新，强制更新，莫名其妙跳出来说要更新，关机时强迫更新。恶心的默认策略！\n万年难用的资源管理器，不带标签页，窗口开一堆。\n开发上来说，编译工具链体验比不上linux.\n\n虽然Windows很难用，但并不妨碍它桌面市场占用率第一的地位。在生活或者工作中，我还是无法避免地被动使用windows. 因此，我希望通过一些简单定制，让我的使用体验能好一些。\n安装MSYS2\n如果你在windows上做开发，必定会装git bash，而它提供的终端就是MINGW（Minimalist GNU for Windows）。它的主要作用是提供windows版本的gcc编译工具链。它自带了一些linux基础命令，仅仅是基础。所以MSYS2出现了，它在MINGW的基础上，提供了更多的命令，并且自带了一个著名的包管理器—Pacman. 没错就是Archlinux的包管理器。如此一来便可以在在windows上使用相同的linux命令行，而这些都是适配原生windows的，并非虚拟机或者子系统之类的。并且想要啥软件包，直接通过pacman安装也非常方便。\nMinGW、Clang、UCRT？\n安装完之后，会产生多个launcher，选择哪个呢？这里有详细的对比。其实就是工具链和运行时库的区别。一般用gcc建议选择MINGW64，用llvm建议使用CLANG64.\n一点配置\n网上的配置帖子还是比较多的，这里简单列举几个常用的。\n修改镜像\n/etc/pacman.d 文件夹里面包含几个mirrorlist，新版的MSYS2里面默认已经有中科大源。直接编辑将其提前即可。\nServer = http://mirrors.ustc.edu.cn/msys2/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/\n\n禁用某些源\n编辑/etc/pacman.conf，注释掉不想要的源。\n\n[!attention]\nvim和zsh在mingw里面，mingw64和clang64里面都没有。\n\n参考：https://my.oschina.net/zuozhihua/blog/8757266\n继承环境变量\n如果你之前安装过git bash，现在你的电脑里面应该有两套mingw（一个git bash安装的，一个是MSYS2安装的）。Git bash里面自带vim. 而MSYS2里面可以通过包管理器安装vim. 然而重要的是windows系统程序的路径需要继承下来，这样可以方便的在mingw里面直接调用windows程序例如\n\nnotepad.exe：记事本\n：命令提示符\nexplorer：文件管理器\n\n要继承windows系统环境变量，找到MSYS2的安装目录（例如，D:\\msys64）下有mingw64.ini，将里面的\nMSYS2_PATH_TYPE=inherit\n\n取消注释，再次打开mingw64即可继承系统环境变量。\n\n上面只改了MinGW64的launcher，如要改其他可如法炮制。\n\n更改默认shell\nlauncher.ini（例如mingw64.ini）里面添加环境变量\nSHELL=/usr/bin/zsh\n\n参考：https://superuser.com/questions/961699/change-default-shell-on-msys2\n添加到vscdoe集成终端\n设置里面加上，参考：https://gist.github.com/dhkatz/106891324c9624074a84d11e2691144b\n{\n&quot;terminal.integrated.defaultProfile.windows&quot;: &quot;MSYS2 MINGW64&quot;,\n&quot;terminal.integrated.profiles.windows&quot;:{\n&quot;MSYS2 MINGW64&quot;: {\n&quot;path&quot;: &quot;D:\\\\msys64\\\\usr\\\\bin\\\\bash.exe&quot;,\n&quot;args&quot;: [&quot;--login&quot;, &quot;-i&quot;],\n&quot;env&quot;: {\n&quot;MSYSTEM&quot;: &quot;MINGW64&quot;,\n&quot;CHERE_INVOKING&quot;: &quot;1&quot;,\n&quot;MSYS2_PATH_TYPE&quot;: &quot;inherit&quot;\n}\n},\n&quot;PowerShell&quot;: {\n&quot;source&quot;: &quot;PowerShell&quot;,\n&quot;icon&quot;: &quot;terminal-powershell&quot;\n},\n&quot;Command Prompt&quot;: {\n&quot;path&quot;: [\n&quot;${env:windir}\\\\Sysnative\\\\.exe&quot;,\n&quot;${env:windir}\\\\System32\\\\.exe&quot;\n],\n&quot;args&quot;: [],\n&quot;icon&quot;: &quot;terminal-&quot;\n},\n&quot;Git Bash&quot;: {\n&quot;source&quot;: &quot;Git Bash&quot;\n}\n}\n}\n\n安装Everything\nEverything是一个windows文件搜索程序，搜索速度快，轻量易用，支持正则表达式。完爆windows资源管理器自带的搜索功能。直接至官网下载安装即可。\n安装QtTabBar\nQtTabBar是一款windows资源管理器扩展工具。之前说了，windows自带的文件管理器不支持标签页。这才有了QtTabBar. 值得一提的功能点：\n\n深度资源管理器标签支持，甚至控制面板都是一个标签页的事儿。\n支持用户自定义组，放置常用路径（类似于书签）。\n支持多语言，官网下载翻译包即可。\n桌面快捷操作。桌面双击即可触发浮动菜单，常用路径一键即达。\n不俗的文件预览功能。鼠标悬停即可预览目录、图片、视屏等。预览图片真的很实用！\n\n微软拼音添加小鹤双拼\n作为双拼爱好者，当初去知乎吸收了一下各种双拼方案对比，决定学小鹤，至今已经忘记它有啥优缺点了，反正用着挺好就是了。\n方案来自互联网。在CMD中直接粘贴\nreg add HKCU\\Software\\Microsoft\\InputMethod\\Settings\\CHS /v UserDefinedDoublePinyinScheme0 /t REG_SZ /d &quot;小鹤双拼*2*^*iuvdjhcwfg^xmlnpbksqszxkrltvyovt&quot; /f\n\nPS，微软大法好！在曾经的XP时代，搜狗拼音还是很好用的，如今已是臃肿不堪。后来一直在找替代，知道微软拼音横空出世。至此windows输入法无需再纠结。其界面节约，打字流畅，又支持添加小鹤双拼，已经很够用了！\n另辟蹊径之linux虚拟机\n无论是WSL还是MSYS2，启动起来都有些卡，而且换zsh之后就更卡了。目前还不清楚原因，所以才有了这种尝试。Windows下可以使用virtualbox安装一个linux虚拟机，然后开启sshd，配置好端口转发（或者虚拟网卡）即可在宿主机上ssh连接虚拟机，体验上和linux远程开发机相差无几。\n使用VirtualBox安装一个Archlinux虚拟机重点步骤：\n\n安装VirtualBox\n下载archlinux镜像（LiveCD）\n从镜像启动虚拟机，执行安装流程，这一步参考archwiki中的installation guide\n\n值得注意的是，虚拟磁盘创建分区的时候，建议直接选择MBR分区表。我一开始选择GPT分区表，多挂载一个boot分区，反复装了3次，装完启动引导重启都提示找不到可启动的设备。反正是虚拟机，也不用考虑引导多个系统，直接MBR分区表，还可以少挂载一个boot分区。\n装完之后安装一些常用软件，\n\nvim\nzsh\nopenssh\nNetworkManager\n\n[!attention]\nLiveCD里面网络配置是开箱即用的，但这并不表示装好的系统网络配置和LiveCD一样。当你兴奋地重启进新系统之后，很可能发现里面没网。因此，一定要在安装过程中（arch-chroot）把网络管理器的包装好。\n\n启动进新系统之后，\nsystemctl start NetworkManager.service # 启动网络管理器\nsystemctl enable NetworkManager.service # 设为自动启动\n\n配置端口转发\n系统启动之后，不必装图形界面。直接启动一个ssh sever，然后在windows上ssh连上即可。使用体验和远程Linux开发机一致。但宿主机（Host）和虚拟机（VM）的网络不一定直接相通，还须做一点配置。\n端口转发配置参考SSH连接NAT网络模式VirtualBox虚拟机。\n\n配置固定IP\n端口转发配置简单易用，但有一个小缺点。每次暴露一个端口，都需要新增一条规则。比如我转发22端口给ssh，那我sftp的23端口呢？这时候又得新增一条规则，比较麻烦。\n我们可以通过增加一张虚拟网卡，配置静态IP地址和主机网络互通。此后直接访问这个IP带端口即可访问虚拟机。配置参考Win10宿主机ssh连接VirtualBox里的archlinux虚拟机。\n需要注意一点，配置接口（interface）静态地址并使之持久化生效是网络管理器的职责。所以一定要通过网络管理器的接口设置IP地址。之前安装的NetworkManager提供nmcli命令行配置工具。详细用法参考NetworkManager - ArchWiki.\n使用示例，\nyychi@~/bin&gt; nmcli dev\nDEVICE TYPE STATE CONNECTION\nwlp2s0 wifi 已连接 LovelyLife\nlo loopback 连接（外部） lo\n\nyychi@~/bin&gt; nmcli connection\nNAME UUID TYPE DEVICE\nLovelyLife 92506e38-1823-4f66-1a89-75a62ecabe74 wifi wlp2s0\nlo 7e2fe31d-8ba1-1823-ad29-239857601abb loopback lo\n\nyychi@~/bin&gt; nmcli connection edit LovelyLife\n\n===| nmcli 交互式连接编辑器 |===\n\n正在编辑已有的连接 &quot;802-11-wireless&quot;：&quot;LovelyLife&quot;\n\n输入 &quot;help&quot; 或 &quot;?&quot; 查看可用的命令。\n输入 &quot;print&quot; 来显示所有的连接属性。\n输入 &quot;describe [&lt;设置&gt;.&lt;属性&gt;]&quot; 来获得详细的属性描述。\n\n您可编辑下列设置：connection, 802-11-wireless (wifi), 802-11-wireless-security (wifi-sec), 802-1x, ethtool, match, ipv4, ipv6, hostname, link, tc, proxy\nnmcli&gt; set ipv4.addresses 192.168.56.100/24\nnmcli&gt; set ipv4.gateway 192.168.56.1\nnmcli&gt; save\npersistent temporary\nnmcli&gt; save persistent\n成功地更新了连接 &quot;MeijmTenda&quot; (ab876b5a-a02e-43c5-8d65-8da29891b0c1)。\n\n配置ssh别名\n在宿主机（Host）上配置，\n# FILE:~/.ssh/config\n\nHost varch\nHostName 192.168.56.100\nUser xxxx\n\n此后就可以直接ssh varch了。\n小结\n至此，我在windows上安装了一些小工具、配置了一个可用的linux环境。与我个人来说，大幅提升了windows的易用性。",
		"tags": [ "note","定制","windows","suckless","msys2"]
},

{
		"title": 202501092242,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202501092242archlinux安装指定版本包/",
		"content": "首先在aur上搜索，如gcc-4.8，\nhttps://aur.archlinux.org/packages/gcc48\n然后下载snapshot文件，\n\n下载完了解压，cd到解压后的目录直接makepkg即可。\n\n注意⚠️：此时可以随便改改PKGBUILD文件，想怎么折腾就怎么折腾。\n\n更简单的方法（推荐）\n使用yay（aur包管理器）直接安装，前提先在aur搜索包名\nyay -S gcc48",
		"tags": [ "note","linux","包管理","package"]
},

{
		"title": 202501211106,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202501211106kroki-sample/",
		"content": "先安装一下obsidian插件kroki，然后可用。\n\nblockdiag {\nKroki -&gt; generates -&gt; &quot;Block diagrams&quot;;\nKroki -&gt; is -&gt; &quot;very easy!&quot;;\n\nKroki [color = &quot;greenyellow&quot;];\n&quot;Block diagrams&quot; [color = &quot;pink&quot;];\n&quot;very easy!&quot; [color = &quot;orange&quot;];\n}\n\n$r = 0.2in\nlinerad = 0.75*$r\nlinewid = 0.25\n\n# Start and end blocks\n#\nbox &quot;element&quot; bold fit\nline down 50% from last box.sw\ndot rad 250% color black\nX0: last.e + (0.3,0)\narrow from last dot to X0\nmove right 3.9in\nbox wid 5% ht 25% fill black\nX9: last.w - (0.3,0)\narrow from X9 to last box.w\n\n# The main rule that goes straight through from start to finish\n#\nbox &quot;object-definition&quot; italic fit at 11/16 way between X0 and X9\narrow to X9\narrow from X0 to last box.w\n\n# The LABEL: rule\n#\narrow right $r from X0 then down 1.25*$r then right $r\noval &quot; LABEL &quot; fit\narrow 50%\noval &quot;\\&quot;:\\&quot;&quot; fit\narrow 200%\nbox &quot;position&quot; italic fit\narrow\nline right until even with X9 - ($r,0) \\\nthen up until even with X9 then to X9\narrow from last oval.e right $r*0.5 then up $r*0.8 right $r*0.8\nline up $r*0.45 right $r*0.45 then right\n\n# The VARIABLE = rule\n#\narrow right $r from X0 then down 2.5*$r then right $r\noval &quot; VARIABLE &quot; fit\narrow 70%\nbox &quot;assignment-operator&quot; italic fit\narrow 70%\nbox &quot;expr&quot; italic fit\nline right until even with X9 - ($r,0) \\\nthen up until even with X9 then to X9\n\n# The PRINT rule\n#\narrow right $r from X0 then down 3.75*$r then right $r\noval &quot;\\&quot;print\\&quot;&quot; fit\narrow\nbox &quot;print-args&quot; italic fit\nline right until even with X9 - ($r,0) \\\nthen up until even with X9 then to X9",
		"tags": [ "note","kroki","draw","画图","uml","digram"]
},

{
		"title": 202501241043,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202501241043创建软连接的路径问题/",
		"content": "一个可能违反直觉的事实！\n例如：\ntree\n.\n├── a\n├── bar\n└── foo\n└── fooa\n\n3 directories, 2 files\n\ncd bar\nln -sf ../foo/fooa ../foo/fooa-link\nln -sf ../foo/fooa fooa-link\nln -sf ../a ../a-link # yields broken link\nln -sf ../a a-link\nln -sf fooa ../foo/wtf-fooa\nln -sf a ../wft-a\ntree ..\n..\n├── a\n├── a-link -&gt; ../a # broken link\n├── bar\n│ ├── a-link -&gt; ../a\n│ └── fooa-link -&gt; ../foo/fooa\n├── foo\n│ ├── fooa\n│ ├── fooa-link -&gt; ../foo/fooa\n│ └── wft-fooa -&gt; fooa\n└── wft-a -&gt; a\n\n3 directories, 8 files\n\n由此得出，\nln -sf &lt;target&gt; &lt;link&gt;\n\n务必好好理解下面这句话，\n\n[!attention]\ntarget的路径是相对于link的路径来的，如果link和target同路径，target压根不用带目录，在link中指定目录即可。",
		"tags": [ "note","linux","softlink","软连接","ln-command"]
},

{
		"title": 202502141432,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502141432tar命令的小坑/",
		"content": "202502141432\n先看一条tar命令\ncd $HOME\ntar -cvpaf ../home.tgz * --exclude-caches --exclude-caches-all --exclude-vcs --exclude-tag-all=&quot;skip_tar.tag&quot;\n一看以为是备份home目录，结果输出发现你想排除的目录压根没有排除，这是因为，--exclude选项要放在前面，改成这样就行了\ntar --exclude-caches-all --exclude-vcs --exclude-tag-all=skip_tar.tag -cvpaf ../home.tgz *\n然后这里还有一个坑，你以为*会包含隐藏目录？不会的，试试echo *。一般的，*在ls命令和bash展开中不会包含隐藏文件（即以.开头的文件），但是tar不care（find命令也不care），但这里写的*其实是bash展开。正确写法应该是\ntar --exclude-caches-all --exclude-vcs --exclude-tag-all=skip_tar.tag -cvpaf ../home.tgz .\n这样tar的目标是当前目录，而tar默认会包含隐藏文件。\nsee: https://unix.stackexchange.com/a/31976",
		"tags": [ "note","tar","备份"]
},

{
		"title": 202502181641,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502181641virtualbox虚拟机断网问题/",
		"content": "问题背景\n公司电脑上用virtualbox安装了archlinux虚拟机，使用自带的nat网卡默认可以访问外网。此外配置了一个host-only网卡用于和宿主机（host）互相访问。遇到一个奇怪的问题就是，自虚拟机重启一天之内，nat网卡可以正常上网（ping baidu.com通），一天后就上不了网了。\n尝试\n将宿主机网卡共享给host-only网卡，让虚拟机通过host-only网卡上网，一开始配置完好使了一段时间，第二天来又不行了，原因不明。\n最后的解决方案（伪）\n\n升级virtualbox版本\n配置路由规则，优先使用nat网卡访问外网\n\n$ ip route\ndefault via 10.0.2.2 dev enp0s3 proto dhcp src 10.0.2.15 metric 100\ndefault via 192.168.137.1 dev enp0s8 proto static metric 234 # 主动设置\n10.0.2.0/24 dev enp0s3 proto kernel scope link src 10.0.2.15 metric 100\n10.0.2.2 dev enp0s3 proto dhcp scope link src 10.0.2.15 metric 100\n192.168.137.0/24 dev enp0s8 proto kernel scope link src 192.168.137.200\n\n10.2.2.2是nat网卡的网关，192.168.137.1是host-only网卡的网关。将metric值设大些，流量会优先从metric值小的路由走。\n一天之后，仍然可以访问外网。不知道是升级virtualbox版本解决的还是设置路由优先级解决的。\n谨此记录，备日后用。\n真！现在的解决方案\n偶然发现，virtualbox的多个虚拟机使用nat网络的接口ip一样（默认都是10.0.2.15），稍加探索发现每个虚拟机都有一套自己的nat网络，互相独立。所以不同虚拟机的nat网关（10.0.2.2）其实不是同一个实例。随之，通过全局设定添加一个nat网关，把两个虚拟机的nat网络配置均改为新增的全局nat网关。发现两个虚拟机的ip地址有所不同，且在同一网段。且nat网关的地址变更为10.0.2.1. 更神奇的是，如果上面的断网问题发生了，不用关闭虚拟机，通过改nat网卡的配置，改完虚拟机又有网了！虽然不是根本的解决方案，至少可以不关机让它再次有网了！且看第二天会不会断网吧。\nupdate: 实践证明：没有断网！！！！！\n\n[!attention]\n一定要用全局NAT网络！\n\n配置参考：https://blog.csdn.net/qq_51153463/article/details/123966124",
		"tags": [ "note","route","virtualbox","网络","路由"]
},

{
		"title": 202502181657,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502181657gdb-attach/",
		"content": "gdb attach到正在运行的程序上进行调试，\ngdb program &lt;pid_of_program&gt;\n\n# examples\ngdb firefox 1234\ngdb -p 1234\ngdb -p `pidof firefox` # combined with pidof\n\n使用pidof &lt;pattern&gt;可以直接返回命令的pid，在只运行一个实例的情况下，很好用。\ngdb调试coredump\ngdb program &lt;corefile&gt;\n\nFrom gdb manual,\nYou can run &quot;gdb&quot; with no arguments or options; but the most usual way to start GDB is with one argument or two, specifying an executable program as the argument:\ngdb program\nYou can also start with both an executable program and a core file specified:\ngdb program core\nYou can, instead, specify a process ID as a second argument or use option &quot;-p&quot;, if you want to debug a running process:\ngdb program 1234\ngdb -p 1234\nwould attach GDB to process 1234. With option -p you can omit the program filename.",
		"tags": [ "note","gdb","debug","调试","attach"]
},

{
		"title": 202502201432,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502201432python-paramiko使用小记/",
		"content": "paramiko是一个python ssh库，提供python api去执行ssh操作，包括但不限于登录远程机器（ssh），执行远程命令，sftp上传下载文件。\n# env: python3\nimport os\nimport tarfile\nimport subprocess\nimport paramiko\nimport paramiko.util\nparamiko.util.log_to_file(&quot;paramiko.log&quot;)\n\ndef notify(*msg, **kwargs):\nprint(&quot;--- &quot;, *msg, **kwargs)\n\ndef tar_dir(dir_path, tar_path):\n&quot;&quot;&quot; Tar a directory `dir_path` to a tar file. &quot;&quot;&quot;\nif tar_path.endswith(&quot;.gz&quot;) or tar_path.endswith(&quot;.tgz&quot;):\nmode = &quot;w:gz&quot;\nelif tar_path.endswith(&quot;.bz2&quot;):\nmode = &quot;w:bz2&quot;\nelif tar_path.endswith(&quot;.xz&quot;):\nmode = &quot;w:xz&quot;\nelse:\nmode = &quot;w&quot;\nwith tarfile.open(tar_path, mode) as tar:\ntar.add(dir_path, arcname=os.path.basename(dir_path))\n\ndef untar_file(tar_path, target_dir):\nwith tarfile.open(tar_path, &quot;r&quot;) as tar:\ntar.extractall(target_dir)\n\ndef test_tar():\ntar_dir(&quot;./&quot;, &quot;/home/bingbing.hu/my.tar.gz&quot;)\nuntar_file(&quot;/home/bingbing.hu/my.tar.gz&quot;, &quot;/home/bingbing.hu/mytar_gz_extracted&quot;)\n\nclass CommandRunException(Exception):\npass\n\nclass NodeConf(object):\nHOST = &quot;&quot;\nPORT = 22\nUSERNAME = &quot;fuck&quot;\nPASSWORD = &quot;you&quot;\n\nclass NewApiDevNode(NodeConf):\nHOST = &quot;1.2.3.4&quot;\n\nclass SSHConnection(object):\ndef __init__(self, host=&quot;&quot;, password=&quot;&quot;, username=&quot;bingbing.hu&quot;, port=22) -&gt; None:\nself.host = host\nself.password = password\nself.username = username\nself.port = port\nself._client = None # type: paramiko.SSHClient | None\nself._sftp_client = None # type: paramiko.SFTPClient | None\n\ndef close(self):\nif self._client is not None:\nself._client.close()\nif self._sftp_client is not None:\nself._sftp_client.close()\nself._client = None\nself._sftp_client = None\n\ndef re_init(self, node_cls):\n&quot;&quot;&quot; Re-init the node with a NodeConf class. &quot;&quot;&quot;\nself.host = node_cls.HOST\nself.password = node_cls.PASSWORD\nself.username = node_cls.USERNAME\nself.port = node_cls.PORT\nif self._client is not None:\nself._client.close()\nself._client = None\nself.get_client()\n\ndef get_client(self):\nif self._client is None:\nself._client = ssh = paramiko.SSHClient()\nssh.load_system_host_keys()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect(self.host, self.port, self.username, self.password)\nreturn self._client\n\ndef get_sftp_client(self):\nif self._sftp_client is None:\nself._sftp_client = self.get_client().open_sftp()\nreturn self._sftp_client\n\ndef excute(self, ):\nstdin, stdout, stderr = self.get_client().exec_command()\nreturn self.__handle__output(stdout, stderr, )\n\ndef excute_with_sudo(self, ):\nstdin, stdout, stderr = self.get_client().exec_command(&quot;sudo -S %s&quot; % )\nstdin.write(self.password + &quot;\\n&quot;)\nstdin.flush()\nreturn self.__handle__output(stdout, stderr, )\n\n@staticmethod\ndef __handle__output(stdout: paramiko.ChannelFile, stderr: paramiko.ChannelFile, : str) -&gt; int:\nstatus = stdout.channel.recv_exit_status()\nif status != 0:\nraise CommandRunException(\n&quot;Excute '%s' failed with status %d.\\n\\n%s&quot;\n% (, status, stderr.read().decode()))\nfor line in stdout:\nprint(line, end=&quot;&quot;)\nreturn status\n\ndef upload(self, local_path, remote_path):\nif not os.path.exists(local_path):\nraise FileNotFoundError(&quot;Local file %s not found.&quot; % local_path)\nif remote_path[-1] == '/': # treat remote_path as a directory\nself.__ensure_remote_path(remote_path)\nfilename = os.path.basename(local_path)\nremote_path += filename\nnotify(&quot;Uploading %s to %s&quot; % (local_path, remote_path))\n\n# \\r is used to move cursor to the beginning of the line.\ncb = lambda x, y: notify(f&quot;Uploaded {x}/{y}\\r&quot;, end=&quot;&quot;, flush=True)\nself.get_sftp_client().put(local_path, remote_path, callback=cb)\nprint('') # used to remove the last \\r\n\ndef download(self, remote_path, local_path):\nif remote_path[-1] == '/':\nraise ValueError(&quot;Remote path should be a file path.&quot;)\nlocal_file = local_path\nif local_path[-1] == '/':\nlocal_dir = local_path[:-1]\nlocal_file = os.path.join(local_path, os.path.basename(remote_path))\nelse:\nlocal_dir = os.path.split(local_path)[0]\nif not os.path.exists(local_dir):\nos.makedirs(local_dir)\n\nsftp = self.get_sftp_client()\nnotify(&quot;Downloading %s to %s&quot; % (remote_path, local_file))\n\n# \\r is used to move cursor to the beginning of the line.\ncb = lambda x, y: print(f&quot;\\rDownloaded {x}/{y}&quot;, end=&quot;&quot;, flush=True)\nsftp.get(remote_path, local_file, callback=cb)\n\ndef __ensure_remote_path(self, remote_path):\nself.excute(f&quot;&quot;&quot;\nif [ ! -d {remote_path} ]; then\nmkdir -p {remote_path}\nfi\n&quot;&quot;&quot;)\n\ndef deploy_newapi_dev():\nconn = SSHConnection()\nconn.re_init(NewApiDevNode)\n\n# code_root = os.path.expanduser(&quot;~/code/newapi&quot;)\n# print(code_root)\n\nargs = [&quot;/datayes/api_dev/bin&quot;, &quot;api_service.tar.gz&quot;]\n# subprocess.check_call([&quot;make&quot;, &quot;-C&quot;, *args])\nlocal_file = '/'.join(args)\nconn.upload(local_file, './')\nconn.excute(f&quot;&quot;&quot;\nmkdir ttt\ntar -xavf {args[1]} -C ttt\n&quot;&quot;&quot;)\nconn.close()\n\ndef test_connection():\nconn = SSHConnection()\nconn.re_init(NewApiDevNode)\n\na = conn.excute(&quot;pwd;df -h&quot;)\nconn.excute_with_sudo(&quot;apt list --upgradable | head -n5&quot;)\nconn.excute(&quot;&quot;&quot;\ncd /tmp\nmkdir -p test\ncd test\npwd\ntouch {a,b,c}\nls -l&quot;&quot;&quot;)\n\nconn.upload(&quot;main.py&quot;, &quot;./areyouok/&quot;)\n# conn.excute(&quot;./a.out&quot;)\n# node.get_sftp_client().put(&quot;main.py&quot;, &quot;main.py&quot;)\nconn.download(&quot;./api_etc.tar&quot;, &quot;./from_remote.tar&quot;)\nconn.close()\nprint(NewApiDevNode.PASSWORD)\nprint(NewApiDevNode.USERNAME)\n\nif __name__ == &quot;__main__&quot;:\ndeploy_newapi_dev()\n\nclosed by https://github.com/guyueshui/dotfiles/tree/master/bin/paramiko\n\n更新下wrapper\nnode.py\n# encoding = utf-8\n# This file stores the information of remote nodes.\n\nclass NodeConf(object):\nHOST = &quot;&quot;\nPORT = 22\nUSERNAME = &quot;bingbing.hu&quot;\nPASSWORD = &quot;datayes@123&quot;\n\n@classmethod\ndef get_para(cls):\nreturn (cls.HOST, cls.PASSWORD, cls.USERNAME, cls.PORT)\n\n@classmethod\ndef get_para_dict(cls):\nreturn {&quot;host&quot;: cls.HOST, &quot;password&quot;: cls.PASSWORD,\n&quot;username&quot;: cls.USERNAME, &quot;port&quot;: cls.PORT }\n\nclass NewApiDevNode(NodeConf):\nHOST = &quot;10.24.21.23&quot;\n\nclass DbStoreNode(NodeConf):\nHOST = &quot;10.24.21.105&quot;\n\nclass MdlDevNode(NodeConf):\nHOST = &quot;10.24.21.40&quot;\n\nclass DbAlchemyNodeStg(NodeConf):\nHOST = &quot;10.24.21.25&quot;\nUSERNAME = &quot;xufei.li&quot;\n\nclass BarDev(NodeConf):\nHOST = &quot;10.24.21.181&quot;\nUSERNAME = &quot;xufei.li&quot;\n\nDEPLOY_DIR = &quot;/home/shangl_bar&quot;\n\nssh_connection.py\n# encoding: utf-8\n\nfrom tool.utils import notify\nimport os\nimport time\nimport paramiko\nimport paramiko.util\nparamiko.util.log_to_file(&quot;paramiko.log&quot;)\n\nclass CommandRunException(Exception):\npass\n\nclass SSHConnection(object):\ndef __init__(self, host=&quot;&quot;, password=&quot;&quot;, username=&quot;bingbing.hu&quot;, port=22) -&gt; None:\nself.host = host\nself.password = password\nself.username = username\nself.port = port\nself._client = None # type: paramiko.SSHClient | None\nself._sftp_client = None # type: paramiko.SFTPClient | None\n\ndef __enter__(self):\nreturn self\n\ndef __exit__(self, exc_type, exc_val, exc_tb):\nprint(&quot;type: %s&quot; % exc_type)\nprint(&quot;val: %s&quot; % exc_val)\nprint(&quot;tb: %s&quot; % exc_tb)\nself.close()\n\ndef close(self):\nif self._client is not None:\nself._client.close()\nif self._sftp_client is not None:\nself._sftp_client.close()\nself._client = None\nself._sftp_client = None\n\ndef re_init(self, node_cls):\n&quot;&quot;&quot; Re-init the node with a NodeConf class. &quot;&quot;&quot;\nself.host = node_cls.HOST\nself.password = node_cls.PASSWORD\nself.username = node_cls.USERNAME\nself.port = node_cls.PORT\nif self._client is not None:\nself._client.close()\nself._client = None\nself.get_client()\n\ndef get_client(self):\nif self._client is None:\nself._client = ssh = paramiko.SSHClient()\nssh.load_system_host_keys()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect(self.host, self.port, self.username, self.password)\nreturn self._client\n\ndef get_sftp_client(self):\nif self._sftp_client is None:\nself._sftp_client = self.get_client().open_sftp()\nreturn self._sftp_client\n\ndef excute(self, ):\nstdin, stdout, stderr = self.get_client().exec_command()\nreturn self.__handle__output(stdout, stderr, )\n\ndef excute_with_sudo(self, ):\nstdin, stdout, stderr = self.get_client().exec_command(&quot;sudo -S %s&quot; % )\nstdin.write(self.password + &quot;\\n&quot;)\nstdin.flush()\nreturn self.__handle__output(stdout, stderr, )\n\ndef __excute_successive_s(self, ):\nclient = self.get_client()\nchan = client.invoke_shell()\nchan.set_combine_stderr(True)\nstdin = chan.makefile_stdin(&quot;wb&quot;, -1)\nstdout = chan.makefile(&quot;r&quot;, -1)\n# chan.send(&quot;sudo -i\\n&quot;)\n# chan.sendall(self.password + &quot;\\n&quot;)\n# time.sleep(.5)\n# stdin.flush()\nstdin.write(&quot;ls -al\\n&quot;)\nstdin.write(f&quot;&quot;&quot;\nsudo -i\n{self.password}\n&quot;&quot;&quot;)\ntime.sleep(0.5)\n# chan.send(&quot;&quot;&quot;\n# pwd\n# echo $HOME\n# echo $USER\n# &quot;&quot;&quot;.encode())\n# chan.sendall(&quot;pwdx 15391\\n&quot;.encode())\nchan.send(&quot;exit\\n&quot;.encode())\nchan.send(&quot;./a.out\\n&quot;.encode())\nchan.send(&quot;exit\\n&quot;.encode())\nwhile True:\nif chan.recv_ready():\nprint(chan.recv(1024).decode())\ncontinue\nif chan.exit_status_ready():\nexit_status = chan.recv_exit_status()\nbreak\nif chan.closed or chan.eof_received or not chan.active:\nbreak\ntime.sleep(0.5)\nprint(&quot;exit_status:&quot;, exit_status)\n\n@staticmethod\ndef __handle__output(stdout: paramiko.ChannelFile, stderr: paramiko.ChannelFile, : str) -&gt; int:\nfor line in stdout:\nprint(line, end=&quot;&quot;)\nstatus = stdout.channel.recv_exit_status()\nif status != 0:\nraise CommandRunException(\n&quot;Excute '%s' failed with status %d.\\n\\n%s&quot;\n% (, status, stderr.read().decode()))\nreturn status\n\ndef get__chain(self, timeout=0):\nreturn CommandChain(self.get_client(), timeout)\n\ndef upload(self, local_path, remote_path):\nif not os.path.exists(local_path):\nraise FileNotFoundError(&quot;Local file %s not found.&quot; % local_path)\nif remote_path[-1] == '/': # treat remote_path as a directory\nself.__ensure_remote_path(remote_path)\nfilename = os.path.basename(local_path)\nremote_path += filename\nnotify(&quot;Uploading %s to %s&quot; % (local_path, remote_path))\n\n# \\r is used to move cursor to the beginning of the line.\ncb = lambda x, y: notify(f&quot;Uploaded {x}/{y}\\r&quot;, end=&quot;&quot;, flush=True)\nself.get_sftp_client().put(local_path, remote_path, callback=cb)\nprint('') # used to remove the last \\r\n\ndef download(self, remote_path, local_path):\nif remote_path[-1] == '/':\nraise ValueError(&quot;Remote path should be a file path.&quot;)\nlocal_file = local_path\nif local_path[-1] == '/':\nlocal_dir = local_path[:-1]\nlocal_file = os.path.join(local_path, os.path.basename(remote_path))\nelse:\nlocal_dir = os.path.split(local_path)[0]\nif not os.path.exists(local_dir):\nos.makedirs(local_dir)\n\nsftp = self.get_sftp_client()\nnotify(&quot;Downloading %s to %s&quot; % (remote_path, local_file))\n\n# \\r is used to move cursor to the beginning of the line.\ncb = lambda x, y: print(f&quot;\\rDownloaded {x}/{y}&quot;, end=&quot;&quot;, flush=True)\nsftp.get(remote_path, local_file, callback=cb)\n\ndef __ensure_remote_path(self, remote_path):\nself.excute(f&quot;&quot;&quot;\nif [ ! -d {remote_path} ]; then\nmkdir -p {remote_path}\nfi\n&quot;&quot;&quot;)\n\nclass CommandChain(object):\ndef __init__(self, ssh_client: paramiko.SSHClient, timeout=0):\nassert ssh_client is not None\nself._client = ssh_client\nself._chan = ssh_client.invoke_shell(self.__class__.__name__) # type: paramiko.Channel\ntime.sleep(1) # wait the channel to be ready\n# self._chan.setblocking(0)\n# self._chan.set_combine_stderr(True)\nself._stdin = self._chan.makefile_stdin(&quot;wb&quot;, -1)\nself._exit_status = 0\nself._timeout = timeout\n\ndef over(self):\ntime.sleep(0.5) # essential, otherwise the command will be blocked\n# while not self._chan.exit_status_ready():\n# self.execute(&quot;exit&quot;)\nself.__handle_output()\nself._stdin.close()\nself._chan.close()\nself._client = None\n\ndef execute(self, one_line_: str):\none_line_ = one_line_.rstrip('\\n') + '\\n'\nself._chan.send(one_line_.encode())\nreturn self\n\ndef write_input(self, text: str):\ntext = text.rstrip('\\n') + '\\n'\nself._stdin.write(text.encode())\nreturn self\n\ndef __handle_output(self):\nchan = self._chan\n# If you don't set timeout, the stdout.read will block,\n# or you can send multiple &quot;exit&quot; to remote node,\n# this will make chan.exit_status_ready returns true.\nif self._timeout &gt; 0:\nchan.settimeout(5)\nstdout = chan.makefile(&quot;r&quot;, -1)\ntry:\nfor line in stdout:\nprint(line, end=&quot;&quot;)\nexcept Exception as e:\nnotify(&quot;no data in %ss, channel will be closed!&quot; % self._timeout)\n\ndef test_connection():\nfrom tool.node import NewApiDevNode\nconn = SSHConnection()\nconn.re_init(NewApiDevNode)\n\nconn.excute(&quot;pwd;df -h&quot;)\nconn.excute_with_sudo(&quot;apt list --upgradable | head -n5&quot;)\nconn.excute(&quot;&quot;&quot;\ncd /tmp\nmkdir -p test\ncd test\npwd\ntouch {a,b,c}\nls -l&quot;&quot;&quot;)\n\nconn.upload(&quot;main.py&quot;, &quot;./areyouok/&quot;)\n# conn.excute(&quot;./a.out&quot;)\n# node.get_sftp_client().put(&quot;main.py&quot;, &quot;main.py&quot;)\nconn.download(&quot;./api_etc.tar&quot;, &quot;./from_remote.tar&quot;)\nconn.close()\n\ndef test__chain():\nfrom tool.node import NewApiDevNode\nconn = SSHConnection()\nconn.re_init(NewApiDevNode)\n\nconn.get__chain().execute(&quot;echo $USER&quot;)\\\n.execute(&quot;sudo -i&quot;).write_input(conn.password)\\\n.execute(&quot;echo $USER&quot;).execute(&quot;apt list --upgradable|head -5&quot;)\\\n.over()\n\nif __name__ == &quot;__main__&quot;:\n# test_connection()\ntest__chain()\n\nutils.py\n# encoding: utf-8\n\nimport os\nimport tarfile\n\ndef notify(*msg, **kwargs):\nprint(&quot;---&quot;, *msg, **kwargs)\n\ndef __tar_mode_helper(tar_path: str):\nif tar_path.endswith(&quot;.gz&quot;) or tar_path.endswith(&quot;.tgz&quot;):\nmode = &quot;w:gz&quot;\nelif tar_path.endswith(&quot;.bz2&quot;):\nmode = &quot;w:bz2&quot;\nelif tar_path.endswith(&quot;.xz&quot;):\nmode = &quot;w:xz&quot;\nelse:\nmode = &quot;w&quot;\nreturn mode\n\ndef tar_dir(dir_path: str, tar_path: str, **kwargs):\n&quot;&quot;&quot; Tar a directory `dir_path` to a tar file. &quot;&quot;&quot;\nmode = __tar_mode_helper(tar_path)\nwith tarfile.open(tar_path, mode) as tar:\ntar.add(dir_path, arcname=os.path.basename(dir_path), **kwargs)\n\ndef tar_files(tar_path: str, *files):\nmode = __tar_mode_helper(tar_path)\nwith tarfile.open(tar_path, mode) as tar:\nfor fn in filter(lambda x: os.path.exists(x), files):\ntar.add(fn, arcname=os.path.basename(fn))\n\ndef untar_file(tar_path, target_dir):\nwith tarfile.open(tar_path, &quot;r&quot;) as tar:\ntar.extractall(target_dir)\n\ndef test_tar():\ntar_dir(&quot;./&quot;, &quot;/home/bingbing.hu/my.tar.gz&quot;)\nuntar_file(&quot;/home/bingbing.hu/my.tar.gz&quot;, &quot;/home/bingbing.hu/mytar_gz_extracted&quot;)\n\nif __name__ == &quot;__main__&quot;:\ntest_tar()\n\n示例\nfrom common import *\nimport os\nimport tarfile\n\nclass CompileTask1604(object):\n&quot;&quot;&quot; Compile on ubuntu 16.04. &quot;&quot;&quot;\ndef __init__(self) -&gt; None:\nself.conn = SSHConnection()\nself.conn.re_init(N.NewApiDevNode)\n\ndef destroy(self):\nif self.conn is not None:\nself.conn.close()\nself.conn = None\n\n@staticmethod\ndef filter_src_files(tarinfo: tarfile.TarInfo):\nname = tarinfo.name\nif '.git' in name or &quot;.vscode&quot; in name or &quot;.cache&quot; in name:\nreturn None\nif name.startswith('.'):\nreturn None\nif tarinfo.isdir():\nif &quot;3rd&quot; in name or &quot;build&quot; in name or &quot;doc&quot; in name or &quot;obj&quot; in name or &quot;bin&quot; in name:\nreturn None\nreturn tarinfo\nif tarinfo.isfile() and (\nname.endswith(&quot;.h&quot;) or name.endswith(&quot;.cpp&quot;)\n):\nreturn tarinfo\nreturn None\n\ndef compilel_src(self):\nconn = self.conn\n\ntar_name = l_src.tar.bz2&quot;\nutils.tar_dir(MDL_SRC, tar_name, filter=self.__class__.filter_src_files)\nconn.upload(tar_name, &quot;./code/&quot;)\nconn.excute(f&quot;&quot;&quot;\ncd code\ntar -xavf {tar_name}\nrm -f {tar_name}\necho; echo\ncdl_src/build/make\nmake -j4\n&quot;&quot;&quot;)\nos.remove(tar_name)\n\ndef compile_dbalchemy(self):\nconn = self.conn\n\ndef _filter(tarinfo: tarfile.TarInfo):\nname = tarinfo.name\nif 'build.sh' in name or &quot;makefile&quot; in name:\nreturn tarinfo\nreturn self.__class__.filter_src_files(tarinfo)\n\ntar_name = &quot;dbalchemy.tar.bz2&quot;\nutils.tar_dir(DBALCHEMY, tar_name, filter=_filter)\nconn.upload(tar_name, &quot;./code/&quot;)\nconn.excute(f&quot;&quot;&quot;\nset -e\ncd code\ntar -xavf {tar_name}\nrm -f {tar_name}\necho; echo\ncd dbalchemy/\nbash -e build.sh\n&quot;&quot;&quot;)\nos.remove(tar_name)\n\nif __name__ == '__main__':\ntask = CompileTask1604()\ntask.compilel_src()\ntask.destroy()",
		"tags": [ "note","paramiko","python","ssh"]
},

{
		"title": 202502210928,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502210928make-template/",
		"content": "Here list some makefile as references.\napi_service:\ncp -b ~/code/newapi/build/api_service .\n\napi_service.tar.gz: api_service so_files\n@mkdir -p so_files\ncp api_service so_files\ncd so_files; tar -caf ../$@ *\n\nCODE_ROOT := ~/code/newapi\nLIBPATH := $(CODE_ROOT)/3rd-modules/libs\nDEPEND_SO := libodbc.so libunwind.so libtcmalloc.so libbson-1.0.so libmongoc-1.0.so libpq.so\n# PACKAGE_SO := $(addprefix so_files/,$(DEPEND_SO))\nso_files:\n@mkdir -p so_files\n@for so in $(DEPEND_SO); do \\\ntmp=$(find $(LIBPATH) -type f -name &quot;$so*&quot; -print); \\\nlnk=$(basename $tmp | sed 's/\\(lib.*\\.so\\.[0-9]\\)\\(\\.[0-9]\\)\\+/\\1/'); \\\ncp $tmp so_files/$lnk; \\\ndone\n\nruntime_so_alias:\n@for so in $(DEPEND_SO); do \\\ntmp=$(find $(LIBPATH) -type f -name &quot;$so*&quot; -print); \\\nlnk=$(basename $tmp | sed 's/\\(lib.*\\.so\\.[0-9]\\)\\(\\.[0-9]\\)\\+/\\1/'); \\\nln -sf $tmp $lnk; \\\ndone\n\nclean_so_alias:\n@for so in $(DEPEND_SO); do \\\nfind -type l -name &quot;$so*&quot; -exec $(RM) {} \\; ; \\\ndone\n\nclean:\n$(RM) api_service\n-$(RM) api_service.tar.gz\n-$(RM) so_files\n\n.PHONY: clean clean_so_alias so_files runtime_so_alias\n\nsee also 202308261504make基础",
		"tags": [ "note","make"]
},

{
		"title": 202502241705,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502241705crtp-in-cpp/",
		"content": "今天学了一个新的C++知识点，诚然life is too short to learn c++.\n先看cpprefernece上的表述，\nhttps://en.cppreference.com/w/cpp/language/crtp\n可见，通过这种奇怪的方式，可以在编译期实现多态。从而省去了虚函数的调用开销（查虚表）以及虚指针的内存开销。追求极致性能可以考虑使用这种技巧。\n简单来说，就是这样使用：\n#include &lt;cstdio&gt;\n\ntemplate &lt;class Derived&gt;\nclass Base {\npublic:\nvoid interface() {\nstatic_cast&lt;Derived*&gt;(this)-&gt;impl();\n}\n};\n\nclass D1 : public Base&lt;D1&gt; {\npublic:\nvoid impl() {\nprintf(&quot;hello from D1\\n&quot;);\n}\n};\n\nclass D2 : public Base&lt;D2&gt; {\npublic:\nvoid impl() {\nprintf(&quot;hello from D2\\n&quot;);\n}\n};\n\nint\nmain(int argc, const char* argv[])\n{\nD1 d1;\nD2 d2;\nd1.interface();\nd2.interface();\nreturn 0;\n}\n\n// output:\n// hello from D1\n// hello from D2\n\n更详细的参考：https://xr1s.me/2022/10/18/brief-introduction-to-crtp/\n别称：静态绑定，静态多态\nsee also 多态",
		"tags": ["include", "note","CRTP","cpp"]
},

{
		"title": 202502261718,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202502261718firefox-chrome-禁用政策插件/",
		"content": "看到浏览器中“由贵组织管理”让人很恼怒，它装的插件一般是用来监控你的浏览记录和浏览内容的。所以，在这种情况下，你等于没穿衣服在网上冲浪。我们必须强烈抵制这种行为。\n\n网上的一些方法多半是删除注册表，但是公司电脑往往不给你管理员权限，因此行不通。所以我们要另辟蹊径。\nchrome禁用政策插件\n打开你的profile目录，一般为\nC:\\Users\\用户名\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions\n\n删掉这个插件文件夹（打开开发者模式可以看到插件id，在插件目录里面对应一个插件目录）\n\nfirefox禁用政策插件\nfirefox就更牛了，官方文档直接教你怎么禁用。\nhttps://support.mozilla.org/en-US/kb/cannot-remove-add-on-extension-or-theme\n具体来说，还是先查看插件。地址栏输入about:support，可以看到配置文件夹目录，打开它，里面有个extensions目录存放插件文件。\n\n再往下翻一翻，可以看到插件信息，\n\n可以看到插件ID，删除对应文件即可。\nsee also 202412112322firefox重启保留标签页",
		"tags": [ "note","firefox","chrome","技巧"]
},

{
		"title": 202503071009,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202503071009不要直接改系统的glibc版本/",
		"content": "如题，不要改系统的glibc版本，否则！你的系统可能崩掉！\n踩坑经历\n因为Ubuntu20.04（GBLIC 2.31）和Ubuntu16.04（GLIBC 2.23）版本不兼容。在20.04上面编译的二进制无法在16.04上面运行。报错，\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription: Ubuntu 16.04.2 LTS\nRelease: 16.04\nCodename: xenial\n\n$ ./feeder_handler\n./feeder_handler: /lib/x86_64-linux-gnu/libm.so.6: version `GLIBC_2.29' not found (required by ./feeder_handler)\n./feeder_handler: /lib/x86_64-linux-gnu/libm.so.6: version `GLIBC_2.29' not found (required by ./lil_api.so)\n\n因为feeder_handler是在20.04上面编译的。你可以通过以下方法查看glibc版本，\n$ ldd --version | head -1\nldd (Ubuntu GLIBC 2.23-0ubuntu11.3) 2.23\n\n$ strings /lib/x86_64-linux-gnu/libm.so.6 | grep GLIBC\nGLIBC_2.2.5\nGLIBC_2.4\nGLIBC_2.15\nGLIBC_2.18\nGLIBC_2.23\nGLIBC_PRIVATE\n\n可见，系统上的glibc是2.23版本。而二进制文件需要glibc2.29版本。解决方法有二：\n\n把源码放到16.04的机器上编译\n在16.04上装一个glibc2.29，通过patchelf修改动态库指向\n\n对于频繁更新代码，编译，放到目标机器上跑的任务来说，每次都要patchelf有点过于恼人。两种方案可参考：\n\n如何安装其他版本的glibc：https://stackoverflow.com/a/73188338\n如何修改动态库指向新的glibc版本：https://stackoverflow.com/a/851229\n\n[!attention]\n但是，千万注意，不要动系统的glibc相关文件！否则，很可能必定会把系统弄崩掉。\n\n我就替换了一个符号链接，将libpthread.so.0换了一个指向就引发了雪崩。\nll /lib/x86_64-linux-gnu/libpthread*\n-rwxr-xr-x 1 root root 157224 Jan 29 22:41 /lib/x86_64-linux-gnu/libpthread-2.31.so*\n-rw-r--r-- 1 root root 6590210 Jan 29 22:41 /lib/x86_64-linux-gnu/libpthread.a\nlrwxrwxrwx 1 root root 37 Jan 29 22:41 /lib/x86_64-linux-gnu/libpthread.so -&gt; /lib/x86_64-linux-gnu/libpthread.so.0*\nlrwxrwxrwx 1 root root 18 Mar 7 09:23 /lib/x86_64-linux-gnu/libpthread.so.0 -&gt; libpthread-2.31.so*\n\n可以看到libpthread.so.0指向正确版本的libpthread-2.31.so，如果这里改为指向一个低版本的动态库。你会发现一连串奇怪的问题接踵而来，连ls都不能正常工作。不能切用户，不能sudo，无法校验密码（输入用户名直接报鉴权失败）。重启一下立马启不动，无法正常开机。进入修复模式，直接报kernel panic. 下面欣赏一部分截图，\n\n从上面一些截图中可见端倪，系统的很多命令依赖这个动态库，而你改了不兼容的版本，导致寻址错误，找不到对应的符号，大部分程序都会崩溃。据同事说低版本指向高版本是ok的（按时高版本兼容低版本），但是who knows！万一替换了一个不兼容的版本，GG！\n修复建议\n找一个bootable的live cd，比如archliux的安装盘，进去之后挂在相应目录，把软连接指向正确的文件即可。",
		"tags": [ "note","glibc"]
},

{
		"title": 202503092037,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202503092037NetworkManager更换iwd后端/",
		"content": "此前NetworkManager一直使用wpa_supplicant作为后端，但是journalctl -f发现狂刷日志，\njournalctl -f\nFeb 28 10:23:31 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-73 noise=9999 txrate=175600\nFeb 28 10:23:31 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-73 noise=9999 txrate=175600\nFeb 28 10:23:32 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-73 noise=9999 txrate=175600\nFeb 28 10:23:32 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=175600\nFeb 28 10:23:33 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=175600\nFeb 28 10:23:33 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=6000\nFeb 28 10:23:34 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-71 noise=9999 txrate=6000\nFeb 28 10:23:34 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=175600\nFeb 28 10:23:35 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=175600\nFeb 28 10:23:35 baumgard wpa_supplicant[982]: wlan0: CTRL-EVENT-SIGNAL-CHANGE above=0 signal=-70 noise=9999 txrate=6000\n\n而且官方LiveCD里面也已经切换到iwd，所以我们也换成iwd作为wifi后端。\n更换方法参考：https://forum.endeavouros.com/t/journalctl-wlan0-ctrl-event-signal-change/68475/4\nInstall iwd\nsudo pacman -S iwd\ncreate a config file for KDE network manager\nsudo vi /etc/NetworkManager/conf.d/iwd.conf\naddd this lines\n[device] wifi.backend=iwd\ndeactivate the wpa_supplicant\nsudo systemctl stop wpa_supplicant.service sudo systemctl disable wpa_supplicant.service\nactivate iwd\nsudo systemctl enable iwd.service sudo systemctl start iwd.service\nrestart network manager\nsudo systemctl restart NetworkManager\nafter that i must reconnect to my wifi with password\nnow i have a clean journal !",
		"tags": [ "note","networkmanager","iwd","wpa_supplicant"]
},

{
		"title": 202503191332,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202503191332程序的进程名和命令名/",
		"content": "英文叫做\n\nprocess name\ncommand line\n\n在pgrep、pkill处理进程的时候，需要注意process name最多15个字符，所以有时可能匹配不到，\nrootl-dev01:~# ps -elf | grep feeder\n5 S root 21004 1 62 80 0 - 567610 futex_ Mar18 ? 13:01:20 ./feeder_handler1\n1 S root 21069 1 19 80 0 - 728090 futex_ Mar18 ? 04:05:21 ./feeder_handler2\n5 S root 21220 1 1 80 0 - 287844 futex_ Mar18 ? 00:14:21 ./feeder_handler_bar\n0 S root 31789 31592 0 80 0 - 3235 pipe_w 13:34 pts/1 00:00:00 grep --color=auto feeder\nrootl-dev01:~# pgrep -x feeder_handler1\n21004\nrootl-dev01:~# pgrep -x feeder_handler2\n21069\nrootl-dev01:~# pgrep -x feeder_handler_bar\nrootl-dev01:~#\n\n可见feeder_handler_bar没有命中，而pgrep的manpage里面明确指出：\n\t\tThe process name used for matching is limited to the 15 characters present in the output of /proc/pid/stat. Use the -f option to match against the complete command line,\n/proc/pid/line.\n\n这时候需要用pgrep -f才行。\nrootl-dev01:~# pgrep -f feeder_handler_bar\n21220\nrootl-dev01:~# pgrep -lf feeder\n21004 feeder_handler1\n21069 feeder_handler2\n21220 feeder_handler_",
		"tags": [ "note","pgrep","pkill"]
},

{
		"title": 202504301210,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202504301210反向迭代器转正向迭代器/",
		"content": "反向迭代器有一个坑点。正向迭代器，指向的位置和解引用对应的元素是一致的；反向迭代器指向的位置和解引用对应的元素差了一个。从前往后看（正向角度），反向迭代器指向位置i，那么解引用会得到i-1位置上的元素。\ncpprefrence指出，\n\nFor a reverse iterator r constructed from an iterator i, the relationship &amp;*r == &amp;*(i - 1) is always true (as long as r is dereferenceable); thus a reverse iterator constructed from a one-past-the-end iterator dereferences to the last element in a sequence.\n\nThis is due to the fact that a reverse iterator has a slightly different referencing logic than a regular iterator: it points to an element, but when dereferenced, it yields a reference to the previous element.\n\n更多参考：\n\nc++ - Why does removing the first element of a list invalidate .rend()? - Stack Overflow\nc++ - Why can I not convert a reverse iterator to a forward iterator? - Stack Overflow\nc++ - Can I convert a reverse iterator to a forward iterator? - Stack Overflow\n\n反向迭代器的base成员函数，返回底层所持有的正向迭代器，我们转正向迭代器的时候尤其要注意上面的坑点，\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nint main() {\nint i[] = {1,2,3,4,5,6};\nstd::vector&lt;int&gt; v(i, i+6);\n\nauto ri = std::find(std::rbegin(v), std::rend(v), 3);\nstd::cout &lt;&lt; *ri &lt;&lt; std::endl; // 3\nauto fi = ri.base()-1;\nstd::cout &lt;&lt; *fi &lt;&lt; std::endl; // 3\nfi = (++ri).base();\nstd::cout &lt;&lt; *fi &lt;&lt; std::endl; // 3\n}\n\n即，\n\n要么调用base之前将反向迭代器增一\n要么调用base之后将得到的正向迭代器减一",
		"tags": ["include", "include", "include", "include", "note","iterator","reverse_iterator"]
},

{
		"title": 202505090847,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202505090847awk判断csv的id有序性/",
		"content": "Example 1\n#!/bin/bash\n\n# file: check_order.sh\n\nfile=&quot;$1&quot;\norder=&quot;asc&quot; # 排序类型：asc（升序）或desc（降序）\n\nawk -F',' -v order=&quot;$order&quot; '\nBEGIN {\n# 初始化哈希表，记录每个 key 的上一个 value 和当前有序状态\ndelete prev_value;\ndelete key_status; # 状态标记：1（有序）、0（无序）\n}\n\n{\nif (NR == 1) {\nnext;\n}\n\nkey = $1;\ncurrent_val = $2;\n\nif (NR % 1000000 == 0) {\nprint &quot;now processing &quot; key &quot;：&quot; current_val;\n}\n\n# 若 key 首次出现，初始化状态为有序\nif (!(key in prev_value)) {\nprev_value[key] = current_val;\nkey_status[key] = 1; # 默认有序\nnext;\n}\n\n# 获取当前 key 的上一个 value\nprev_val = prev_value[key];\n\n# 数值类型判断与比较\nif (current_val ~ /^-?[0-9]+(\\.[0-9]+)?$/ &amp;&amp; prev_val ~ /^-?[0-9]+(\\.[0-9]+)?$/) {\nnum_curr = current_val + 0;\nnum_prev = prev_val + 0;\nif ((order == &quot;asc&quot; &amp;&amp; num_curr &lt; num_prev) || (order == &quot;desc&quot; &amp;&amp; num_curr &gt; num_prev)) {\nprint &quot;found bad seq: key=&quot; key &quot;,cur=&quot; num_curr &quot;,prev=&quot; num_prev\nkey_status[key] = 0; # 标记为无序\n}\nif ((order == &quot;asc&quot; &amp;&amp; num_curr != num_prev + 1) || (order == &quot;desc&quot; &amp;&amp; num_curr + 1 != num_prev)) {\nprint &quot;found gap seq: key=&quot; key &quot;,cur=&quot; num_curr &quot;,prev=&quot; num_prev\n}\n} else {\nprint &quot;should not hit, cur=&quot; current_val &quot;, prev=&quot; prev_val\n# 字符串字典序比较\nif ((order == &quot;asc&quot; &amp;&amp; current_val &lt; prev_val) || (order == &quot;desc&quot; &amp;&amp; current_val &gt; prev_val)) {\nkey_status[key] = 0; # 标记为无序\n}\n}\n\n# 更新当前 key 的上一个 value\nprev_value[key] = current_val;\n}\n\nEND {\n# 输出所有 key 的有序状态\nfor (key in key_status) {\nstatus = (key_status[key] == 1) ? &quot;有序&quot; : &quot;无序&quot;;\nprint key &quot;：&quot; status;\n}\n}\n' &quot;$file&quot;\n\n使用方式：\nbash check_order.sh xxx.csv\n\n在处理大文件（10G+）时特别有用。\nExample 2\ncsv中，第一列是股票代码，第二列是分钟线时间。下面这段脚本检测，对于每一个股票代码，他的分钟线时间都是逐分钟递增，检测是否存在跳变的情况。\nfunction diff_min(hhmm_1, hhmm_2) {\nif (hhmm_1 == &quot;13:01&quot; &amp;&amp; hhmm_2 == &quot;11:30&quot;) return 1;\nif (hhmm_1 == &quot;15:00&quot; &amp;&amp; hhmm_2 == &quot;15:00&quot;) return 1;\n\nsplit(hhmm_1, arr, &quot;:&quot;)\na = arr[1]*60 + arr[2]\nsplit(hhmm_2, arr, &quot;:&quot;)\nb = arr[1]*60 + arr[2]\nreturn a - b\n}\n\nBEGIN {\ndelete prev_min;\ndelete key_status;\n}\n\n{\nif (NR == 1) next;\nkey = $1\nmin = substr($2, 1, 5)\n\nif (!(key in prev_min)) {\nprev_min[key] = min\nkey_status[key] = 1 # ok\nnext\n}\n\npmin = prev_min[key]\nif (diff_min(min, pmin) != 1) {\nkey_status[key] = pmin\n}\n\nprev_min[key] = min\n}\n\nEND {\nfor (key in key_status) {\nstatus = (key_status[key] == 1) ? &quot;ok&quot; : key_status[key]\nprint key &quot;: &quot; status\n}\n}\n\nExample 3\ncsv中，第一列为股票代码，第二列为分钟线时间。对于相同股票代码，可能有重复的分钟线。需要过滤掉重复的但保留最后一条。\n{\nlines[NR] = $0\nif (NR == 1) next;\nkey = $1 &quot;_&quot; $2\n\nif (key in seen) {\ndup_lines[seen[key]] = 1\n}\nseen[key] = NR\n}\n\nEND {\nfor (i = 1; i &lt;= NR; i++) {\nline = lines[i]\nsplit(line, arr, &quot;,&quot;)\nkey = arr[1] &quot;_&quot; arr[2]\nif (!(i in dup_lines) || i == seen[key]) {\nprint line\n}\n}\n}\n\nExample 4\ncsv中，最后一列为数据序列号。check序列号逐一递增。\nBEGIN {\nflag = 1\n}\n\n{\nif (NR == 1) next;\n\ncur_val = $(NF) + 0\nif (prev_val ~ /^-?[0-9]+(\\.[0-9]+)?$/) {\nif (cur_val != prev_val + 1) {\nprint &quot;Line &quot; NR &quot; not continuous, prev:&quot; prev_val &quot;, cur:&quot; cur_val\nflag = 0\nexit 2\n}\n}\nprev_val = cur_val\n}\n\nEND {\nprint flag ? &quot;passed&quot; : &quot;failed&quot;\n}\n\ninline example\n# 打印第2列为689009且第1列匹配10:57:24的行\nawk -F, '$2==689009 &amp;&amp; $1~&quot;10:57:24&quot; {print $0}'l_4_4_0.csv\nawk -F, '$2==689009 &amp;&amp; $1 ~ /10:57:24/ {print $0}'l_4_4_0.csv\n\n# 打印第一列为920088且倒数第二列匹配10:31:0x的行，print $0 &lt;=&gt; print\nawk -F',' '$1==&quot;920088&quot; &amp;&amp; $(NF-1) ~ /10:31:0/ {print}'l_14_8_0.csv\n# 反向匹配（不包含相应模式），操作符换为 &quot;!~&quot;\nawk -F',' '$1==&quot;920088&quot; &amp;&amp; $(NF-1) !~ /10:31:0/ {print}'l_14_8_0.csv",
		"tags": [ "note","awk","csv","文本处理"]
},

{
		"title": 202505281711,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202505281711lambda表达式作为参数传递/",
		"content": "lambda不等于std::function，传参时会发生隐式转换\nhttps://cplusplus.com/forum/general/272010/",
		"tags": [ "note","lambda","cpp","pitfalls"]
},

{
		"title": 202506292148,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202506292148texlive精简安装/",
		"content": "参考：\n\nhttps://bithesis.bitnp.net/guide/getting-started.html#精简安装内容\nhttps://gist.github.com/yihui/7ae1144e45063c4957e5c1f6f67039f4\nhttps://tug.ctan.org/info/install-latex-guide-zh-cn/install-latex-guide-zh-cn.pdf\nhttps://www.cnblogs.com/eslzzyl/p/17358405.html\n\ntexlive可以将安装选项保存到一个texlive.profile文件中，安装程序直接读取这个文件进行安装，无需在进行交互。这次使用的是网络安装方式，而非下载iso文件，\n./install-tl --profile texlive.profile\n\n最后一步将可执行文件链接到系统目录可能要提权，安装完后可以执行\nsudo TEXLIVE_INSATLL_PATH/bin/tlmgr path add\ntmlgr option showall # 查看相关信息",
		"tags": [ "note","tex"]
},

{
		"title": 202507031535,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202507031535mysql基本命令/",
		"content": "命令行\n# connect to a mysql server\nmysql -h&lt;ip&gt; -u&lt;user&gt; -p\n\n# specify a database\nmysql&gt; use &lt;database_name&gt;\n\n# 修改列（shortnm）的数据类型\nmysql&gt; ALTER TABLE equity_delta_price MODIFY COLUMN shortnm varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL;\n\nsee: https://www.runoob.com/mysql/mysql-command-manual.html",
		"tags": [ "note"]
},

{
		"title": 202507171527,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202507171527debug技巧之top/",
		"content": "虽然htop更modern，但是top毕竟是自带。\n# 查看指定程序\ntop -p`pidof &lt;program&gt;`\n\n# 按H可以展示线程，可用于查看各线程CPU占用\ntop - 15:29:49 up 954 days, 23:27, 6 users, load average: 0.00, 0.06, 0.63\nThreads: 16 total, 0 running, 16 sleeping, 0 stopped, 0 zombie\n%Cpu(s): 0.1 us, 0.0 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st\nKiB Mem : 24689460 total, 7071788 free, 181036 used, 17436636 buff/cache\nKiB Swap: 0 total, 0 free, 0 used. 23842748 avail Mem\n\nPID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND\n9867 bingbin+ 20 0 615688 32832 19904 S 4.3 0.1 0:34.90 feeder_handler\n9864 bingbin+ 20 0 615688 32832 19904 S 0.3 0.1 0:00.50 SZL2ZhuBiSort\n9854 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.33 feeder_handler\n9855 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.01 feeder_handler\n9856 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.40 WorkThread1\n9857 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.00 WorkThread2\n9858 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.00 WorkThread3\n9859 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.00 WorkThread4\n9860 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.17 IOManagerImpl\n9861 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.21 HttpHandler\n9862 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.23 FileWriter\n9863 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.00 PubSortedThrd\n9865 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.42 SZL2ZhuBiSort\n9866 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.48 SZL2ZhuBiSort\n9868 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.03 feeder_handler\n9869 bingbin+ 20 0 615688 32832 19904 S 0.0 0.1 0:00.36 IOManagerImpl\n\n常用快捷键：\n\ne: 切换数值显示单位，m、g、t、p\nm：显示内存用量条\nM：按内存占用排序\nz：上色\nH：切换显示线程\nc: 切换显示完整命令行\nN：固定顺序，行不再跳来跳去",
		"tags": [ "note","linux","管理"]
},

{
		"title": 202507181631,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202507181631sed技巧/",
		"content": "sed很强大，但也没那么直观易用。\n# 只打印匹配行\nsed -n '/pattern/p'\n\n# 启用扩展正则表达式，大小括号分组无须escape\nsed -E 's/pattern/substituted/'\n\n# 可以先使用下面的命令验证正则是否能匹配\nsed -nE '/pattern/p'\n\n# 分割符不一定非得是`/`，可以随便换，在搜索或替换的字符中包含`/`的时候，就不要用它作为分割符。\nsed 's|pattern|substituted|'\n\nsed -nE 's/(&quot;Address&quot;.*:.*&quot;.*:)([0-9]{4,})&quot;/\\1\\2&quot;/p' feeder_handler.cfg\nsed -nE '/(&quot;Address&quot;.*:.*&quot;.*:)([0-9]{4,})&quot;/p' feeder_handler.cfg\n\n可以先准备好正则表达式，利用下面的网站可以快速写出正确的正则表达式。\n正则表达式debug网站\n\nhttps://www.debuggex.com/\nhttps://regex101.com/",
		"tags": [ "note"]
},

{
		"title": 202507241701,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202507241701cat命令/",
		"content": "# cat标准输入和一个文件到另一个文件\ncommand1 | cat - file1 &gt; file2\n\n# cat两个命令的输出\ncat &lt;(command1) &lt;(command2)\n\n# cat标准输入和一个命令的输出\ncommand1 | cat - &lt;(command2)",
		"tags": [ "note","linux",""]
},

{
		"title": 202508151303,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202508151303redis集群部署/",
		"content": "一般集群3主3备，需要6个redis示例。示例配置，\nport 6379\ncluster-enabled yes\ndir /etc/redis/\ncluster-config-file node.conf\ncluster-node-timeout 10000\nprotected-mode no\nrequirepass p@ssw0rd\nlogfile /etc/redis/redis-server.log\nio-threads 4\nio-threads-do-reads yes\nmasterauth p@ssw0rd\n\n然后在各个节点上启动redis示例，可以通过syst service启动，以达到故障后自动重启的效果。启动完之后，在任意机器上通过redis-cli即可创建集群。\nredis-cli --cluster create 10.24.71.154:6380 10.24.71.165:6380 10.24.71.18:6380 10.24.71.184:6380 10.24.71.188:6380 10.24.71.189:6380 --cluster-replicas 1 -a 'p@ssw0rd'\n\n即可自动分配槽位，主备等。\n$ cat /etc/redis/node.conf\n01e22cb1988300540363d16b88db9f300e90e09b 10.24.71.18:6379@16379 master - 0 1723628125000 3 connected 10923-16383\n4f2a252cb9e24b95543fff7e78004675bd70edeb 10.24.71.188:6379@16379 slave 7f5df9ad50649e087afc6c41a5b94479ad9b9f0a 0 1723628125090 1 connected\n7f5df9ad50649e087afc6c41a5b94479ad9b9f0a 10.24.71.154:6379@16379 master - 0 1723628124083 1 connected 0-5460\n354350dbd36e2302c9c59b768406c0662ad0f2c9 10.24.71.184:6379@16379 slave 01e22cb1988300540363d16b88db9f300e90e09b 0 1723628125191 3 connected\ncc6a11f2705eca8e2b362feebc512c5369448ee6 10.24.71.189:6379@16379 slave 0986e476de8a7097cc1c65f279651fa22a269c3b 0 1723628125000 2 connected\n0986e476de8a7097cc1c65f279651fa22a269c3b 10.24.71.165:6379@16379 myself,master - 0 1723628125000 2 connected 5461-10922\nvars currentEpoch 6 lastVoteEpoch 0\n\n同时，redis-cli连接任意集群节点，通过cluster nodes亦可查看，\n$ redis-cli -a 'p@ssw0rd'\n127.0.0.1:6380&gt; CLUSTER NODES\n5e26e347983060f7703a0194925455099f9d1665 10.24.71.165:6380@16380 slave 6bda7c18e4f3ccc2a9b813e6e8990d5929dad7cb 0 1755234623000 1 connected\nca6cbd9b1a6887584e5e78d30aa5097ab438d839 10.24.71.189:6380@16380 master - 0 1755234623000 3 connected 10923-16383\na275278b451e517ce703aaf125d1e825ea00806b 10.24.71.154:6380@16380 myself,slave ca6cbd9b1a6887584e5e78d30aa5097ab438d839 0 1755234620000 3 connected\n6bda7c18e4f3ccc2a9b813e6e8990d5929dad7cb 10.24.71.184:6380@16380 master - 0 1755234624757 1 connected 0-5460\n046e0033330f0cafe25b84734e92f1c9a4d48ad7 10.24.71.188:6380@16380 master - 0 1755234621753 2 connected 5461-10922\ne88867b424ef5a10d61a59bb0d7999390d85cde3 10.24.71.18:6380@16380 slave 046e0033330f0cafe25b84734e92f1c9a4d48ad7 0 1755234623755 2 connected\n127.0.0.1:6380&gt;\n\n虽然集群中任意节点均可进行读写，但单点流量过高可能出现瓶颈。搭配predixy-1.0.5可以做到命令级负载均衡。",
		"tags": [ "note","redis","cluster"]
},

{
		"title": 202508181019,
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/__zettel/202508181019redis配置io-threads/",
		"content": "################################ THREADED I/O #################################\n\n# Redis is mostly single threaded, however there are certain threaded\n# operations such as UNLINK, slow I/O accesses and other things that are\n# performed on side threads.\n#\n# Now it is also possible to handle Redis clients socket reads and writes\n# in different I/O threads. Since especially writing is so slow, normally\n# Redis users use pipelining in order to speed up the Redis performances per\n# core, and spawn multiple instances in order to scale more. Using I/O\n# threads it is possible to easily speedup several times Redis without resorting\n# to pipelining nor sharding of the instance.\n#\n# By default threading is disabled, we suggest enabling it only in machines\n# that have at least 4 or more cores, leaving at least one spare core.\n# We also recommend using threaded I/O only if you actually have performance\n# problems, with Redis instances being able to use a quite big percentage of\n# CPU time, otherwise there is no point in using this feature.\n#\n# So for instance if you have a four cores boxes, try to use 3 I/O\n# threads, if you have a 8 cores, try to use 7 threads. In order to\n# enable I/O threads use the following configuration directive:\n#\n# io-threads 4\n#\n# Setting io-threads to 1 will just use the main thread as usual.\n# When I/O threads are enabled, we not only use threads for writes, that\n# is to thread the write(2) syscall and transfer the client buffers to the\n# socket, but also use threads for reads and protocol parsing.\n#\n# NOTE: If you want to test the Redis speedup using redis-benchmark, make\n# sure you also run the benchmark itself in threaded mode, using the\n# --threads option to match the number of Redis threads, otherwise you'll not\n# be able to notice the improvements.\n\nio-threads选项开启io多线程，值得注意的是，开启的io多线程中也包含主线程，所以通常4核，设为3，8核设为7，因为自带主线程也是一个io线程。",
		"tags": [ "note","redis"]
},

{
		"title": "Digital Garden Entry",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/",
		"content": "This is site is powerd by obsidian digital garden plugin. And this page is a sample entry point for exploring this site, which should not be such simple though.\nThis site is mainly for self references, all pages liscensed under CC BY-NC-ND 4.0 unless explicitly claimed.\nSome selected pages,\n\nFile\nUpdate\nTags\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">经历</a>\n-\n#interview\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">模式匹配</a>\n-\n#coding-problem#pattern-match\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">树相关</a>\n-\n#tree#coding-problem\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">栈和队列</a>\n-\n#stack#queue#coding-problem\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">排序</a>\n-\n#sort#coding-problem\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">基础题</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">场景题</a>\n-\n#coding-problem\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">基本问答</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">信息汇总</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">ToLearn</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">操作系统</a>\n-\n#操作系统\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">tricks</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">条件编译</a>\n-\n#tex\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">shell基础</a>\n-\n#shell#bash\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">编码问题</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">weakref</a>\n-\n#python\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">pylearn</a>\n-\n#python#note\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">nice_phrase_in_paper</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">计算机网络基础</a>\n-\n#http#网络#tcp#udp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">tcp</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">IO模型</a>\n-\n#network#io-multiplex#io多路复用#select#poll\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">K-Means</a>\n-\n#math\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">使用指北</a>\n-\n#linux#管理#手册#manual\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Swap分区扩容</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Archlinux重置keyring</a>\n-\n#linux\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">git手册</a>\n-\n#git\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Manage-Dotfiles-by-Git</a>\n-\n#git\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">默认参数</a>\n-\n#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">链接</a>\n-\n#cpp#linkage\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">输入输出</a>\n-\n#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/notes/cpp/继承/\">继承</a>\n-\n#cpp#public#private#protected\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">类</a>\n-\n#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">模板</a>\n-\n#cpp#template\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">智能指针</a>\n-\n#cpp#smart-pointer\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">宏</a>\n-\n#cpp#macro\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">字节序</a>\n-\n#cpp#endian\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">多态</a>\n-\n#virtual-destructor#虚析构函数#destructor#cpp#polymorphism\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">函数指针</a>\n-\n#成员函数指针#function-pointer#cpp#pointer\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">内存布局</a>\n-\n#内存对齐#cpp#mem-segment\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">传值or引用or指针</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">static关键字</a>\n-\n#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">sizeof operator</a>\n-\n#sizeof#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">sdg-notes</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">gdb基础</a>\n-\n#debug#gdb#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">cpp-learn</a>\n-\n#define#include#defined#inclue#cpp#note\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">TypeTraits介绍</a>\n-\n#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">CPP基础</a>\n-\n#链接#编译#linkage\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">同步异步阻塞非阻塞</a>\n-\n#同步#异步#阻塞#非阻塞\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Asynchronous Operations</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">TCP协议</a>\n-\n#tcp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">GPG使用方法</a>\n-\n#gpg#pgp#gnu#加密#解密#数字签名#安全#linux\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">CVX notes</a>\n-\n#math\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2025-08-22</a>\n-\n#diary#life#车检#年检#年审\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2024-11-02</a>\n-\n#diary#问题#速记#terminfo\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2024-09-24</a>\n-\n#diary#自我介绍#个人介绍#个人简介#intro\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2023-04-23</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2023-03-30</a>\n-\n#firefox#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2023-03-11</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2023-03-08</a>\n-\n#openwrt#路由器#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2023-01-09</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-12-12</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-11-10</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-09-08</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-09-06</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-08-15</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-08-10</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-08-02</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-24</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-22</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-21</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-18</a>\n-\n#gcc#cpp#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-12</a>\n-\n#达夫设备#duff-device#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-07</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-07-06</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-06-15</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-06-13</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-06-05</a>\n-\n#diary#life\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-06-02</a>\n-\n#python#print#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-06-01</a>\n-\n#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-05-31</a>\n-\n#css#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-05-30</a>\n-\n#职位要求参考#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-05-29</a>\n-\n#templater#obsidian#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-05-26</a>\n-\n#copy-on-write#endian#ifdef#endif#if#diary\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">2022-05-23</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/\">202508232328garden-entry</a>\n-\n#gardenEntry\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202508181019redis配置io-threads/\">202508181019redis配置io-threads</a>\n-\n#redis\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202508151303redis集群部署/\">202508151303redis集群部署</a>\n-\n#redis#cluster\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202507241701cat命令/\">202507241701cat命令</a>\n-\n#linux#cmd\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202507181631sed技巧/\">202507181631sed技巧</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202507171527debug技巧之top/\">202507171527debug技巧之top</a>\n-\n#linux#管理\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202507031535mysql基本命令/\">202507031535mysql基本命令</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202506292148texlive精简安装/\">202506292148texlive精简安装</a>\n-\n#tex\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202505281711lambda表达式作为参数传递/\">202505281711lambda表达式作为参数传递</a>\n-\n#lambda#cpp#pitfalls\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202505090847awk判断csv的id有序性/\">202505090847awk判断csv的id有序性</a>\n-\n#awk#csv#文本处理\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202504301210反向迭代器转正向迭代器/\">202504301210反向迭代器转正向迭代器</a>\n-\n#iterator#reverse_iterator\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202503191332程序的进程名和命令名/\">202503191332程序的进程名和命令名</a>\n-\n#pgrep#pkill\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202503092037NetworkManager更换iwd后端/\">202503092037NetworkManager更换iwd后端</a>\n-\n#networkmanager#iwd#wpa_supplicant\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202503071009不要直接改系统的glibc版本/\">202503071009不要直接改系统的glibc版本</a>\n-\n#glibc\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502261718firefox-chrome-禁用政策插件/\">202502261718firefox-chrome-禁用政策插件</a>\n-\n#firefox#chrome#技巧\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502241705crtp-in-cpp/\">202502241705crtp-in-cpp</a>\n-\n#CRTP#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502210928make-template/\">202502210928make-template</a>\n-\n#make\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502201432python-paramiko使用小记/\">202502201432python-paramiko使用小记</a>\n-\n#paramiko#python#ssh\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502181657gdb-attach/\">202502181657gdb-attach</a>\n-\n#gdb#debug#调试#attach\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502181641virtualbox虚拟机断网问题/\">202502181641virtualbox虚拟机断网问题</a>\n-\n#route#virtualbox#网络#路由\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202502141432tar命令的小坑/\">202502141432tar命令的小坑</a>\n-\n#tar#备份\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202501241043创建软连接的路径问题/\">202501241043创建软连接的路径问题</a>\n-\n#linux#softlink#软连接#ln-command\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202501211106kroki-sample/\">202501211106kroki-sample</a>\n-\n#kroki#draw#画图#uml#digram\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202501092242archlinux安装指定版本包/\">202501092242archlinux安装指定版本包</a>\n-\n#linux#包管理#package\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202501082036suckless-windows/\">202501082036suckless-windows</a>\n-\n#定制#windows#suckless#msys2\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412262023qt添加翻译/\">202412262023qt添加翻译</a>\n-\n#qt#多语言\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412251940linux目录结构/\">202412251940linux目录结构</a>\n-\n#linux#directory#目录结构\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412242129rygel使用小记/\">202412242129rygel使用小记</a>\n-\n#rygel#dlna\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412222011termux编译baidupcs/\">202412222011termux编译baidupcs</a>\n-\n#baidupcs#termux#android\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412221603笔记方法论/\">202412221603笔记方法论</a>\n-\n#笔记#note#方法论\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412212328goldendict更换systray-icon/\">202412212328goldendict更换systray-icon</a>\n-\n#icon-theme#goldendict#美化#linux#systray\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412212317fcitx5更换systray-icon/\">202412212317fcitx5更换systray-icon</a>\n-\n#fcitx#systray#icon-theme#美化#linux\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412202251ssh问题记录/\">202412202251ssh问题记录</a>\n-\n#ssh#terminfo#troubleshooting#sftp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412202053simplify/\">202412202053simplify</a>\n-\n#笔记#方法论\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412171658imv官包不支持gif/\">202412171658imv官包不支持gif</a>\n-\n#imv#image-viewer#linux#tool\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412151610pipewire-commands/\">202412151610pipewire-commands</a>\n-\n#av#pulseaudio#audio#linux#pipewire\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412131501waydroid使用小记/\">202412131501waydroid使用小记</a>\n-\n#waydroid#android#linux#container#安卓#容器\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412121707redshift使用小记/\">202412121707redshift使用小记</a>\n-\n#redshift#桌面#美化#护眼\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412112322firefox重启保留标签页/\">202412112322firefox重启保留标签页</a>\n-\n#firefox#trick#技巧\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412112316linux桌面美化/\">202412112316linux桌面美化</a>\n-\n#美化#桌面#linux\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202412111913dunst使用小记/\">202412111913dunst使用小记</a>\n-\n#dunst#notification-daemon#桌面通知#美化\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202411251922动态库链接问题/\">202411251922动态库链接问题</a>\n-\n#链接路径#符号表#链接#linkage\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202411132048数字证书/\">202411132048数字证书</a>\n-\n#数字签名#数字证书#安全#非对称加密#http#https\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202411100101firewalld使用小记/\">202411100101firewalld使用小记</a>\n-\n#firewalld#防火墙#centos\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202411092142-frp使用小记/\">202411092142-frp使用小记</a>\n-\n#frp#内网穿透#反代理\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202409242301-usb耳机无声音/\">202409242301-usb耳机无声音</a>\n-\n#pipewire#pulseaudio#linux#音频\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202406111912函数栈/\">202406111912函数栈</a>\n-\n#cpp#stack\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202405100938mutable-in-cpp/\">202405100938mutable-in-cpp</a>\n-\n#cpp#mutable\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202404150949vlan/\">202404150949vlan</a>\n-\n#vlan#vxlan\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202310232023/\">202310232023</a>\n-\n#链接#编译\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202310162020UML基础/\">202310162020UML基础</a>\n-\n#uml\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202309080931code-smells/\">202309080931code-smells</a>\n-\n#code-smell#refactor\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202308261504make基础/\">202308261504make基础</a>\n-\n#make\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202308181549SFINAE/\">202308181549SFINAE</a>\n-\n#cpp#sfinae\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202308012018lambda表达式/\">202308012018lambda表达式</a>\n-\n#cpp#labmda\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202308011934C++惯用法/\">202308011934C++惯用法</a>\n-\n#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202307261811vscode开发cpp配置/\">202307261811vscode开发cpp配置</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202307121011开源协议解读/\">202307121011开源协议解读</a>\n-\n#oss#开源\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202307051438CPP调试-coredump/\">202307051438CPP调试-coredump</a>\n-\n#cpp#debug#coredump#gdb\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202307031654GIT-rebase撤销/\">202307031654GIT-rebase撤销</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306301718类成员是否可以是类本身的类型/\">202306301718类成员是否可以是类本身的类型</a>\n-\n#cpp#class\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306281126异常处理/\">202306281126异常处理</a>\n-\n#cpp#exception#异常处理\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306281021资源管理/\">202306281021资源管理</a>\n-\n#RAII#cpp#resource-manage\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306281018循环队列参考/\">202306281018循环队列参考</a>\n-\n#循环队列#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306272237整数运算/\">202306272237整数运算</a>\n-\n#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306272227类型转换/\">202306272227类型转换</a>\n-\n#cpp#cast\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306270923memcpy/\">202306270923memcpy</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306262103cmake-template/\">202306262103cmake-template</a>\n-\n#cmake\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202306081412GRE拨测切CPP方案</a>\n-\n#hw#work#gre\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306071056对称加密和非对称加密/\">202306071056对称加密和非对称加密</a>\n-\n#加密#安全#密钥\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202306062013SSL-vs-TLS/\">202306062013SSL-vs-TLS</a>\n-\n#ssl#tls#terminology#term#术语\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202306011712GO拨测代码拆分</a>\n-\n#gre#go#hw#work\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305310919GO语言基础/\">202305310919GO语言基础</a>\n-\n#go\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305302345/\">202305302345</a>\n-\n#coding#problem\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305271514sudo安全问题/\">202305271514sudo安全问题</a>\n-\n#hw#sudo#安全\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305261402odrs表格拓扑</a>\n-\n#hw#work\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305222026mermaid-tutorial</a>\n-\n#mermaid#graph#draw#画图#作图\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305191500tcpdump抓包/\">202305191500tcpdump抓包</a>\n-\n#tcpdump#抓包\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305181617GRE拨测诉求及问题整理</a>\n-\n#hw#work\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305171430GOPROXY配置</a>\n-\n#hw#go#goproxy\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305170944callout-user-guide/\">202305170944callout-user-guide</a>\n-\n#obsidian#callout#user-guide\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305161028内存模型/\">202305161028内存模型</a>\n-\n#cpp#memory-model#memory-order#memory-barrier#内存序\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305160951初始化列表/\">202305160951初始化列表</a>\n-\n#cpp#initializer_list\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305091937枚举/\">202305091937枚举</a>\n-\n#enum#enum_class#cpp\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202305080906 Redis数据库连接/\">202305080906 Redis数据库连接</a>\n-\n#work#hw\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305061708 操作高斯数据库的接口</a>\n-\n#work#hw\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202305040939welink记录</a>\n-\n#可信#聊天记录#welink#chat#history\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304281707-右值引用/\">202304281707-右值引用</a>\n-\n#cpp#rvalue#右值\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202304271002 新增接口流程</a>\n-\n#hw#huawei#work\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202304261834 布包流程</a>\n-\n#hw#huawei#work\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304241826 RTTI in cpp/\">202304241826 RTTI in cpp</a>\n-\n#rtti#dynamic-cast#cpp#typeid\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304231659 firefox伪装chrome ua/\">202304231659 firefox伪装chrome ua</a>\n-\n#firefox#chrome#browser#ua#useragent\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304231411 name mangling/\">202304231411 name mangling</a>\n-\n#cpp#name-mangling\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304230920 cmake learn/\">202304230920 cmake learn</a>\n-\n#cmake\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304202149volatile-specifier/\">202304202149volatile-specifier</a>\n-\n#cpp#specifier#volatile\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">202304172151</a>\n-\n\n<a class=\"internal-link\" target=\"\" data-note-icon=\"\" href=\"/__zettel/202304101713 serach in hugo/\">202304101713 serach in hugo</a>\n-\n#hugo#search#website#blog\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Untitled -1</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Untitled -2</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Untitled</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">README</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">最大熵对应的概率分布</a>\n-\n#math\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">我与 Gnome 的爱与恨</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">鹧鸪天·夜游</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">鬼话</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">题水阙</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">题五一心事</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">露降</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">雪压轩集</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">雪之野</a>\n-\n#诗词曲赋#现代诗\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">阿莉埃蒂</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">遣怀</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">道破元日</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">踏莎行·为五前作</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">踏莎行</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">赠有情人</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">谈谈《报任安书》</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">谈谈-LaTeX-的自定义字体</a>\n-\n#排版#latex#字体\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">评仙剑</a>\n-\n#短评\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">记一次重装Linux</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">行香子寄贺双卿</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">结萝</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">神奇的位运算</a>\n-\n#位运算#trick#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">祝考研顺利</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">碎碎念</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">瞎说KMP算法</a>\n-\n#算法#模式匹配\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">相思曲</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">画工</a>\n-\n#短评\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">生查子</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">理园小桂</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">独不见</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">湖</a>\n-\n#诗词曲赋#现代诗\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">浅谈-Logistic-回归</a>\n-\n#math#机器学习\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">某不正经的个人总结</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">村东头</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">杂记</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">杂思</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">望日观月</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">月夕调</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">旅客</a>\n-\n#诗词曲赋#现代诗\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">文本</a>\n-\n#诗词曲赋#现代诗\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">打春诗</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">戏小调</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">忆萝月·端阳</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">忆王孙</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">幽浦吟</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">年少的自大</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">天空</a>\n-\n#诗词曲赋#现代诗\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">声音的消亡</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">古别</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">卜算子·重阳</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">初尝-C-类设计</a>\n-\n#cpp\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">关于饭局那些事儿</a>\n-\n#碎碎念\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">假想敌</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">使用Tar备份Archlinux</a>\n-\n#备份#tar\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">临江仙·造境</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">二十四</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">临江仙·友</a>\n-\n#诗词曲赋\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">一些推导</a>\n-\n#math\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">what-is-escape-character</a>\n-\n#转义\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">touchpad-horiz-scroll</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">wedding</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">tex-sty-basic</a>\n-\n#排版#latex\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">shell-intro</a>\n-\n#shell\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">python-metaclass</a>\n-\n#python\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">python-coroutine-with-yield</a>\n-\n#python#coroutine\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">python-iterables</a>\n-\n#python\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">nn-notes</a>\n-\n#cnn\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">nice-softwares</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">metapost</a>\n-\n#metapost#作图\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">melody-theme-customization</a>\n-\n#美化#个性化\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">linux开机无声音</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">linux-hibernate</a>\n-\n#hibernate\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">latexmk-basic</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">hello-world</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">graduate-summary</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">gnome-app-slow-start</a>\n-\n#折腾\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">eq-update</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">design-pattern-notes</a>\n-\n#设计模式\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">concurrent-programming</a>\n-\n#多线程#并发\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">coding-problems</a>\n-\n#算法#动态规划#编程\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">build-your-ladder</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">blog-trans</a>\n-\n#字体#美化#个性化\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">bit-field-struct</a>\n-\n#cpp#结构体#位运算\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">archlinx-keyring-broken</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Vim命令速查</a>\n-\n#vim#reference\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Use-Reference-in-Beamer</a>\n-\n#latex#beamer#排版\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">The-Beauty-of-Recursion</a>\n-\n#recursion#programming#thought\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">SICP-Learning-Notes</a>\n-\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Polybar-的配置笔记</a>\n-\n#polybar#个性化\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Newifi-Mini安装PandoraBox</a>\n-\n#路由器#个性化#刷机\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Matrix-Factorization</a>\n-\n#math#algebra\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Linux-相关信息速查</a>\n-\n#常用命令#reference\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">LeetCode-Sum-of-Two-Integers</a>\n-\n#cpp#leetcode#位运算\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">HTML-美化-Markdown-排版</a>\n-\n#排版#美化#html\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Exponetial-Distribution</a>\n-\n#math#probability\n\n<a class=\"internal-link is-unresolved\" href=\"/404\" target=\"\">Android刷机的一般步骤</a>\n-\n#android#刷机",
		"tags": ["interview", "coding-problem", "pattern-match", "tree", "coding-problem", "stack", "queue", "coding-problem", "sort", "coding-problem", "coding-problem", "操作系统", "tex", "shell", "bash", "python", "python", "note", "http", "网络", "tcp", "udp", "network", "io-multiplex", "io多路复用", "select", "poll", "math", "linux", "管理", "手册", "manual", "linux", "git", "git", "cpp", "cpp", "linkage", "cpp", "cpp", "public", "private", "protected", "cpp", "cpp", "template", "cpp", "smart-pointer", "cpp", "macro", "cpp", "endian", "virtual-destructor", "虚析构函数", "destructor", "cpp", "polymorphism", "成员函数指针", "function-pointer", "cpp", "pointer", "内存对齐", "cpp", "mem-segment", "cpp", "sizeof", "cpp", "debug", "gdb", "cpp", "define", "include", "defined", "inclue", "cpp", "note", "cpp", "链接", "编译", "linkage", "同步", "异步", "阻塞", "非阻塞", "tcp", "gpg", "pgp", "gnu", "加密", "解密", "数字签名", "安全", "linux", "math", "diary", "life", "车检", "年检", "年审", "diary", "问题", "速记", "terminfo", "diary", "自我介绍", "个人介绍", "个人简介", "intro", "diary", "firefox", "diary", "diary", "openwrt", "路由器", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "diary", "gcc", "cpp", "diary", "达夫设备", "duff-device", "diary", "diary", "diary", "diary", "diary", "diary", "life", "python", "print", "diary", "diary", "css", "diary", "职位要求参考", "diary", "templater", "obsidian", "diary", "copy-on-write", "endian", "ifdef", "endif", "if", "diary", "gardenEntry", "redis", "redis", "cluster", "linux", "cmd", "linux", "管理", "tex", "lambda", "cpp", "pitfalls", "awk", "csv", "文本处理", "iterator", "reverse_iterator", "pgrep", "pkill", "networkmanager", "iwd", "wpa_supplicant", "glibc", "firefox", "chrome", "技巧", "CRTP", "cpp", "make", "paramiko", "python", "ssh", "gdb", "debug", "调试", "attach", "route", "virtualbox", "网络", "路由", "tar", "备份", "linux", "softlink", "软连接", "ln-command", "kroki", "draw", "画图", "uml", "digram", "linux", "包管理", "package", "定制", "windows", "suckless", "msys2", "qt", "多语言", "linux", "directory", "目录结构", "rygel", "dlna", "baidupcs", "termux", "android", "笔记", "note", "方法论", "icon-theme", "goldendict", "美化", "linux", "systray", "fcitx", "systray", "icon-theme", "美化", "linux", "ssh", "terminfo", "troubleshooting", "sftp", "笔记", "方法论", "imv", "image-viewer", "linux", "tool", "av", "pulseaudio", "audio", "linux", "pipewire", "waydroid", "android", "linux", "container", "安卓", "容器", "redshift", "桌面", "美化", "护眼", "firefox", "trick", "技巧", "美化", "桌面", "linux", "dunst", "notification-daemon", "桌面通知", "美化", "链接路径", "符号表", "链接", "linkage", "数字签名", "数字证书", "安全", "非对称加密", "http", "https", "firewalld", "防火墙", "centos", "frp", "内网穿透", "反代理", "pipewire", "pulseaudio", "linux", "音频", "cpp", "stack", "cpp", "mutable", "vlan", "vxlan", "链接", "编译", "uml", "code-smell", "refactor", "make", "cpp", "sfinae", "cpp", "labmda", "cpp", "oss", "开源", "cpp", "debug", "coredump", "gdb", "cpp", "class", "cpp", "exception", "异常处理", "RAII", "cpp", "resource-manage", "循环队列", "cpp", "cpp", "cpp", "cast", "cmake", "hw", "work", "gre", "加密", "安全", "密钥", "ssl", "tls", "terminology", "term", "术语", "gre", "go", "hw", "work", "go", "coding", "problem", "hw", "sudo", "安全", "hw", "work", "mermaid", "graph", "draw", "画图", "作图", "tcpdump", "抓包", "hw", "work", "hw", "go", "goproxy", "obsidian", "callout", "user-guide", "cpp", "memory-model", "memory-order", "memory-barrier", "内存序", "cpp", "initializer_list", "enum", "enum_class", "cpp", "work", "hw", "work", "hw", "可信", "聊天记录", "welink", "chat", "history", "cpp", "rvalue", "右值", "hw", "huawei", "work", "hw", "huawei", "work", "rtti", "dynamic-cast", "cpp", "typeid", "firefox", "chrome", "browser", "ua", "useragent", "cpp", "name-mangling", "cmake", "cpp", "specifier", "volatile", "hugo", "search", "website", "blog", "math", "诗词曲赋", "碎碎念", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "现代诗", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "排版", "latex", "字体", "短评", "诗词曲赋", "诗词曲赋", "位运算", "trick", "cpp", "诗词曲赋", "碎碎念", "算法", "模式匹配", "诗词曲赋", "短评", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "现代诗", "math", "机器学习", "碎碎念", "碎碎念", "诗词曲赋", "诗词曲赋", "诗词曲赋", "现代诗", "诗词曲赋", "现代诗", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "诗词曲赋", "碎碎念", "诗词曲赋", "现代诗", "碎碎念", "诗词曲赋", "诗词曲赋", "cpp", "碎碎念", "备份", "tar", "诗词曲赋", "诗词曲赋", "诗词曲赋", "math", "转义", "排版", "latex", "shell", "python", "python", "coroutine", "python", "cnn", "metapost", "作图", "美化", "个性化", "hibernate", "折腾", "设计模式", "多线程", "并发", "算法", "动态规划", "编程", "字体", "美化", "个性化", "cpp", "结构体", "位运算", "vim", "reference", "latex", "beamer", "排版", "recursion", "programming", "thought", "polybar", "个性化", "路由器", "个性化", "刷机", "math", "algebra", "常用命令", "reference", "cpp", "leetcode", "位运算", "排版", "美化", "html", "math", "probability", "android", "刷机", "note","gardenEntry"]
},

{
		"title": "药性赋",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/life/养生/药性赋/",
		"content": "《药性赋》，原书未著撰人，据考证约为金元时代作品。原为中医初学中药的启蒙书。该书将248种常用中药按药性分寒、热、温、平四类，用韵语编写成赋体，言简意赅，朗朗上口，便于诵读记忆。尤其是对药性概括精辟，一经铭记在心，受用终生，颇受历代读者喜爱，传沿至今，长盛不衰。\n由于原书用歌赋韵语编写，文词过简，读之难以深悟。我们于60年代编写出版了《药性赋白话解》一书。该书一经刊行，即深受读者欢迎，已印行22次，连续多年排为畅销书之列。随着中药学的发展，一版已不能满足现代读者要求。为此，北京中医药大学中药教研室对此书进行了二版修订，内容更为丰富实用，除“白话解”外，增加了药物的现代用量用法、配伍应用、附方、注意事项，并加入按语，据药源不同、炮制之别、药理精微、功能对比等，阐述用法之异。读者熟读本书，便可打下坚实的药性基本功，终生受益。\n第一章 寒性药\n诸药赋性，此类最寒。\n犀角解乎心热；羚羊清乎肺肝。泽泻利水通淋而补阴不足；海藻散瘿破气而治疝何难。闻之菊花能明目清头风；射干疗咽闭而消痈毒；薏苡理脚气而除风湿；藕节消瘀血而止吐衄。瓜蒌子下气润肺喘兮，又且宽中，车前子止泻利小便兮，尤能明目。是以黄柏疮用，兜铃嗽医。地骨皮有退热除蒸之效，薄荷叶宜消风清肿之施。宽中下气，枳壳缓而枳实速也；疗肌解表，干葛先而柴胡次之。百部治肺热，咳嗽可止；栀子凉心肾，鼻衄最宜。玄参治结热毒痈，清利咽膈；升麻消风热肿毒，发散疮痍。 尝闻腻粉抑肺而敛肛门；金箔镇心而安魂魄。茵陈主黄疸而利水；瞿麦治热淋之有血。 朴硝通大肠，破血而止痰僻；石膏治头痛，解肌而消烦渴。前胡除内外之痰实；滑石利六腑之涩结。天门冬止嗽，补血涸而润心肝；麦门冬清心，解烦渴而除肺热。又闻治虚烦、除哕呕，须用竹茹；通秘结、导瘀血，必资大黄。宣黄连治泠热之痢，又厚肠胃而止泻；淫羊藿疗风寒之痹，且补阴虚而助阳。茅根止血与吐衄；石苇通淋与小肠。熟地黄补血且疗虚损；生地黄宣血更医眼疮。赤芍药破血而疗腹痛，烦热亦解；白芍药补虚而生新血，温热尤良。 若乃消肿满逐水于牵牛；除热毒杀虫于贯众。金铃子治疝气而补精血；萱草根治五淋而消乳肿。侧柏叶治血山崩漏之疾；香附子理气血妇人之用。地肤子利膀胱，可洗皮肤之风；山豆根解热毒，能止咽喉之痛。白藓皮去风治筋弱，而疗足顽痹；旋覆花明目治头风，而消痰嗽壅。又况荆芥穗清头目便血，疏风散疮之用；瓜蒌根疗黄疸毒痈，消渴解痰之忧。地榆疗崩漏，止血止痢；昆布破疝气，散瘿散瘤。疗伤寒、解虚烦，淡竹叶之功倍；除结气、破瘀血，牡丹皮之用同。知母止嗽而骨蒸退；牡蛎涩精而虚汗收。贝母清痰止咳嗽而利心肝；桔梗开肺利胸膈而治咽喉。若夫黄芩治诸热，兼主五淋；槐花治肠风，亦医痔痢。常山理痰结而治温疟；葶苈泻肺喘而通水气。此六十六种药性之寒者也。\n第二章 热性药\n药有温热，又当审详。\n欲温中以荜拨；用发散以生姜。五味子止嗽痰，且滋肾水；腽肭脐疗痨瘵，更壮元阳。 原夫川芎祛风湿、补血清头；续断治崩漏、益筋强脚。麻黄表汗以疗咳逆；韭子壮阳而医白浊。川乌破积，有消痰治风痹之功；天雄散寒，为去湿助精阳之药。观夫川椒达下，干姜暖中。胡芦巴治虚泠之疝气；生卷柏破症葭而血通。白朮消痰壅、温胃，兼止吐泻；菖蒲开心气、散泠，更治耳聋。丁香快脾胃而止吐逆；良姜止心气痛之攻冲。肉苁蓉填精益肾；石硫黄暖胃驱虫。胡椒主去痰而除泠；秦椒主攻痛而去风。吴茱萸疗心腹之泠气；灵砂定心脏之怔忡。盖夫散肾泠、助脾胃，须毕澄茄；疗心痛、破积聚，用蓬莪朮。缩砂止吐泻安胎、化酒食之剂；附子疗虚寒反胃、壮元阳之方。白豆蔻治泠泻，疗痈止痛于乳香；红豆蔻止吐酸，消血杀虫于干漆。岂知鹿茸生精血，腰脊崩漏之均补；虎骨壮筋骨，寒湿毒风之并祛。檀香定霍乱，而心气之痛愈；鹿角秘精髓，而腰脊之痛除。消肿益血于米醋；下气散寒于紫苏。扁豆助脾，则酒有行药破结之用；麝香开窍，则葱为通中发汗之需。尝观五灵脂治崩漏，理血气之刺痛；麒麟竭止血出，疗金疮之伤折。糜茸壮阳以助肾；当归补虚而养血。乌贼骨止带下，且除崩漏目翳；鹿角胶住血崩，能补虚羸劳绝。白花蛇治瘫痪，疗风痒之癣疹；乌梢蛇疗不仁，去疮疡之风热。乌药有治泠气之理；禹余粮乃疗崩漏之因。巴豆利痰水，能破寒积；独活疗诸风，不论新久。山茱萸治头晕遗精之药；白石英医咳嗽吐脓之人。厚朴温胃而去呕胀，消痰亦验；肉桂行血而疗心痛，止汗如神。是则鲫鱼有温胃之功；代赭乃镇肝之剂。沉香下气补肾，定霍乱之心痛；橘皮开胃去痰，导壅滞之逆气。此六十六种药性之热者也。\n第三章 温性药\n温药总括，医家素谙。 木香理乎气滞；半夏主于痰湿。苍朮治目盲，燥脾去湿宜用；萝卜去膨胀，下气治面尤堪。况夫钟乳粉补肺气，兼疗肺虚；青盐治腹痛，且滋肾水。山药而腰湿能医；阿胶而痢嗽皆止。赤石脂治精浊而止泄，兼补崩中；阳起石暖子宫以壮阳，更疗阴痿。 诚以紫苑治嗽，防风怯风，苍耳子透脑止涕，威灵仙宣风通气。细辛去头风，止嗽而疗齿痛；艾叶治崩漏、安胎而医痢红。羌活明目驱风，除湿毒肿痛；白芷止崩治肿，疗痔瘘疮痈。若乃红蓝花通经，治产后恶血之余；刘寄奴散血，疗烫火金疮之苦。减风湿之痛则茵芋叶；疗折伤之症责骨碎补。 藿香叶辟恶气而定霍乱；草果仁温脾胃而止呕吐。巴戟天治阴疝白浊，补肾尤滋；元胡索理气痛血凝，调经有助。尝闻款冬花润肺，去痰嗽以定喘；肉豆蔻温中，止霍乱而助脾。抚芎走经络之痛；何首乌志疮疥之资。姜黄能下气、破恶血之积；防己宜消肿、去风湿之施。蒿本除风，主妇人阴痛之用；仙茅益肾，扶元气虚弱之衰。乃曰破故纸温肾，补精髓与劳伤；宣木瓜入肝，疗脚气并水肿。杏仁润肺燥止嗽之剂；茴香治疝气肾疼之用。诃子生精止渴，兼疗滑泄之痾；秦艽攻风逐水，又除肢节之痛。槟榔豁痰而逐水，杀刺白虫；杜仲益肾而添精，去腰膝重。当知紫石英疗惊悸崩中之疾，橘核仁治腰痛疝气之真。金樱子兮涩精；紫苏子兮下气涎。淡豆豉发伤寒之表；大小蓟除诸血之鲜。益智安神，治小便之频数；麻仁润肺，利六腑之燥坚。抑又闻补虚弱、排疮脓，莫若黄耆；强腰脚、壮筋骨，无如狗脊。 菟丝子补肾以明目；马兰花治疝而有益。此五十四种药性之温者也。\n第四章 平性药\n详论药性，平和惟在。\n以磠砂而去积；用龙齿以安魂。青皮快膈除膨胀，且利脾胃；芡实益精治白浊，兼补真元。原夫木贼草去目翳，崩漏亦医；花蕊石治金疮，血行则却。决明和肝气，治眼之剂；天麻主头眩，怯风之药。甘草和诸药而解百毒，盖以气平；石斛平胃气而补肾虚，更医脚弱。观乎商陆治肿，覆盆益精。琥珀安神而散血；朱砂镇心而有灵。牛膝强足补精，兼疗腰痛；龙骨止汗住泄，更治血崩。甘松理风气而痛止；蒺藜疗风疮而目明。人参润肺宁心，开脾助胃；蒲黄止崩治衄，消痨调经。岂不以南星醒脾，去惊风痰吐之忧；三棱破积，除血块气滞之症。没食主泄泻而神效；皂角治风痰而响应。桑螵蛸疗遗精之泄；鸭头血医水肿之盛。蛤蚧治痨嗽，牛蒡子疏风壅之痰；全蝎主风瘫，酸枣仁去怔忡之病。尝闻桑寄生益血安胎，且止腰痛；大腹子去膨下气，亦令胃和。小草、远志，俱有宁心之妙；木通、猪苓，尤为利水之多。莲肉有清心醒脾之用；没药乃治疮散血之科。郁李仁润肠宣血，去浮肿之疾；茯神宁心益智，除惊悸之痾。白茯苓补虚劳，多在心脾之有眚；赤茯苓破结血，独利水道以无毒。因知麦芽有助脾化食之功；小麦有止汗养心之力。 白附子去面风之游走；大腹皮治水肿之泛溢。椿根白皮主泻血；桑根白皮主喘息。桃仁破瘀血兼治腰痛；神曲健脾胃而进饮食。五加皮坚筋骨以立行；柏子仁养心神而有益。抑又闻安息香辟恶，且止心腹之痛；冬瓜仁醒脾，实为饮食之资。僵蚕治诸风之喉闭；百合恋肺痨之嗽萎。赤小豆解热毒，疮肿宜用；枇杷叶下逆气，哕呕可医。连翘排疮脓与肿毒；石南叶利筋骨与毛皮。谷芽养脾，阿魏除邪气而破积；紫河车补血，大枣和药性以开脾。然而鳖甲治痨疟，兼破症葭；龟甲坚筋骨，更疗崩疾。乌梅主便血疟疾之用；竹沥治中风声音之失。此六十八种药性之平者也。\nReferences\n\n药性赋",
		"tags": [ "note"]
},

{
		"title": "权限控制",
		"date":"Sat Sep 20 2025 00:15:02 GMT+0800 (China Standard Time)",
		"url":"/notes/cpp/继承/",
		"content": "Public inheritance\npublic inheritance means &quot;is-a&quot;.\nIf you write that class D (“Derived”) publicly inherits from class B (“Base”), you are telling C++ compilers (as well as human readers of your code) that every object of type D is also an object of type B, but not vice versa.\n-- 《Effective C++》item 32\nAny function that expects an argument of type Person (or pointer-to-Person or reference-to-Person) will also take a Student object (or pointer-to-Student or reference-to-Student):\nvoid eat(const Person&amp; p); // anyone can eat\nvoid study(const Student&amp; s); // only students study\nPerson p; // p is a Person\nStudent s; // s is a Student\neat(p); // fine, p is a Person\neat(s); // fine, s is a Student, and a Student is-a Person\nstudy(s); // fine\nstudy(p); // error! p isn’t a Student\n\nThis is true only for public inheritance.\n\n意味着只有公有继承，派生类的指针或引用才能转化为基类指针或引用\n\nPublic inheritance asserts that everything that applies to base class objects — everything! — also applies to derived class objects.\nThings to Remember\n✦ Public inheritance means “is-a.” Everything that applies to base classes must also apply to derived classes, because every derived class object is a base class object.\nPrivate inheritance\nTwo features:\n\nin contrast to public inheritance, compilers will generally not convert a derived class object (such as Student) into a base class object (such as Person) if the inheritance relationship between the classes is private;\nmembers inherited from a private base class become private members of the derived class, even if they were protected or public in the base class.\n\nsee more in https://isocpp.org/wiki/faq/private-inheritance#overview-priv-inherit\nPrivate inheritance means is-implemented-in-terms-of.\nIf you make a class D privately inherit from a class B, you do so because you are interested in taking advantage of some of the features available in class B, not because there is any conceptual relationship between objects of types B and D. As such, private inheritance is purely an implementation technique. (That’s why everything you inherit from a private base class becomes private in your class: it’s all just implementation detail.)\nPrivate inheritance means that implementation only should be inherited; interface should be ignored.\n派生类私有继承基类，旨在利用基类已经写好的一些功能，并不在意基类的接口，继承过来的成员统统变成私有。一般用于software implementation，而非software design.\nThings to Remember\n✦ Private inheritance means is-implemented-in-terms of. It’s usually inferior to composition, but it makes sense when a derived class needs access to protected base class members or needs to redefine inherited virtual functions.\n✦ Unlike composition, private inheritance can enable the empty base optimization. This can be important for library developers who strive to minimize object sizes.\nHow are “private inheritance” and “composition” similar?\nprivate inheritance is a syntactic variant of composition (AKA aggregation and/or has-a).\nE.g., the “Car has-a Engine” relationship can be expressed using simple composition:\nclass Engine {\npublic:\nEngine(int numCylinders);\nvoid start(); // Starts this Engine\n};\nclass Car {\npublic:\nCar() : e_(8) { } // Initializes this Car with 8 cylinders\nvoid start() { e_.start(); } // Start this Car by starting its Engine\nprivate:\nEngine e_; // Car has-a Engine\n};\n\nThe “Car has-a Engine” relationship can also be expressed using private inheritance:\nclass Car : private Engine { // Car has-a Engine\npublic:\nCar() : Engine(8) { } // Initializes this Car with 8 cylinders\nusing Engine::start; // Start this Car by starting its Engine\n};\n\nThere are several similarities between these two variants:\n\nIn both cases there is exactly one Engine member object contained in every Car object\nIn neither case can users (outsiders) convert a Car* to an Engine*\nIn both cases the Car class has a start() method that calls the start() method on the contained Engine object.\n\nThere are also several distinctions:\n\nThe simple-composition variant is needed if you want to contain several Engines per Car\nThe private-inheritance variant can introduce unnecessary multiple inheritance\nThe private-inheritance variant allows members of Car to convert a Car* to an Engine*\nThe private-inheritance variant allows access to the protected members of the base class\nThe private-inheritance variant allows Car to override Engine’s virtual functions\nThe private-inheritance variant makes it slightly simpler (20 characters compared to 28 characters) to give Car a start() method that simply calls through to the Engine’s start() method\n\nNote that private inheritance is usually used to gain access into the protected members of the base class, but this is usually a short-term solution (translation: a band-aid).\nWhat are the access rules with private and protected inheritance?\nTake these calsses as examples:\nclass B { /*...*/ };\nclass D_priv : private B { /*...*/ };\nclass D_prot : protected B { /*...*/ };\nclass D_publ : public B { /*...*/ };\nclass UserClass { B b; /*...*/ };\n\nNone of the derived classes can access anything that is private in B.\n\nIn D_priv, the public and protected parts of B are private;\nIn D_prot, the public and protected parts of B are protected;\nIn D_publ, the public parts of B are public and the protected parts of B are protected (D_publ is-a-kind-of-a B);\nclass UserClass can access only the public parts of B, which “seals off” UserClass from B.\n\nTo make a public member of B public in D_priv or D_prot, state the name of the member with a B:: prefix. E.g., to make member B::f(int, float) public in D_prot, you would say:\nclass D_prot : protected B {\npublic:\nusing B::f; // Note: Not using B::f(int,float)\n};\n\nConclusion\n\n公有继承(public) 公有继承的特点是基类的公有成员和保护成员作为派生类的成员时，它们都保持原有的状态，而基类的私有成员仍然是私有的，不能被这个派生类的子类所访问。\n私有继承(private) 私有继承的特点是基类的公有成员和保护成员都作为派生类的私有成员，并且不能被这个派生类的子类所访问。\n保护继承(protected) 保护继承的特点是基类的所有公有成员和保护成员都成为派生类的保护成员，并且只能被它的派生类成员函数或友元访问，基类的私有成员仍然是私有的。\nsee more in C++继承：公有，私有，保护\n\nReferences\n\nInheritance — private and protected inheritance",
		"tags": [ "note","cpp","public","private","protected"]
}
]