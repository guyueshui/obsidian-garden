---
{"dg-publish":true,"permalink":"/assets/202305161028-202306291048-excalidraw/","tags":["excalidraw"]}
---
<style> .container {font-family: sans-serif; text-align: center;} .button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;} .excalidraw .App-menu_top .buttonList { display: flex;} .excalidraw-wrapper { height: 800px; margin: 50px; position: relative;} :root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;} </style><script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@excalidraw/excalidraw@0/dist/excalidraw.production.min.js"></script><div id="202305161028内存模型-202306291048excalidraw.md"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.7.1","elements":[{"id":"m_y3yqXpn9gyInpowwCrv","type":"rectangle","x":-420,"y":-80,"width":340,"height":302,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":{"type":3},"seed":1124802156,"version":84,"versionNonce":1860841100,"isDeleted":false,"boundElements":[{"type":"text","id":"LsvvuRLU"}],"updated":1734705933725,"link":null,"locked":false,"index":"a0","frameId":null},{"id":"LsvvuRLU","type":"text","x":-297.015625,"y":-75,"width":94.03125,"height":24,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":null,"seed":72567764,"version":69,"versionNonce":1862193204,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"text":"thread A","rawText":"thread A","fontSize":20,"fontFamily":3,"textAlign":"center","verticalAlign":"top","baseline":19,"containerId":"m_y3yqXpn9gyInpowwCrv","originalText":"thread A","lineHeight":1.2,"autoResize":true,"index":"a1","frameId":null},{"id":"EaLfjD5E","type":"text","x":-40,"y":-200,"width":164.0625,"height":24,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":null,"seed":693974764,"version":46,"versionNonce":557612300,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"text":"atomic<int> x;","rawText":"atomic<int> x;","fontSize":20,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":19,"containerId":null,"originalText":"atomic<int> x;","lineHeight":1.2,"autoResize":true,"index":"a2","frameId":null},{"type":"rectangle","version":120,"versionNonce":2090772916,"isDeleted":false,"id":"yL6F1uRJ8rIZzFUZjlI6A","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-20,"y":-80,"strokeColor":"#000000","backgroundColor":"transparent","width":520,"height":302,"seed":1124802156,"groupIds":[],"roundness":{"type":3},"boundElements":[{"type":"text","id":"tPg2MLwk"}],"updated":1734705933725,"link":null,"locked":false,"index":"a3","frameId":null},{"type":"text","version":107,"versionNonce":557906828,"isDeleted":false,"id":"tPg2MLwk","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":192.984375,"y":-75,"strokeColor":"#000000","backgroundColor":"transparent","width":94.03125,"height":24,"seed":72567764,"groupIds":[],"roundness":null,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"fontSize":20,"fontFamily":3,"text":"thread B","rawText":"thread B","textAlign":"center","verticalAlign":"top","containerId":"yL6F1uRJ8rIZzFUZjlI6A","originalText":"thread B","lineHeight":1.2,"baseline":19,"autoResize":true,"index":"a4","frameId":null},{"id":"AzajFeco","type":"text","x":-400,"y":1.7763568394002505e-15,"width":309.375,"height":96,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":null,"seed":2110611540,"version":123,"versionNonce":1275548468,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"text":"// dome \n// some \n// write\n\nx.store(23, memory_order_realse);","rawText":"// dome \n// some \n// write\n\nx.store(23, memory_order_realse);","fontSize":16,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":92,"containerId":null,"originalText":"// dome \n// some \n// write\n\nx.store(23, memory_order_realse);","lineHeight":1.2,"autoResize":true,"index":"a5","frameId":null},{"id":"xwlSwItr","type":"text","x":20,"y":20,"width":478.125,"height":96,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":null,"seed":424746732,"version":226,"versionNonce":1496427020,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"text":"if (x.load(memory_order_acquire) == 23) {\n    // at this point, all writes in A\n    // before x.store(23, memory_order_release)\n    // is visible in B.\n}","rawText":"if (x.load(memory_order_acquire) == 23) {\n    // at this point, all writes in A\n    // before x.store(23, memory_order_release)\n    // is visible in B.\n}","fontSize":16,"fontFamily":3,"textAlign":"left","verticalAlign":"top","baseline":92,"containerId":null,"originalText":"if (x.load(memory_order_acquire) == 23) {\n    // at this point, all writes in A\n    // before x.store(23, memory_order_release)\n    // is visible in B.\n}","lineHeight":1.2,"autoResize":true,"index":"a6","frameId":null},{"id":"fIrIUYcdWX2t8_vJHSpFl","type":"line","x":-420,"y":120,"width":340,"height":0,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":{"type":2},"seed":675984212,"version":29,"versionNonce":1268698292,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"points":[[0,0],[340,0]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null,"index":"a7","frameId":null},{"type":"line","version":44,"versionNonce":1544063116,"isDeleted":false,"id":"WP-6_Ta-cRa7Lbi-c0xBd","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-419.43526566177604,"y":-18.90875959247351,"strokeColor":"#000000","backgroundColor":"transparent","width":340,"height":0,"seed":675984212,"groupIds":[],"roundness":{"type":2},"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[340,0]],"index":"a8","frameId":null},{"id":"XEohCeTZdHTX2UqGjYFEJ","type":"line","x":-20,"y":40,"width":520,"height":0,"angle":0,"strokeColor":"#873184","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"roundness":{"type":2},"seed":136541420,"version":49,"versionNonce":755701300,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"points":[[0,0],[520,0]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null,"index":"a9","frameId":null},{"id":"1aYgM6dvWJzQwvJ1WFrf6","type":"line","x":-80,"y":-20,"width":60,"height":60,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"dashed","roughness":1,"opacity":100,"groupIds":[],"roundness":{"type":2},"seed":1711447508,"version":17,"versionNonce":1300207372,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"points":[[0,0],[60,60]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null,"index":"aA","frameId":null},{"id":"kKQUvKDVN8l0MAQGefbNH","type":"line","x":-80.4501079544425,"y":120.03893110603094,"width":60,"height":80,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"dashed","roughness":1,"opacity":100,"groupIds":[],"roundness":{"type":2},"seed":948879596,"version":45,"versionNonce":2100441012,"isDeleted":false,"boundElements":[],"updated":1734705933725,"link":null,"locked":false,"points":[[0,0],[60,80]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null,"index":"aB","frameId":null}],"appState":{"theme":"light","viewBackgroundColor":"#ffffff","currentItemStrokeColor":"#000000","currentItemBackgroundColor":"transparent","currentItemFillStyle":"hachure","currentItemStrokeWidth":1,"currentItemStrokeStyle":"dashed","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":3,"currentItemFontSize":16,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","currentItemArrowType":"round","scrollX":444.80592444144565,"scrollY":371.93113817471055,"zoom":{"value":1},"currentItemRoundness":"round","gridSize":20,"gridStep":5,"gridModeEnabled":true,"gridColor":{"Bold":"rgba(217, 217, 217, 0.5)","Regular":"rgba(230, 230, 230, 0.5)"},"colorPalette":{},"currentStrokeOptions":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true},"objectsSnapModeEnabled":false,"activeTool":{"type":"selection","customType":null,"locked":false,"lastActiveTool":null}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("202305161028内存模型-202306291048excalidraw.md");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>