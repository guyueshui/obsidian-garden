---
{"dg-publish":true,"permalink":"/__zettel/202507171527debug技巧之top/","title":202507171527,"tags":["linux","管理"],"created":"2025-07-17T15:27:38+08:00"}
---

虽然htop更modern，但是top毕竟是自带。

```bash
# 查看指定程序
top -p`pidof <program>`

# 按H可以展示线程，可用于查看各线程CPU占用
top - 15:29:49 up 954 days, 23:27,  6 users,  load average: 0.00, 0.06, 0.63
Threads:  16 total,   0 running,  16 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 24689460 total,  7071788 free,   181036 used, 17436636 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 23842748 avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
 9867 bingbin+  20   0  615688  32832  19904 S  4.3  0.1   0:34.90 feeder_handler
 9864 bingbin+  20   0  615688  32832  19904 S  0.3  0.1   0:00.50 SZL2ZhuBiSort
 9854 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.33 feeder_handler
 9855 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.01 feeder_handler
 9856 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.40 WorkThread1
 9857 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.00 WorkThread2
 9858 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.00 WorkThread3
 9859 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.00 WorkThread4
 9860 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.17 IOManagerImpl
 9861 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.21 HttpHandler
 9862 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.23 FileWriter
 9863 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.00 PubSortedThrd
 9865 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.42 SZL2ZhuBiSort
 9866 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.48 SZL2ZhuBiSort
 9868 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.03 feeder_handler
 9869 bingbin+  20   0  615688  32832  19904 S  0.0  0.1   0:00.36 IOManagerImpl
 ```

常用快捷键：

- e: 切换数值显示单位，m、g、t、p
- m：显示内存用量条
- M：按内存占用排序
- z：上色
- H：切换显示线程
- c: 切换显示完整命令行
- N：固定顺序，行不再跳来跳去