---
{"dg-publish":true,"permalink":"/zettel/202304241826-rtti-in-cpp/","title":202304241826,"tags":["rtti","dynamic-cast","cpp","typeid"]}
---


RTTI stands for RunTime Type Identification. Commonly two ways to achieve it.

Dynamic cast
-----------------------

```cpp
class Base {};
class Derived : public Base {};

void foo(Base* b)
{
    Derived* d = dynamic_cast<Derived*>(b);
    if (d != nullptr)
    {
        // b is actually points to a Derived object.
    }
}
```

Typeid
------------

[`typeid`](https://en.cppreference.com/w/cpp/language/typeid) is a operator in c++, which gives the `type_info` struct to the given type. See more in cppreference.

Summary
-----------------

Dynamic cast needs to work in polymorphic. Once use RTTI, every type will contain a extra info struct `type_info`.

![](http://image.huawei.com/tiny-lts/v1/images/4256f69a6fb173324f88b8c63cc15096_861x325.png)

Pass the `-fno-rtti` to the compiler to disable this, i.e., RTTI incurs extra cost.

See also [继承](../notes/cpp/继承.md).